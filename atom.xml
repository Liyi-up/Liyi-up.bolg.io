<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Liyi&#39;s personal blog</title>
  <icon>https://www.gravatar.com/avatar/afffe0133f34899ce2d33800a774e517</icon>
  <subtitle>The whole stack</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://liyi-up.top/"/>
  <updated>2021-09-14T01:53:51.381Z</updated>
  <id>https://liyi-up.top/</id>
  
  <author>
    <name>Liyi</name>
    <email>2933909306@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>用户权限相关命令</title>
    <link href="https://liyi-up.top/2021/09/14/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/"/>
    <id>https://liyi-up.top/2021/09/14/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/</id>
    <published>2021-09-14T01:45:43.000Z</published>
    <updated>2021-09-14T01:53:51.381Z</updated>
    
    <content type="html"><![CDATA[<h2 id="用户-和-权限-的基本概念"><a href="#用户-和-权限-的基本概念" class="headerlink" title="用户 和 权限 的基本概念"></a><strong>用户</strong> 和 <strong>权限</strong> 的基本概念</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul><li><strong>用户</strong> 是 Linux 系统工作中重要的一环，用户管理包括 <strong>用户</strong> 与 <strong>组</strong> 管理</li><li>在 Linux 系统中，不论是由本机或是远程登录系统，每个系统都<strong>必须拥有一个账号</strong>，并且<strong>对于不同的系统资源拥有不同的使用权限</strong></li><li>在 Linux 中，可以指定 <strong>每一个用户</strong> 针对 <strong>不同的文件或者目录</strong> 的 <strong>不同权限</strong></li><li>对 <strong>文件／目录</strong> 的权限包括：</li></ul><a id="more"></a><div class="table-container"><table><thead><tr><th style="text-align:center">序号</th><th style="text-align:center">权限</th><th style="text-align:center">英文</th><th style="text-align:center">缩写</th><th style="text-align:center">数字代号</th></tr></thead><tbody><tr><td style="text-align:center">01</td><td style="text-align:center">读</td><td style="text-align:center">read</td><td style="text-align:center">r</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">02</td><td style="text-align:center">写</td><td style="text-align:center">write</td><td style="text-align:center">w</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">03</td><td style="text-align:center">执行</td><td style="text-align:center">excute</td><td style="text-align:center">x</td><td style="text-align:center">1</td></tr></tbody></table></div><h3 id="组"><a href="#组" class="headerlink" title="组"></a>组</h3><ul><li>为了方便用户管理，提出了 <strong>组</strong> 的概念，如下图所示</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/14/4FNpIs.png" alt="001_组示意图"></p><ul><li>在实际应用中，可以预先针对 <strong>组</strong> 设置好权限，然后 <strong>将不同的用户添加到对应的组中</strong>，从而<strong>不用依次为每一个用户设置权限</strong></li></ul><h3 id="ls-l-扩展"><a href="#ls-l-扩展" class="headerlink" title="ls -l 扩展"></a>ls -l 扩展</h3><ul><li><p><code>ls -l</code> 可以查看文件夹下文件的详细信息，从左到右依次是：</p><ul><li><strong>权限</strong>，第 1 个字符如果是 <code>d</code> 表示目录</li><li><strong>硬链接数</strong>，通俗地讲，就是有多少种方式，可以访问到当前目录／文件</li><li><strong>拥有者</strong>，家目录下 文件／目录 的拥有者通常都是当前用户</li><li><strong>组</strong>，在 Linux 中，很多时候，会出现组名和用户名相同的情况，后续会讲</li><li><strong>大小</strong></li><li><strong>时间</strong></li><li><strong>名称</strong></li></ul></li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/14/4FNPGq.png" alt="002_权限示意图"></p><h3 id="chmod-简单使用（重要）"><a href="#chmod-简单使用（重要）" class="headerlink" title="chmod 简单使用（重要）"></a><code>chmod</code> 简单使用（重要）</h3><ul><li><code>chmod</code> 可以修改 <strong>用户／组</strong> 对 <strong>文件／目录</strong> 的权限</li><li>命令格式如下：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +/-rwx 文件名|目录名</span><br></pre></td></tr></table></figure><blockquote><p>提示：以上方式会一次性修改 <code>拥有者</code> / <code>组</code> 权限，有关 <code>chmod</code> 的高级用法，后续会讲</p></blockquote><h3 id="超级用户"><a href="#超级用户" class="headerlink" title="超级用户"></a>超级用户</h3><ul><li>Linux 系统中的 <code>root</code> 账号通常 <strong>用于系统的维护和管理</strong>，对操作系统的所有资源 <strong>具有所有访问权限</strong></li><li>在大多数版本的 Linux 中，都不推荐 <strong>直接使用 root 账号登录系统</strong></li><li>在 Linux 安装的过程中，系统会自动创建一个用户账号，而这个默认的用户就称为“标准用户”</li></ul><h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><ul><li><code>su</code> 是 <code>substitute user</code> 的缩写，表示 <strong>使用另一个用户的身份</strong></li><li><code>sudo</code> 命令用来以其他身份来执行命令，预设的身份为 <code>root</code></li><li>用户使用 <code>sudo</code> 时，必须先输入密码，之后有 <strong>5 分钟的有效期限</strong>，超过期限则必须重新输入密码</li></ul><blockquote><p>若其未经授权的用户企图使用 <code>sudo</code>，则会发出警告邮件给管理员</p></blockquote><h2 id="组管理-终端命令"><a href="#组管理-终端命令" class="headerlink" title="组管理 终端命令"></a><strong>组管理</strong> 终端命令</h2><blockquote><p>提示：<strong>创建组</strong> / <strong>删除组</strong> 的终端命令都需要通过 <code>sudo</code> 执行</p></blockquote><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>groupadd 组名</td><td>添加组</td></tr><tr><td>02</td><td>groupdel 组名</td><td>删除组</td></tr><tr><td>03</td><td>cat /etc/group</td><td>确认组信息</td></tr><tr><td>04</td><td>chgrp -R 组名 文件/目录名</td><td>递归修改文件/目录的所属组</td></tr></tbody></table></div><blockquote><p>提示：</p><ul><li>组信息保存在 <code>/etc/group</code> 文件中</li><li><code>/etc</code> 目录是专门用来保存 <strong>系统配置信息</strong> 的目录</li></ul></blockquote><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/14/4FNVLF.png" alt="001_组示意图"></p><ul><li>在实际应用中，可以预先针对 <strong>组</strong> 设置好权限，然后 <strong>将不同的用户添加到对应的组中</strong>，从而<strong>不用依次为每一个用户设置权限</strong></li></ul><h4 id="演练目标"><a href="#演练目标" class="headerlink" title="演练目标"></a>演练目标</h4><ol><li>在 <code>python</code> 用户的桌面文件夹下创建 <code>Python学习</code> 目录</li><li>新建 <code>dev</code> 组</li><li>将 <code>Python学习</code> 目录的组修改为 <code>dev</code></li></ol><h2 id="用户管理-终端命令"><a href="#用户管理-终端命令" class="headerlink" title="用户管理 终端命令"></a><strong>用户管理</strong> 终端命令</h2><blockquote><p>提示：<strong>创建用户</strong> / <strong>删除用户</strong> / <strong>修改其他用户密码</strong> 的终端命令都需要通过 <code>sudo</code> 执行</p></blockquote><h3 id="创建用户／设置密码／删除用户"><a href="#创建用户／设置密码／删除用户" class="headerlink" title="创建用户／设置密码／删除用户"></a>创建用户／设置密码／删除用户</h3><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td>01</td><td>useradd -m -g 组 新建用户名</td><td>添加新用户</td><td><ul><li>-m 自动建立用户家目录</li><li>-g 指定用户所在的组，否则会建立一个和同名的组</li></ul></td></tr><tr><td>02</td><td>passwd 用户名</td><td>设置用户密码</td><td>如果是普通用户，直接用 passwd 可以修改自己的账户密码</td></tr><tr><td>03</td><td>userdel -r 用户名</td><td>删除用户</td><td>-r 选项会自动删除用户家目录</td></tr><tr><td>04</td><td>cat /etc/passwd \</td><td>grep 用户名</td><td>确认用户信息</td><td>新建用户后，用户信息会保存在 /etc/passwd 文件中</td></tr></tbody></table></div><blockquote><p>提示：</p><ul><li>创建用户时，如果忘记添加 <code>-m</code> 选项指定新用户的家目录 —— 最简单的方法就是<strong>删除用户，重新创建</strong></li><li>创建用户时，默认会创建一个和<strong>用户名</strong>同名的<strong>组名</strong></li><li>用户信息保存在 <code>/etc/passwd</code> 文件中</li></ul></blockquote><h3 id="查看用户信息"><a href="#查看用户信息" class="headerlink" title="查看用户信息"></a>查看用户信息</h3><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>id [用户名]</td><td>查看用户 UID 和 GID 信息</td></tr><tr><td>02</td><td>who</td><td>查看当前所有登录的用户列表</td></tr><tr><td>03</td><td>whoami</td><td>查看当前登录用户的账户名</td></tr></tbody></table></div><h4 id="passwd-文件"><a href="#passwd-文件" class="headerlink" title="passwd 文件"></a>passwd 文件</h4><p><code>/etc/passwd</code> 文件存放的是用户的信息，由 6 个分号组成的 7 个信息，分别是</p><ol><li>用户名</li><li>密码（x，表示加密的密码）</li><li>UID（用户标识）</li><li>GID（组标识）</li><li>用户全名或本地帐号</li><li>家目录</li><li>登录使用的 Shell，就是登录之后，使用的终端命令，<code>ubuntu</code> 默认是 <code>dash</code></li></ol><h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><ul><li><code>usermod</code> 可以用来设置 <strong>用户</strong> 的 <strong>主组</strong> ／ <strong>附加组</strong> 和 <strong>登录 Shell</strong>，命令格式如下：</li><li><strong>主组</strong>：通常在新建用户时指定，在 <code>etc/passwd</code> 的第 4 列 <strong>GID 对应的组</strong></li><li><strong>附加组</strong>：在 <code>etc/group</code> 中最后一列表示该组的用户列表，用于指定 <strong>用户的附加权限</strong></li></ul><blockquote><p>提示：设置了用户的附加组之后，需要重新登录才能生效！</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改用户的主组（passwd 中的 GID）</span></span><br><span class="line">usermod -g 组 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改用户的附加组</span></span><br><span class="line">usermod -G 组 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改用户登录 Shell</span></span><br><span class="line">usermod -s /bin/bash 用户名</span><br></pre></td></tr></table></figure><blockquote><p>注意：默认使用 <code>useradd</code> 添加的用户是没有权限使用 <code>sudo</code> 以 <code>root</code> 身份执行命令的，可以使用以下命令，将用户添加到 <code>sudo</code> 附加组中</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G sudo 用户名</span><br></pre></td></tr></table></figure><h4 id="which（重要）"><a href="#which（重要）" class="headerlink" title="which（重要）"></a>which（重要）</h4><blockquote><p>提示</p><ul><li><code>/etc/passwd</code> 是用于保存用户信息的文件</li><li><code>/usr/bin/passwd</code> 是用于修改用户密码的程序</li></ul></blockquote><ul><li><code>which</code> 命令可以查看执行命令所在位置，例如：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># /bin/ls</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> useradd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># /usr/sbin/useradd</span></span><br></pre></td></tr></table></figure><h5 id="bin-和-sbin"><a href="#bin-和-sbin" class="headerlink" title="bin 和 sbin"></a><code>bin</code> 和 <code>sbin</code></h5><ul><li>在 <code>Linux</code> 中，绝大多数可执行文件都是保存在 <code>/bin</code>、<code>/sbin</code>、<code>/usr/bin</code>、<code>/usr/sbin</code></li><li><code>/bin</code>（<code>binary</code>）是二进制执行文件目录，主要用于具体应用</li><li><code>/sbin</code>（<code>system binary</code>）是系统管理员专用的二进制代码存放目录，主要用于系统管理</li><li><code>/usr/bin</code>（<code>user commands for applications</code>）后期安装的一些软件</li><li><code>/usr/sbin</code>（<code>super user commands for applications</code>）超级用户的一些管理程序</li></ul><blockquote><p>提示：</p><ul><li><code>cd</code> 这个终端命令是内置在系统内核中的，没有独立的文件，因此用 <code>which</code> 无法找到 <code>cd</code> 命令的位置</li></ul></blockquote><h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td>01</td><td>su - 用户名</td><td>切换用户，并且切换目录</td><td>- 可以切换到用户家目录，否则保持位置不变</td></tr><tr><td>02</td><td>exit</td><td>退出当前登录账户</td></tr></tbody></table></div><ul><li><code>su</code> 不接用户名，可以切换到 <code>root</code>，但是不推荐使用，因为不安全</li><li><code>exit</code> 示意图如下：</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/14/4FNGLD.png" alt="003_su和exit示意图"></p><h2 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>chown</td><td>修改拥有者</td></tr><tr><td>02</td><td>chgrp</td><td>修改组</td></tr><tr><td>03</td><td>chmod</td><td>修改权限</td></tr></tbody></table></div><ul><li>命令格式如下：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改文件|目录的拥有者</span></span><br><span class="line">chown 用户名 文件名|目录名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归修改文件|目录的组</span></span><br><span class="line">chgrp -R 组名 文件名|目录名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归修改文件权限</span></span><br><span class="line">chmod -R 755 文件名|目录名</span><br></pre></td></tr></table></figure><ul><li><code>chmod</code> 在设置权限时，可以简单地使用三个数字分别对应 <strong>拥有者</strong> ／ <strong>组</strong> 和 <strong>其他</strong> 用户的权限</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接修改文件|目录的 读|写|执行 权限，但是不能精确到 拥有者|组|其他</span></span><br><span class="line">chmod +/-rwx 文件名|目录名</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/14/4FNGLD.png" alt="004_文件权限示意图"></p><ul><li>常见数字组合有（<code>u</code>表示用户／<code>g</code>表示组／<code>o</code>表示其他）：<ul><li><code>777</code> ===&gt; <code>u=rwx,g=rwx,o=rwx</code> </li><li><code>755</code> ===&gt; <code>u=rwx,g=rx,o=rx</code></li><li><code>644</code> ===&gt; <code>u=rw,g=r,o=r</code></li></ul></li></ul><h4 id="chmod-演练目标"><a href="#chmod-演练目标" class="headerlink" title="chmod 演练目标"></a><code>chmod</code> 演练目标</h4><ol><li>将 <code>01.py</code> 的权限修改为 <code>u=rwx,g=rx,o=r</code> </li><li>将 <code>123.txt</code> 的权限修改为 <code>u=rw,g=r,o=-</code> </li><li>将 <code>test</code> 目录以及目录下的 <strong>所有</strong> 文件权限修改为 <code>u=rwx,g=rwx,o=rx</code> </li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;用户-和-权限-的基本概念&quot;&gt;&lt;a href=&quot;#用户-和-权限-的基本概念&quot; class=&quot;headerlink&quot; title=&quot;用户 和 权限 的基本概念&quot;&gt;&lt;/a&gt;&lt;strong&gt;用户&lt;/strong&gt; 和 &lt;strong&gt;权限&lt;/strong&gt; 的基本概念&lt;/h2&gt;&lt;h3 id=&quot;基本概念&quot;&gt;&lt;a href=&quot;#基本概念&quot; class=&quot;headerlink&quot; title=&quot;基本概念&quot;&gt;&lt;/a&gt;基本概念&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;用户&lt;/strong&gt; 是 Linux 系统工作中重要的一环，用户管理包括 &lt;strong&gt;用户&lt;/strong&gt; 与 &lt;strong&gt;组&lt;/strong&gt; 管理&lt;/li&gt;
&lt;li&gt;在 Linux 系统中，不论是由本机或是远程登录系统，每个系统都&lt;strong&gt;必须拥有一个账号&lt;/strong&gt;，并且&lt;strong&gt;对于不同的系统资源拥有不同的使用权限&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;在 Linux 中，可以指定 &lt;strong&gt;每一个用户&lt;/strong&gt; 针对 &lt;strong&gt;不同的文件或者目录&lt;/strong&gt; 的 &lt;strong&gt;不同权限&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;对 &lt;strong&gt;文件／目录&lt;/strong&gt; 的权限包括：&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>远程管理常用命令</title>
    <link href="https://liyi-up.top/2021/09/13/%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://liyi-up.top/2021/09/13/%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-09-13T07:53:58.000Z</published>
    <updated>2021-09-13T08:20:52.077Z</updated>
    
    <content type="html"><![CDATA[<h2 id="关机-重启"><a href="#关机-重启" class="headerlink" title="关机/重启"></a>关机/重启</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>shutdown 选项 时间</td><td>shutdown</td><td>关机／重新启动</td></tr></tbody></table></div><h3 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a><code>shutdown</code></h3><ul><li><code>shutdown</code> 命令可以 <strong>安全</strong> <strong>关闭</strong> 或者 <strong>重新启动系统</strong></li></ul><a id="more"></a><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>重新启动</td></tr></tbody></table></div><blockquote><p>提示：</p><ul><li><strong>不指定选项和参数</strong>，默认表示 <strong>1 分钟</strong>之后 <strong>关闭电脑</strong></li><li>远程维护服务器时，最好不要关闭系统，而应该重新启动系统</li></ul></blockquote><ul><li>常用命令示例</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新启动操作系统，其中 now 表示现在</span></span><br><span class="line">$ shutdown -r now</span><br><span class="line"></span><br><span class="line"><span class="comment"># 立刻关机，其中 now 表示现在</span></span><br><span class="line">$ shutdown now</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统在今天的 20:25 会关机</span></span><br><span class="line">$ shutdown 20:25</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统再过十分钟后自动关机</span></span><br><span class="line">$ shutdown +10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消之前指定的关机计划</span></span><br><span class="line">$ shutdown -c</span><br></pre></td></tr></table></figure><h2 id="查看或配置网卡信息"><a href="#查看或配置网卡信息" class="headerlink" title="查看或配置网卡信息"></a>查看或配置网卡信息</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>ifconfig</td><td>configure a network interface</td><td>查看/配置计算机当前的网卡配置信息</td></tr><tr><td>02</td><td>ping ip地址</td><td>ping</td><td>检测到目标 ip地址 的连接是否正常</td></tr></tbody></table></div><h3 id="网卡-和-IP-地址"><a href="#网卡-和-IP-地址" class="headerlink" title="网卡 和 IP 地址"></a>网卡 和 IP 地址</h3><h4 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h4><ul><li>网卡是一个专门负责网络通讯的硬件设备</li><li><strong>IP 地址</strong>是设置在网卡上的地址信息</li></ul><blockquote><p>我们可以把 <strong>电脑</strong> 比作 <strong>电话</strong>，<strong>网卡</strong> 相当于 <strong>SIM 卡</strong>，<strong>IP 地址</strong> 相当于 <strong>电话号码</strong></p></blockquote><h4 id="IP-地址"><a href="#IP-地址" class="headerlink" title="IP 地址"></a>IP 地址</h4><ul><li><strong>每台联网的电脑上</strong>都有 <strong>IP 地址</strong>，<strong>是保证电脑之间正常通讯的重要设置</strong></li></ul><blockquote><p>注意：每台电脑的 IP 地址不能相同，否则会出现 IP 地址冲突，并且没有办法正常通讯</p></blockquote><h3 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a><code>ifconfig</code></h3><ul><li><code>ifconfig</code> 可以查看／配置计算机当前的网卡配置信息</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看网卡配置信息</span></span><br><span class="line">$ ifconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看网卡对应的 IP 地址</span></span><br><span class="line">$ ifconfig | grep inet</span><br></pre></td></tr></table></figure><blockquote><p>提示：一台计算机中有可能会有一个 <strong>物理网卡</strong> 和 <strong>多个虚拟网卡</strong>，在 Linux 中物理网卡的名字通常以 <code>ensXX</code> 表示</p></blockquote><ul><li><code>127.0.0.1</code> 被称为 <strong>本地回环/环回地址</strong>，一般用来测试本机网卡是否正常</li></ul><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a><code>ping</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检测到目标主机是否连接正常</span></span><br><span class="line">$ ping IP地址</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测本地网卡工作正常</span></span><br><span class="line">$ ping 127.0.0.1</span><br></pre></td></tr></table></figure><ul><li><code>ping</code> 一般用于检测当前计算机到目标计算机之间的网络 <strong>是否通畅</strong>，<strong>数值越大，速度越慢</strong></li></ul><blockquote><ul><li><code>ping</code> 的工作原理与潜水艇的声纳相似，<code>ping</code> 这个命令就是取自 <strong>声纳的声音</strong> </li><li>网络管理员之间也常将 <code>ping</code> 用作动词 —— <strong>ping 一下计算机X，看他是否开着</strong></li></ul></blockquote><p>原理：网络上的机器都有 <strong>唯一确定的 IP 地址</strong>，我们给<strong>目标 IP 地址</strong>发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，我们可以确定目标主机的存在</p><blockquote><p>提示：在 Linux 中，想要终止一个终端程序的执行，绝大多数都可以使用 <code>CTRL + C</code></p></blockquote><h2 id="远程登录和复制文件"><a href="#远程登录和复制文件" class="headerlink" title="远程登录和复制文件"></a>远程登录和复制文件</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>ssh 用户名@ip</td><td>secure shell</td><td>关机／重新启动</td></tr><tr><td>02</td><td>scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径</td><td>secure copy</td><td>远程复制文件</td></tr></tbody></table></div><h3 id="ssh-基础（重点）"><a href="#ssh-基础（重点）" class="headerlink" title="ssh 基础（重点）"></a><code>ssh</code> 基础（重点）</h3><p>在 Linux 中 SSH 是 <strong>非常常用</strong> 的工具，通过 <strong>SSH 客户端</strong> 我们可以连接到运行了 <strong>SSH 服务器</strong> 的远程机器上</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/13/4PtXxU.png" alt="001_SSH示意图"></p><ul><li><strong>SSH 客户端</strong>是一种使用 <code>Secure Shell（SSH）</code> 协议连接到远程计算机的软件程序</li><li><code>SSH</code> 是目前较可靠，<strong>专为远程登录会话和其他网络服务</strong> 提供安全性的协议<ul><li>利用 <code>SSH 协议</code> 可以有效<strong>防止远程管理过程中的信息泄露</strong></li><li>通过 <code>SSH 协议</code> 可以对所有传输的数据进行加密，也能够防止 DNS 欺骗和 IP 欺骗</li></ul></li><li><code>SSH</code> 的另一项优点是传输的数据可以是经过压缩的，所以可以加快传输的速度</li></ul><h4 id="域名-和-端口号"><a href="#域名-和-端口号" class="headerlink" title="域名 和 端口号"></a>域名 和 端口号</h4><h5 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h5><ul><li>由一串 <strong>用点分隔</strong> 的名字组成，例如：<code>www.itcast.cn</code></li><li>是 <strong>IP 地址</strong> 的别名，方便用户记忆</li></ul><h5 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h5><ul><li><strong>IP 地址</strong>：通过 <strong>IP 地址</strong> 找到网络上的 <strong>计算机</strong></li><li><p><strong>端口号</strong>：通过 <strong>端口号</strong> 可以找到 <strong>计算机上运行的应用程序</strong></p><ul><li><strong>SSH 服务器</strong> 的默认端口号是 <code>22</code>，如果是默认端口号，在连接的时候，可以省略</li></ul></li><li><p>常见服务端口号列表：</p></li></ul><div class="table-container"><table><thead><tr><th>序号</th><th>服务</th><th>端口号</th></tr></thead><tbody><tr><td>01</td><td>SSH 服务器</td><td>22</td></tr><tr><td>02</td><td>Web 服务器</td><td>80</td></tr><tr><td>03</td><td>HTTPS</td><td>443</td></tr><tr><td>04</td><td>FTP 服务器</td><td>21</td></tr></tbody></table></div><h4 id="SSH-客户端的简单使用"><a href="#SSH-客户端的简单使用" class="headerlink" title="SSH 客户端的简单使用"></a>SSH 客户端的简单使用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh [-p port] user@remote</span><br></pre></td></tr></table></figure><ul><li><code>user</code> 是在远程机器上的用户名，如果不指定的话默认为当前用户</li><li><code>remote</code> 是远程机器的地址，可以是 <strong>IP</strong>／<strong>域名</strong>，或者是 <strong>后面会提到的别名</strong></li><li><code>port</code> 是 <strong>SSH Server 监听的端口</strong>，如果不指定，就为默认值 <code>22</code></li></ul><blockquote><p>提示：</p><ul><li>使用 <code>exit</code> 退出当前用户的登录</li></ul><p>注意：</p><ul><li><code>ssh</code> 这个终端命令只能在 <code>Linux</code> 或者 <code>UNIX</code> 系统下使用</li><li>如果在 <code>Windows</code> 系统中，可以安装 <code>PuTTY</code> 或者 <code>XShell</code> 客户端软件即可</li></ul><p>提示：</p><ul><li>在工作中，SSH 服务器的端口号很有可能<strong>不是 22</strong>，如果遇到这种情况就需要使用 <code>-p</code> 选项，指定正确的端口号，否则无法正常连接到服务器</li></ul></blockquote><h4 id="3-Windows-下-SSH-客户端的安装"><a href="#3-Windows-下-SSH-客户端的安装" class="headerlink" title="3) Windows 下 SSH 客户端的安装"></a>3) Windows 下 SSH 客户端的安装</h4><ul><li><code>Putty</code> <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">http://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></li><li><code>XShell</code> <a href="http://xshellcn.com" target="_blank" rel="noopener">http://xshellcn.com</a></li></ul><blockquote><p>建议从官方网站下载正式的安装程序</p></blockquote><h3 id="scp（掌握）"><a href="#scp（掌握）" class="headerlink" title="scp（掌握）"></a><code>scp</code>（掌握）</h3><ul><li>scp 就是 <code>secure copy</code>，是一个在 Linux 下用来进行 <strong>远程拷贝文件</strong> 的命令</li><li>它的<strong>地址格式与 ssh 基本相同</strong>，<strong>需要注意的是</strong>，在指定端口时用的是大写的 <code>-P</code> 而不是小写的</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/13/4PN9aR.png" alt="002_SCP示意图"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把本地当前目录下的 01.py 文件 复制到 远程 家目录下的 Desktop/01.py</span></span><br><span class="line"><span class="comment"># 注意：`:` 后面的路径如果不是绝对路径，则以用户的家目录作为参照路径</span></span><br><span class="line">scp -P port 01.py user@remote:Desktop/01.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把远程 家目录下的 Desktop/01.py 文件 复制到 本地当前目录下的 01.py</span></span><br><span class="line">scp -P port user@remote:Desktop/01.py 01.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上 -r 选项可以传送文件夹</span></span><br><span class="line"><span class="comment"># 把当前目录下的 demo 文件夹 复制到 远程 家目录下的 Desktop</span></span><br><span class="line">scp -r demo user@remote:Desktop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把远程 家目录下的 Desktop 复制到 当前目录下的 demo 文件夹</span></span><br><span class="line">scp -r user@remote:Desktop demo</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>若给出的源文件是目录文件，则 scp 将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名</td></tr><tr><td>-P</td><td>若远程 SSH 服务器的端口不是 22，需要使用大写字母 -P 选项指定端口</td></tr></tbody></table></div><blockquote><p>注意：</p><ul><li><code>scp</code> 这个终端命令只能在 <code>Linux</code> 或者 <code>UNIX</code> 系统下使用</li><li>如果在 <code>Windows</code> 系统中，可以安装 <code>PuTTY</code>，使用 <code>pscp</code> 命令行工具或者安装 <code>FileZilla</code> 使用 <code>FTP</code> 进行文件传输</li></ul></blockquote><h4 id="FileZilla"><a href="#FileZilla" class="headerlink" title="FileZilla"></a><code>FileZilla</code></h4><ul><li>官方网站：<a href="https://www.filezilla.cn/download/client" target="_blank" rel="noopener">https://www.filezilla.cn/download/client</a></li><li><code>FileZilla</code> 在传输文件时，使用的是 <code>FTP 服务</code> 而不是 <code>SSH 服务</code>，因此端口号应该设置为 <code>21</code></li></ul><h3 id="SSH-高级（知道）"><a href="#SSH-高级（知道）" class="headerlink" title="SSH 高级（知道）"></a>SSH 高级（知道）</h3><ul><li>免密码登录</li><li>配置别名</li></ul><blockquote><p>提示：有关 SSH 配置信息都保存在用户家目录下的 <code>.ssh</code> 目录下</p></blockquote><h4 id="免密码登录"><a href="#免密码登录" class="headerlink" title="免密码登录"></a>免密码登录</h4><h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul><li>配置公钥<ul><li>执行 <code>ssh-keygen</code> 即可生成 SSH 钥匙，一路回车即可</li></ul></li><li>上传公钥到服务器<ul><li>执行 <code>ssh-copy-id -p port user@remote</code>，可以让远程服务器记住我们的公钥</li></ul></li></ul><h5 id="示意图"><a href="#示意图" class="headerlink" title="示意图"></a>示意图</h5><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/13/4PNFG6.png" alt="003_SSH 免密码示意图"></p><blockquote><p>非对称加密算法</p><ul><li>使用 <strong>公钥</strong> 加密的数据，需要使用 <strong>私钥</strong> 解密</li><li>使用 <strong>私钥</strong> 加密的数据，需要使用 <strong>公钥</strong> 解密</li></ul></blockquote><h4 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h4><p>每次都输入 <code>ssh -p port user@remote</code>，时间久了会觉得很麻烦，特别是当 <code>user</code>, <code>remote</code> 和 <code>port</code> 都得输入，而且还不好记忆</p><p>而 <strong>配置别名</strong> 可以让我们进一步偷懒，譬如用：<code>ssh mac</code> 来替代上面这么一长串，那么就在 <code>~/.ssh/config</code> 里面追加以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host mac</span><br><span class="line">    HostName ip地址</span><br><span class="line">    User itheima</span><br><span class="line">    Port 22</span><br></pre></td></tr></table></figure><p><strong>保存之后，即可用 <code>ssh mac</code> 实现远程登录了，<code>scp</code> 同样可以使用</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;关机-重启&quot;&gt;&lt;a href=&quot;#关机-重启&quot; class=&quot;headerlink&quot; title=&quot;关机/重启&quot;&gt;&lt;/a&gt;关机/重启&lt;/h2&gt;&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;序号&lt;/th&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;对应英文&lt;/th&gt;
&lt;th&gt;作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;01&lt;/td&gt;
&lt;td&gt;shutdown 选项 时间&lt;/td&gt;
&lt;td&gt;shutdown&lt;/td&gt;
&lt;td&gt;关机／重新启动&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;h3 id=&quot;shutdown&quot;&gt;&lt;a href=&quot;#shutdown&quot; class=&quot;headerlink&quot; title=&quot;shutdown&quot;&gt;&lt;/a&gt;&lt;code&gt;shutdown&lt;/code&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;shutdown&lt;/code&gt; 命令可以 &lt;strong&gt;安全&lt;/strong&gt; &lt;strong&gt;关闭&lt;/strong&gt; 或者 &lt;strong&gt;重新启动系统&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>文件和目录常用命令</title>
    <link href="https://liyi-up.top/2021/09/10/%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://liyi-up.top/2021/09/10/%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-09-10T06:41:10.000Z</published>
    <updated>2021-09-10T06:43:30.193Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul><li>查看目录内容<ul><li><code>ls</code></li></ul></li><li>切换目录<ul><li><code>cd</code></li></ul></li></ul><a id="more"></a><ul><li>创建和删除操作<ul><li><code>touch</code></li><li><code>rm</code></li><li><code>mkdir</code></li></ul></li><li>拷贝和移动文件<ul><li><code>cp</code></li><li><code>mv</code></li></ul></li><li>查看文件内容<ul><li><code>cat</code></li><li><code>more</code></li><li><code>grep</code></li></ul></li><li>其他<ul><li><code>echo</code></li><li>重定向 <code>&gt;</code> 和 <code>&gt;&gt;</code></li><li>管道 <code>|</code></li></ul></li></ul><h2 id="查看目录内容"><a href="#查看目录内容" class="headerlink" title="查看目录内容"></a>查看目录内容</h2><h3 id="终端实用技巧"><a href="#终端实用技巧" class="headerlink" title="终端实用技巧"></a>终端实用技巧</h3><h4 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h4><ul><li>在敲出 <code>文件</code>／<code>目录</code>／<code>命令</code> 的前几个字母之后，按下 <code>tab</code> 键<ul><li>如果输入的没有歧义，系统会自动补全</li><li>如果还存在其他 <code>文件</code>／<code>目录</code>／<code>命令</code>，再按一下 <code>tab</code> 键，系统会提示可能存在的命令</li></ul></li></ul><h4 id="曾经使用过的命令"><a href="#曾经使用过的命令" class="headerlink" title="曾经使用过的命令"></a>曾经使用过的命令</h4><ul><li>按 <code>上</code>／<code>下</code> 光标键可以在曾经使用过的命令之间来回切换</li><li>如果想要退出选择，并且不想执行当前选中的命令，可以按 <code>ctrl + c</code></li></ul><h3 id="ls-命令说明"><a href="#ls-命令说明" class="headerlink" title="ls 命令说明"></a><code>ls</code> 命令说明</h3><ul><li><code>ls</code> 是英文单词 <strong>list</strong> 的简写，其功能为列出目录的内容，是用户最常用的命令之一，类似于 <strong>DOS</strong> 下的 <code>dir</code> 命令</li></ul><h4 id="Linux-下文件和目录的特点"><a href="#Linux-下文件和目录的特点" class="headerlink" title="Linux 下文件和目录的特点"></a>Linux 下文件和目录的特点</h4><ul><li>Linux <strong>文件</strong> 或者 <strong>目录</strong> 名称最长可以有 <code>256</code> 个字符</li><li>以 <code>.</code> 开头的文件为隐藏文件，需要用 -a 参数才能显示</li><li><strong>.</strong> 代表当前目录</li><li><strong>..</strong> 代表上一级目录</li></ul><h3 id="ls-常用选项"><a href="#ls-常用选项" class="headerlink" title="ls 常用选项"></a>ls 常用选项</h3><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示指定目录下所有子目录与文件，包括隐藏文件</td></tr><tr><td>-l</td><td>以列表方式显示文件的详细信息</td></tr><tr><td>-h</td><td>配合 -l 以人性化的方式显示文件大小</td></tr></tbody></table></div><h4 id="计算机中文件大小的表示方式（科普）"><a href="#计算机中文件大小的表示方式（科普）" class="headerlink" title="计算机中文件大小的表示方式（科普）"></a>计算机中文件大小的表示方式（科普）</h4><div class="table-container"><table><thead><tr><th>单位</th><th>英文</th><th>含义</th></tr></thead><tbody><tr><td>字节</td><td>B（Byte）</td><td>在计算机中作为一个数字单元，一般为 8 位二进制数</td></tr><tr><td>千</td><td>K（Kibibyte）</td><td>1 KB = 1024 B，千字节 （1024 = 2 ** 10）</td></tr><tr><td>兆</td><td>M（Mebibyte）</td><td>1 MB = 1024 KB，百万字节</td></tr><tr><td>千兆</td><td>G（Gigabyte）</td><td>1 GB = 1024 MB，十亿字节，千兆字节</td></tr><tr><td>太</td><td>T（Terabyte）</td><td>1 TB = 1024 GB，万亿字节，太字节</td></tr><tr><td>拍</td><td>P（Petabyte）</td><td>1 PB = 1024 TB，千万亿字节，拍字节</td></tr><tr><td>艾</td><td>E（Exabyte）</td><td>1 EB = 1024 PB，百亿亿字节，艾字节</td></tr><tr><td>泽</td><td>Z（Zettabyte）</td><td>1 ZB = 1024 EB，十万亿亿字节，泽字节</td></tr><tr><td>尧</td><td>Y（Yottabyte）</td><td>1 YB = 1024 ZB，一亿亿亿字节，尧字节</td></tr></tbody></table></div><h3 id="ls-通配符的使用"><a href="#ls-通配符的使用" class="headerlink" title="ls 通配符的使用"></a>ls 通配符的使用</h3><div class="table-container"><table><thead><tr><th>通配符</th><th>含义</th></tr></thead><tbody><tr><td>*</td><td>代表任意个数个字符</td></tr><tr><td>?</td><td>代表任意一个字符，至少 1 个</td></tr><tr><td>[]</td><td>表示可以匹配字符组中的任一一个</td></tr><tr><td>[abc]</td><td>匹配 a、b、c 中的任意一个</td></tr><tr><td>[a-f]</td><td>匹配从 a 到 f 范围内的的任意一个字符</td></tr></tbody></table></div><h2 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h2><h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a><code>cd</code></h3><ul><li><code>cd</code> 是英文单词 <strong>change directory</strong> 的简写，其功能为更改当前的工作目录，也是用户最常用的命令之一</li></ul><blockquote><p>注意：Linux 所有的 <strong>目录</strong> 和 <strong>文件名</strong> 都是大小写敏感的</p></blockquote><div class="table-container"><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>cd</td><td>切换到当前用户的主目录(/home/用户目录)</td></tr><tr><td>cd ~</td><td>切换到当前用户的主目录(/home/用户目录)</td></tr><tr><td>cd .</td><td>保持在当前目录不变</td></tr><tr><td>cd ..</td><td>切换到上级目录</td></tr><tr><td>cd -</td><td>可以在最近两次工作目录之间来回切换</td></tr></tbody></table></div><h3 id="相对路径和绝对路径"><a href="#相对路径和绝对路径" class="headerlink" title="相对路径和绝对路径"></a>相对路径和绝对路径</h3><ul><li><strong>相对路径</strong> 在输入路径时，最前面不是 <strong>/</strong> 或者 <strong>~</strong>，表示相对 <strong>当前目录</strong> 所在的目录位置</li><li><strong>绝对路径</strong> 在输入路径时，最前面是 <strong>/</strong> 或者 <strong>~</strong>，表示从 <strong>根目录/家目录</strong> 开始的具体目录位置</li></ul><h2 id="创建和删除操作"><a href="#创建和删除操作" class="headerlink" title="创建和删除操作"></a>创建和删除操作</h2><h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a><code>touch</code></h3><ul><li>创建文件或修改文件时间<ul><li>如果文件 <strong>不存在</strong>，可以创建一个空白文件</li><li>如果文件 <strong>已经存在</strong>，可以修改文件的末次修改日期</li></ul></li></ul><h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a><code>mkdir</code></h3><ul><li>创建一个新的目录</li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-p</td><td>可以递归创建目录</td></tr></tbody></table></div><blockquote><p><strong>新建目录的名称</strong> 不能与当前目录中 <strong>已有的目录或文件</strong> 同名</p></blockquote><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a><code>rm</code></h3><ul><li>删除文件或目录</li></ul><blockquote><p>使用 <code>rm</code> 命令要小心，因为文件删除后不能恢复</p></blockquote><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>强制删除，忽略不存在的文件，无需提示</td></tr><tr><td>-r</td><td>递归地删除目录下的内容，<strong>删除文件夹</strong> 时必须加此参数</td></tr></tbody></table></div><h2 id="拷贝和移动文件"><a href="#拷贝和移动文件" class="headerlink" title="拷贝和移动文件"></a>拷贝和移动文件</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>tree [目录名]</td><td>tree</td><td>以树状图列出文件目录结构</td></tr><tr><td>02</td><td>cp 源文件 目标文件</td><td>copy</td><td>复制文件或者目录</td></tr><tr><td>03</td><td>mv 源文件 目标文件</td><td>move</td><td>移动文件或者目录／文件或者目录重命名</td></tr></tbody></table></div><h3 id="tree"><a href="#tree" class="headerlink" title="tree"></a><code>tree</code></h3><ul><li><code>tree</code> 命令可以以树状图列出文件目录结构</li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>只显示目录</td></tr></tbody></table></div><h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a><code>cp</code></h3><ul><li><code>cp</code> 命令的功能是将给出的 <strong>文件</strong> 或 <strong>目录</strong> 复制到另一个 <strong>文件</strong> 或 <strong>目录</strong> 中，相当于 <strong>DOS</strong> 下的 <code>copy</code> 命令</li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-i</td><td>覆盖文件前提示</td></tr><tr><td>-r</td><td>若给出的源文件是目录文件，则 cp 将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名</td></tr></tbody></table></div><h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a><code>mv</code></h3><ul><li><code>mv</code> 命令可以用来 <strong>移动</strong> <strong>文件</strong> 或 <strong>目录</strong>，也可以给 <strong>文件或目录重命名</strong></li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-i</td><td>覆盖文件前提示</td></tr></tbody></table></div><h2 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>cat 文件名</td><td>concatenate</td><td>查看文件内容、创建文件、文件合并、追加文件内容等功能</td></tr><tr><td>02</td><td>more 文件名</td><td>more</td><td>分屏显示文件内容</td></tr><tr><td>03</td><td>grep 搜索文本 文件名</td><td>grep</td><td>搜索文本文件内容</td></tr></tbody></table></div><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a><code>cat</code></h3><ul><li><code>cat</code> 命令可以用来 <strong>查看文件内容</strong>、<strong>创建文件</strong>、<strong>文件合并</strong>、<strong>追加文件内容</strong> 等功能</li><li><code>cat</code> 会一次显示所有的内容，适合 <strong>查看内容较少</strong> 的文本文件</li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-b</td><td>对非空输出行编号</td></tr><tr><td>-n</td><td>对输出的所有行编号</td></tr></tbody></table></div><blockquote><p>Linux 中还有一个 <code>nl</code> 的命令和 <code>cat -b</code> 的效果等价</p></blockquote><h3 id="more"><a href="#more" class="headerlink" title="more"></a><code>more</code></h3><ul><li><code>more</code> 命令可以用于分屏显示文件内容，每次只显示一页内容</li><li>适合于 <strong>查看内容较多</strong>的文本文件</li></ul><p>使用 <code>more</code> 的操作键：</p><div class="table-container"><table><thead><tr><th>操作键</th><th>功能</th></tr></thead><tbody><tr><td>空格键</td><td>显示手册页的下一屏</td></tr><tr><td>Enter 键</td><td>一次滚动手册页的一行</td></tr><tr><td>b</td><td>回滚一屏</td></tr><tr><td>f</td><td>前滚一屏</td></tr><tr><td>q</td><td>退出</td></tr><tr><td>/word</td><td>搜索 <strong>word</strong> 字符串</td></tr></tbody></table></div><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a><code>grep</code></h3><ul><li>Linux 系统中 <code>grep</code> 命令是一种强大的文本搜索工具</li><li><code>grep</code>允许对文本文件进行 <strong>模式</strong>查找，所谓模式查找，又被称为正则表达式，在就业班会详细讲解</li></ul><div class="table-container"><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-n</td><td>显示匹配行及行号</td></tr><tr><td>-v</td><td>显示不包含匹配文本的所有行（相当于求反）</td></tr><tr><td>-i</td><td>忽略大小写</td></tr></tbody></table></div><ul><li>常用的两种模式查找</li></ul><div class="table-container"><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>^a</td><td>行首，搜寻以 <strong>a</strong> 开头的行</td></tr><tr><td>ke$</td><td>行尾，搜寻以 <strong>ke</strong> 结束的行</td></tr></tbody></table></div><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="echo-文字内容"><a href="#echo-文字内容" class="headerlink" title="echo 文字内容"></a><code>echo 文字内容</code></h3><ul><li><code>echo</code> 会在终端中显示参数指定的文字，通常会和 <strong>重定向</strong> 联合使用</li></ul><h3 id="重定向-gt-和-gt-gt"><a href="#重定向-gt-和-gt-gt" class="headerlink" title="重定向 &gt; 和 &gt;&gt;"></a>重定向 <code>&gt;</code> 和 <code>&gt;&gt;</code></h3><ul><li>Linux 允许将命令执行结果 <strong>重定向</strong>到一个 <strong>文件</strong></li><li>将本应显示在<strong>终端上的内容</strong> <strong>输出／追加</strong> 到<strong>指定文件中</strong></li></ul><p>其中</p><ul><li><code>&gt;</code> 表示输出，会覆盖文件原有的内容</li><li><code>&gt;&gt;</code> 表示追加，会将内容追加到已有文件的末尾</li></ul><h3 id="管道"><a href="#管道" class="headerlink" title="管道 |"></a>管道 <code>|</code></h3><ul><li>Linux 允许将 <strong>一个命令的输出</strong> 可以<strong>通过管道</strong> 做为 <strong>另一个命令的输入</strong></li><li>可以理解现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里 <code>|</code> 的左右分为两端，左端塞东西（写），右端取东西（读）</li></ul><p>常用的管道命令有：</p><ul><li><code>more</code>：分屏显示内容</li><li><code>grep</code>：在命令执行结果的基础上查询指定的文本</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;目标&quot;&gt;&lt;a href=&quot;#目标&quot; class=&quot;headerlink&quot; title=&quot;目标&quot;&gt;&lt;/a&gt;目标&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;查看目录内容&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ls&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;切换目录&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cd&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Liunx终端命令格式</title>
    <link href="https://liyi-up.top/2021/09/10/Liunx%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F/"/>
    <id>https://liyi-up.top/2021/09/10/Liunx%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F/</id>
    <published>2021-09-10T06:30:27.000Z</published>
    <updated>2021-09-10T06:31:31.272Z</updated>
    
    <content type="html"><![CDATA[<h2 id="终端命令格式"><a href="#终端命令格式" class="headerlink" title="终端命令格式"></a>终端命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> [-options] [parameter]</span><br></pre></td></tr></table></figure><p>说明：</p><ul><li><code>command</code>：命令名，相应功能的英文单词或单词的缩写</li><li><code>[-options]</code>：选项，可用来对命令进行控制，也可以省略</li><li><code>parameter</code>：传给命令的参数，可以是 <strong>零个</strong>、<strong>一个</strong> 或者 <strong>多个</strong></li></ul><blockquote><p><code>[]</code> 代表可选 </p></blockquote><a id="more"></a><h2 id="查阅命令帮助信息（知道）"><a href="#查阅命令帮助信息（知道）" class="headerlink" title="查阅命令帮助信息（知道）"></a>查阅命令帮助信息（知道）</h2><blockquote><p>提示</p><ul><li>现阶段只需要 <strong>知道</strong> 通过以下两种方式可以查询命令的帮助信息</li><li>先学习<strong>常用命令</strong>及<strong>常用选项</strong>的使用即可，工作中如果遇到问题可以借助 <strong>网络搜索</strong></li></ul></blockquote><h3 id="help"><a href="#help" class="headerlink" title="--help"></a><code>--help</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>显示 <code>command</code> 命令的帮助信息</li></ul><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>查阅 <code>command</code> 命令的使用手册</li></ul><blockquote><p><code>man</code> 是 <strong>manual</strong> 的缩写，是 Linux 提供的一个 <strong>手册</strong>，包含了绝大部分的命令、函数的详细使用说明</p></blockquote><p>使用 <code>man</code> 时的操作键：</p><div class="table-container"><table><thead><tr><th>操作键</th><th>功能</th></tr></thead><tbody><tr><td>空格键</td><td>显示手册页的下一屏</td></tr><tr><td>Enter 键</td><td>一次滚动手册页的一行</td></tr><tr><td>b</td><td>回滚一屏</td></tr><tr><td>f</td><td>前滚一屏</td></tr><tr><td>q</td><td>退出</td></tr><tr><td>/word</td><td>搜索 <strong>word</strong> 字符串</td></tr></tbody></table></div>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;终端命令格式&quot;&gt;&lt;a href=&quot;#终端命令格式&quot; class=&quot;headerlink&quot; title=&quot;终端命令格式&quot;&gt;&lt;/a&gt;终端命令格式&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; [-options] [parameter]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;command&lt;/code&gt;：命令名，相应功能的英文单词或单词的缩写&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[-options]&lt;/code&gt;：选项，可用来对命令进行控制，也可以省略&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parameter&lt;/code&gt;：传给命令的参数，可以是 &lt;strong&gt;零个&lt;/strong&gt;、&lt;strong&gt;一个&lt;/strong&gt; 或者 &lt;strong&gt;多个&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;[]&lt;/code&gt; 代表可选 &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Linux常用命令</title>
    <link href="https://liyi-up.top/2021/09/10/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://liyi-up.top/2021/09/10/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-09-10T06:18:35.000Z</published>
    <updated>2021-09-10T06:30:53.533Z</updated>
    
    <content type="html"><![CDATA[<h2 id="熟悉Linux-终端命令的原因"><a href="#熟悉Linux-终端命令的原因" class="headerlink" title="熟悉Linux 终端命令的原因"></a>熟悉Linux 终端命令的原因</h2><ul><li>Linux 刚面世时并没有图形界面，所有的操作全靠命令完成，如 <strong>磁盘操作</strong>、<strong>文件存取</strong>、<strong>目录操作</strong>、<strong>进程管理</strong>、<strong>文件权限</strong> 设定等</li><li>在职场中，大量的 <strong>服务器维护工作</strong> 都是在 <strong>远程</strong> 通过 <strong>SSH 客户端</strong> 来完成的，并没有图形界面，所有的维护工作都需要通过命令来完成</li></ul><a id="more"></a><ul><li>在职场中，作为后端程序员，必须要或多或少的掌握一些 Linux 常用的终端命令</li><li>Linux 发行版本的命令大概有 200 多个，但是常用的命令只有 10 多个而已</li></ul><blockquote><p>学习终端命令的技巧：</p><ul><li>不需要死记硬背，对于常用命令，用的多了，自然就记住了</li><li>不要尝试一次学会所有的命令，有些命令是非常不常用的，临时遇到，临时百度就可以</li></ul></blockquote><h2 id="常用-Linux-命令的基本使用"><a href="#常用-Linux-命令的基本使用" class="headerlink" title="常用 Linux 命令的基本使用"></a>常用 Linux 命令的基本使用</h2><div class="table-container"><table><thead><tr><th>序号</th><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>01</td><td>ls</td><td>list</td><td>查看当前文件夹下的内容</td></tr><tr><td>02</td><td>pwd</td><td>print work directory</td><td>查看当前所在文件夹</td></tr><tr><td>03</td><td>cd [目录名]</td><td>change directory</td><td>切换文件夹</td></tr><tr><td>04</td><td>touch [文件名]</td><td>touch</td><td>如果文件不存在，新建文件</td></tr><tr><td>05</td><td>mkdir [目录名]</td><td>make directory</td><td>创建目录</td></tr><tr><td>06</td><td>rm [文件名]</td><td>remove</td><td>删除指定的文件名</td></tr><tr><td>07</td><td>clear</td><td>clear</td><td>清屏</td></tr></tbody></table></div><blockquote><p>小技巧</p><ul><li><code>ctrl + shift + =</code> <strong>放大</strong>终端窗口的字体显示</li><li><code>ctrl + -</code> <strong>缩小</strong>终端窗口的字体显示</li></ul></blockquote><h3 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h3><ul><li>在敲出 <code>文件</code>／<code>目录</code>／<code>命令</code> 的前几个字母之后，按下 <code>tab</code> 键<ul><li>如果输入的没有歧义，系统会自动补全</li><li>如果还存在其他 <code>文件</code>／<code>目录</code>／<code>命令</code>，再按一下 <code>tab</code> 键，系统会提示可能存在的命令</li></ul></li></ul><blockquote><p>小技巧</p><ul><li>按 <code>上</code>／<code>下</code> 光标键可以在曾经使用过的命令之间来回切换</li><li>如果想要退出选择，并且不想执行当前选中的命令，可以按 <code>ctrl + c</code></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;熟悉Linux-终端命令的原因&quot;&gt;&lt;a href=&quot;#熟悉Linux-终端命令的原因&quot; class=&quot;headerlink&quot; title=&quot;熟悉Linux 终端命令的原因&quot;&gt;&lt;/a&gt;熟悉Linux 终端命令的原因&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Linux 刚面世时并没有图形界面，所有的操作全靠命令完成，如 &lt;strong&gt;磁盘操作&lt;/strong&gt;、&lt;strong&gt;文件存取&lt;/strong&gt;、&lt;strong&gt;目录操作&lt;/strong&gt;、&lt;strong&gt;进程管理&lt;/strong&gt;、&lt;strong&gt;文件权限&lt;/strong&gt; 设定等&lt;/li&gt;
&lt;li&gt;在职场中，大量的 &lt;strong&gt;服务器维护工作&lt;/strong&gt; 都是在 &lt;strong&gt;远程&lt;/strong&gt; 通过 &lt;strong&gt;SSH 客户端&lt;/strong&gt; 来完成的，并没有图形界面，所有的维护工作都需要通过命令来完成&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu图形界面入门</title>
    <link href="https://liyi-up.top/2021/09/10/Ubuntu%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%85%A5%E9%97%A8/"/>
    <id>https://liyi-up.top/2021/09/10/Ubuntu%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E5%85%A5%E9%97%A8/</id>
    <published>2021-09-10T06:08:08.000Z</published>
    <updated>2021-09-10T06:09:26.914Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Ubuntu-的任务栏"><a href="#Ubuntu-的任务栏" class="headerlink" title="Ubuntu 的任务栏"></a>Ubuntu 的任务栏</h2><a id="more"></a><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="D:/01 Linux基础资料/课程讲义/linuxbasic/linux/media/14928321028755/14928329271228.jpg" alt></p><h2 id="窗口操作按钮"><a href="#窗口操作按钮" class="headerlink" title="窗口操作按钮"></a>窗口操作按钮</h2><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="D:/01 Linux基础资料/课程讲义/linuxbasic/linux/media/14928321028755/14928325424356.jpg" alt></p><h2 id="窗口菜单条"><a href="#窗口菜单条" class="headerlink" title="窗口菜单条"></a>窗口菜单条</h2><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="D:/01 Linux基础资料/课程讲义/linuxbasic/linux/media/14928321028755/14928327078409.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Ubuntu-的任务栏&quot;&gt;&lt;a href=&quot;#Ubuntu-的任务栏&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu 的任务栏&quot;&gt;&lt;/a&gt;Ubuntu 的任务栏&lt;/h2&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="基础概念" scheme="https://liyi-up.top/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>文件和目录</title>
    <link href="https://liyi-up.top/2021/09/10/%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95/"/>
    <id>https://liyi-up.top/2021/09/10/%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95/</id>
    <published>2021-09-10T05:39:56.000Z</published>
    <updated>2021-09-10T06:42:03.080Z</updated>
    
    <content type="html"><![CDATA[<h2 id="单用户操作系统和多用户操作系统（科普）"><a href="#单用户操作系统和多用户操作系统（科普）" class="headerlink" title="单用户操作系统和多用户操作系统（科普）"></a>单用户操作系统和多用户操作系统（科普）</h2><ul><li><p><strong>单用户操作系统</strong>：指一台计算机在同一时间 <strong>只能由一个用户</strong> 使用，一个用户独自享用系统的全部硬件和软件资源</p><ul><li><strong>Windows XP</strong> 之前的版本都是单用户操作系统</li></ul></li><li><p><strong>多用户操作系统</strong>：指一台计算机在同一时间可以由 <strong>多个用户</strong> 使用，多个用户共同享用系统的全部硬件和软件资源</p><ul><li><strong>Unix</strong> 和 <strong>Linux</strong> 的设计初衷就是多用户操作系统</li></ul><a id="more"></a></li></ul><h2 id="Windows-和-Linux-文件系统区别"><a href="#Windows-和-Linux-文件系统区别" class="headerlink" title="Windows 和 Linux 文件系统区别"></a><code>Windows</code> 和 <code>Linux</code> 文件系统区别</h2><h3 id="Windows-下的文件系统"><a href="#Windows-下的文件系统" class="headerlink" title="Windows 下的文件系统"></a><code>Windows</code> 下的文件系统</h3><ul><li>在 <code>Windows</code> 下，打开 “计算机”，我们看到的是一个个的驱动器盘符：</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXTmSs.png" alt="001_Windows下的多个盘"></p><ul><li>每个驱动器都有自己的根目录结构，这样形成了多个树并列的情形，如图所示：</li></ul><p>![001-Windows下多个盘为节点的目录分支]<a href="https://z3.ax1x.com/2021/09/10/hXTKO0.png" target="_blank" rel="noopener">https://z3.ax1x.com/2021/09/10/hXTKO0.png</a>)</p><h3 id="Linux-下的文件系统"><a href="#Linux-下的文件系统" class="headerlink" title="Linux 下的文件系统"></a><code>Linux</code> 下的文件系统</h3><ul><li>在 <code>Linux</code> 下，我们是看不到这些驱动器盘符，我们看到的是文件夹（目录）：</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXTJfJ.png" alt="002_Ubuntu文件目录"></p><ul><li><code>Ubuntu</code> 没有盘符这个概念，只有一个根目录 <code>/</code>，所有文件都在它下面</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXTU61.png" alt="003-Linux的树形示意图"></p><h3 id="用户目录"><a href="#用户目录" class="headerlink" title="用户目录"></a>用户目录</h3><p>位于 <code>/home/user</code>，称之为用户工作目录或家目录，表示方式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/user</span><br><span class="line">~</span><br></pre></td></tr></table></figure><h3 id="Linux-主要目录速查表"><a href="#Linux-主要目录速查表" class="headerlink" title="Linux 主要目录速查表"></a><code>Linux</code> 主要目录速查表</h3><ul><li>/：根目录，<strong>一般根目录下只存放目录</strong>，在 linux 下有且只有一个根目录，所有的东西都是从这里开始<ul><li>当在终端里输入 <code>/home</code>，其实是在告诉电脑，先从 <code>/</code>（根目录）开始，再进入到 <code>home</code> 目录</li></ul></li><li>/bin、/usr/bin：可执行二进制文件的目录，如常用的命令 ls、tar、mv、cat 等</li><li>/boot：放置 linux 系统启动时用到的一些文件，如 linux 的内核文件：<code>/boot/vmlinuz</code>，系统引导管理器：<code>/boot/grub</code></li><li>/dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱<code>mount /dev/cdrom /mnt</code></li><li>/etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件，重要的配置文件有 <ul><li>/etc/inittab</li><li>/etc/fstab</li><li>/etc/init.d</li><li>/etc/X11</li><li>/etc/sysconfig</li><li>/etc/xinetd.d</li></ul></li><li>/home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下<ul><li><code>~</code> 表示当前用户的家目录</li><li><code>~edu</code> 表示用户 <code>edu</code> 的家目录</li></ul></li><li>/lib、/usr/lib、/usr/local/lib：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助</li><li>/lost+fount：系统异常产生错误时，会将一些遗失的片段放置于此目录下</li><li>/mnt: /media：光盘默认挂载点，通常光盘挂载于 /mnt/cdrom 下，也不一定，可以选择任意位置进行挂载</li><li>/opt：给主机额外安装软件所摆放的目录</li><li>/proc：此目录的数据都在内存中，如系统核心，外部设备，网络状态，由于数据都存放于内存中，所以不占用磁盘空间，比较重要的文件有：/proc/cpuinfo、/proc/interrupts、/proc/dma、/proc/ioports、/proc/net/* 等</li><li>/root：系统管理员root的家目录</li><li>/sbin、/usr/sbin、/usr/local/sbin：放置系统管理员使用的可执行命令，如 fdisk、shutdown、mount 等。与 /bin 不同的是，这几个目录是给系统管理员 root 使用的命令，一般用户只能”查看”而不能设置和使用</li><li>/tmp：一般用户或正在执行的程序临时存放文件的目录，任何人都可以访问，重要数据不可放置在此目录下</li><li>/srv：服务启动之后需要访问的数据目录，如 www 服务需要访问的网页数据存放在 /srv/www 内</li><li>/usr：应用程序存放目录<ul><li>/usr/bin：存放应用程序</li><li>/usr/share：存放共享数据</li><li>/usr/lib：存放不能直接运行的，却是许多程序运行所必需的一些函数库文件</li><li>/usr/local：存放软件升级包</li><li>/usr/share/doc：系统说明文件存放目录</li><li>/usr/share/man：程序说明文件存放目录</li></ul></li><li>/var：放置系统执行过程中经常变化的文件<ul><li>/var/log：随时更改的日志文件 </li><li>/var/spool/mail：邮件存放的目录</li><li>/var/run：程序或服务启动后，其 PID 存放在该目录下</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;单用户操作系统和多用户操作系统（科普）&quot;&gt;&lt;a href=&quot;#单用户操作系统和多用户操作系统（科普）&quot; class=&quot;headerlink&quot; title=&quot;单用户操作系统和多用户操作系统（科普）&quot;&gt;&lt;/a&gt;单用户操作系统和多用户操作系统（科普）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;单用户操作系统&lt;/strong&gt;：指一台计算机在同一时间 &lt;strong&gt;只能由一个用户&lt;/strong&gt; 使用，一个用户独自享用系统的全部硬件和软件资源&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Windows XP&lt;/strong&gt; 之前的版本都是单用户操作系统&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;多用户操作系统&lt;/strong&gt;：指一台计算机在同一时间可以由 &lt;strong&gt;多个用户&lt;/strong&gt; 使用，多个用户共同享用系统的全部硬件和软件资源&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Unix&lt;/strong&gt; 和 &lt;strong&gt;Linux&lt;/strong&gt; 的设计初衷就是多用户操作系统&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
      <category term="Linux" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/Linux/"/>
    
    
      <category term="操作系统" scheme="https://liyi-up.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>操作系统的发展史</title>
    <link href="https://liyi-up.top/2021/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/"/>
    <id>https://liyi-up.top/2021/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/</id>
    <published>2021-09-10T02:31:25.000Z</published>
    <updated>2021-09-10T02:34:51.197Z</updated>
    
    <content type="html"><![CDATA[<h2 id="操作系统的发展历史"><a href="#操作系统的发展历史" class="headerlink" title="操作系统的发展历史"></a>操作系统的发展历史</h2><h3 id="Unix"><a href="#Unix" class="headerlink" title="Unix"></a>Unix</h3><p>1965 年之前的时候，电脑并不像现在一样普遍，它可不是一般人能碰的起的，除非是军事或者学院的研究机构，而且当时大型主机至多能提供30台终端（30个键盘、显示器)，连接一台电脑</p><a id="more"></a><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXKPfO.png" alt="001_大型机"></p><p><strong>为了解决数量不够用的问题</strong></p><ul><li>1965 年左后由 <strong>贝尔实验室</strong> 加入了 <strong>麻省理工学院</strong> 以及 <strong>通用电气</strong> 合作的计划 —— 该计划要建立一套 <strong>多使用者(multi－user)</strong>、<strong>多任务(multi－processor)</strong>、<strong>多层次(multi－level)</strong> 的 <strong>MULTICS</strong> 操作系统，想让大型主机支持 300 台终端</li><li>1969 年前后这个项目进度缓慢，资金短缺，贝尔实验室退出了研究</li><li>1969 年从这个项目中退出的 <strong>Ken Thompson</strong> 当时在实验室无聊时，为了让一台空闲的电脑上能够运行 “星际旅行（Space Travel）” 游戏，在 8 月份左右趁着其妻子探亲的时间，<strong>用了 1 个月的时间</strong>，使用汇编写出了 Unix 操作系统的原型</li><li>1970 年，美国贝尔实验室的 <strong>Ken Thompson</strong>，以 <strong>BCPL</strong> 语言为基础，设计出很简单且很接近硬件的 <strong>B 语言</strong>（取BCPL的首字母），并且他用 <strong>B 语言</strong> 写了第一个 UNIX 操作系统</li><li>1971 年，同样酷爱 “星际旅行（Space Travel）” 的 <strong>Dennis M.Ritchie</strong> 为了能早点儿玩上游戏，加入了 <strong>Thompson</strong> 的开发项目，合作开发 UNIX，他的主要工作是改造 <strong>B 语言</strong>，因为<strong>B 语言</strong> 的跨平台性较差</li><li>1972 年，<strong>Dennis M.Ritchie</strong> 在 <strong>B 语言</strong> 的基础上最终设计出了一种新的语言，他取了 <strong>BCPL</strong> 的第二个字母作为这种语言的名字，这就是 <strong>C 语言</strong></li><li>1973 年初，<strong>C 语言</strong>的主体完成，<strong>Thompson</strong> 和 <strong>Ritchie</strong> 迫不及待地开始用它完全重写了现在大名鼎鼎的 <strong>Unix 操作系统</strong></li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXKEXd.png" alt="002_unix之父"></p><p>肯·汤普逊（左）和丹尼斯·里奇（右）</p><h4 id="C-语言"><a href="#C-语言" class="headerlink" title="C 语言"></a>C 语言</h4><ul><li>在把 <strong>UNIX</strong> 移植到其他类型的计算机上使用时，<strong>C 语言</strong>强大的移植性（Portability）在此显现<ul><li>机器语言和汇编语言都不具有移植性，为 x86 开发的程序，不可能在 Alpha，SPARC 和 ARM 等机器上运行</li></ul></li><li>而 <strong>C 语言</strong>程序则可以使用在任意架构的处理器上，只要那种架构的处理器<strong>具有对应的 C 语言编译器和库</strong>，然后将 C 源代码编译、连接成目标二进制文件之后即可运行 </li></ul><h4 id="Unix-家谱"><a href="#Unix-家谱" class="headerlink" title="Unix 家谱"></a>Unix 家谱</h4><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXKZnA.jpg" alt="003_unix家谱"></p><h3 id="Minix"><a href="#Minix" class="headerlink" title="Minix"></a>Minix</h3><ul><li>因为 <strong>AT&amp;T（通用电气）</strong> 的政策改变，在 Version 7 Unix 推出之后，发布新的使用条款，将 UNIX 源代码私有化，在大学中不再能使用 UNIX 源代码</li><li><strong>Andrew S. Tanenbaum（塔能鲍姆）</strong> 教授为了能 <strong>在课堂上教授学生操作系统运作的细节</strong>，决定在不使用任何 AT&amp;T 的源代码前提下，自行开发与 UNIX 兼容的操作系统，以避免版权上的争议</li><li>以 <strong>小型 UNIX（mini-UNIX）</strong>之意，将它称为 <strong>MINIX</strong></li></ul><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><ul><li>1991 年 <strong>林纳斯（Linus）</strong> 就读于赫尔辛基大学期间，对 Unix 产生浓厚兴趣，尝试着在Minix 上做一些开发工作</li><li>因为 <strong>Minix</strong> 只是教学使用，因此功能并不强，<strong>林纳斯</strong> 经常要用他的终端 <strong>仿真器（Terminal Emulator）</strong> 去访问大学主机上的新闻组和邮件，为了方便读写和下载文件，他自己编写了磁盘驱动程序和文件系统，这些在后来成为了 Linux 第一个内核的雏形，当时，他年仅 21 岁！</li><li><strong>林纳斯</strong> 利用 GNU 的 bash 当做开发环境，gcc 当做编译工具，编写了 Linux 内核，一开始 Linux 并不能兼容 Unix<ul><li>即 Unix 上跑的应用程序不能在 Linux 上跑，即应用程序与内核之间的接口不一致</li><li>一开始 Linux 只适用于 386，后来经过全世界的网友的帮助，最终能够兼容多种硬件</li></ul></li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXKKtf.jpg" alt="004_林纳斯"></p><h2 id="Linux-内核及发行版"><a href="#Linux-内核及发行版" class="headerlink" title="Linux 内核及发行版"></a>Linux 内核及发行版</h2><h3 id="Linux-内核版本"><a href="#Linux-内核版本" class="headerlink" title="Linux 内核版本"></a>Linux 内核版本</h3><ul><li><strong>内核（kernel）</strong>是系统的心脏，是运行程序和管理像磁盘和打印机等硬件设备的核心程序，它提供了一个在裸设备与应用程序间的抽象层</li><li>Linux 内核版本又分为 <strong>稳定版</strong> 和 <strong>开发版</strong>，两种版本是相互关联，相互循环<ul><li><strong>稳定版</strong>：具有工业级强度，可以广泛地应用和部署。新的稳定版相对于较旧的只是修正一些 bug 或加入一些新的驱动程序</li><li><strong>开发版</strong>：由于要试验各种解决方案，所以变化很快</li></ul></li><li>内核源码网址：<a href="http://www.kernel.org" target="_blank" rel="noopener">http://www.kernel.org</a></li></ul><blockquote><p>所有来自全世界的对 Linux 源码的修改最终都会汇总到这个网站，由 Linus 领导的开源社区对其进行甄别和修改最终决定是否进入到 Linux 主线内核源码中</p></blockquote><h3 id="Linux-发行版本"><a href="#Linux-发行版本" class="headerlink" title="Linux 发行版本"></a>Linux 发行版本</h3><ul><li><strong>Linux 发行版（也被叫做 GNU/Linux 发行版）</strong>通常包含了包括桌面环境、办公套件、媒体播放器、数据库等应用软件</li><li><p>常见的发行版本如下：</p><ul><li>Ubuntu</li><li>Redhat</li><li>Fedora</li><li>openSUSE</li><li>Linux Mint</li><li>Debian</li><li>Manjaro</li><li>Mageia</li><li>CentOS</li><li>Arch</li></ul></li><li><p>十大 Linux 服务器发行版排行榜：<a href="http://os.51cto.com/art/201612/526126.htm" target="_blank" rel="noopener">http://os.51cto.com/art/201612/526126.htm</a></p></li></ul><blockquote><p>在几乎每一份与 Linux 有关的榜单上，基于 Debian 的 Ubuntu 都占有一席之位。Canonical 的Ubuntu 胜过其他所有的 Linux 服务器发行版 ―― 从简单安装、出色的硬件发现，到世界级的商业支持，Ubuntu确立了难以企及的严格标准</p></blockquote><h2 id="Linux-的应用领域"><a href="#Linux-的应用领域" class="headerlink" title="Linux 的应用领域"></a>Linux 的应用领域</h2><h3 id="服务器领域"><a href="#服务器领域" class="headerlink" title="服务器领域"></a>服务器领域</h3><ul><li>Linux 在服务器领域的应用是其重要分支</li><li>Linux 免费、稳定、高效等特点在这里得到了很好的体现<ul><li>早期因为维护、运行等原因同样受到了很大的限制</li><li>近些年来 Linux 服务器市场得到了飞速的提升，尤其在一些高端领域尤为广泛</li></ul></li></ul><h3 id="嵌入式领域"><a href="#嵌入式领域" class="headerlink" title="嵌入式领域"></a>嵌入式领域</h3><ul><li>近些年来 Linux 在嵌入式领域的应用得到了飞速的提高</li><li>Linux 运行稳定、对网络的良好支持性、低成本，且可以根据需要进行软件裁剪，内核最小可以达到几百 KB 等特点，使其近些年来在嵌入式领域的应用得到非常大的提高</li></ul><blockquote><p>主要应用：<strong>机顶盒</strong>、<strong>数字电视</strong>、<strong>网络电话</strong>、<strong>程控交换机</strong>、<strong>手机</strong>、<strong>PDA</strong>、等都是其应用领域，得到了 Google、三星、摩托罗拉、NEC 等公司的大力推广</p></blockquote><h3 id="个人桌面领域"><a href="#个人桌面领域" class="headerlink" title="个人桌面领域"></a>个人桌面领域</h3><ul><li>此领域是传统 Linux 应用最薄弱的环节</li><li>传统 Linux 由于界面简单、操作复杂、应用软件少的缺点，一直被 Windows 所压制</li><li>近些年来随着 <strong>Ubuntu</strong>、<strong>Fedora</strong> 等优秀桌面环境的兴起，同时各大硬件厂商对其支持的加大，Linux 在个人桌面领域的占有率在逐渐的提高</li></ul><blockquote><p>在 Ubuntu 中玩 QQ</p></blockquote><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXKl9S.jpg" alt="005_ubuntu_qq"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;操作系统的发展历史&quot;&gt;&lt;a href=&quot;#操作系统的发展历史&quot; class=&quot;headerlink&quot; title=&quot;操作系统的发展历史&quot;&gt;&lt;/a&gt;操作系统的发展历史&lt;/h2&gt;&lt;h3 id=&quot;Unix&quot;&gt;&lt;a href=&quot;#Unix&quot; class=&quot;headerlink&quot; title=&quot;Unix&quot;&gt;&lt;/a&gt;Unix&lt;/h3&gt;&lt;p&gt;1965 年之前的时候，电脑并不像现在一样普遍，它可不是一般人能碰的起的，除非是军事或者学院的研究机构，而且当时大型主机至多能提供30台终端（30个键盘、显示器)，连接一台电脑&lt;/p&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="基础概念" scheme="https://liyi-up.top/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>操作系统</title>
    <link href="https://liyi-up.top/2021/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    <id>https://liyi-up.top/2021/09/10/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</id>
    <published>2021-09-10T02:26:11.000Z</published>
    <updated>2021-09-10T02:30:02.848Z</updated>
    
    <content type="html"><![CDATA[<h2 id="操作系统（Operation-System，OS）"><a href="#操作系统（Operation-System，OS）" class="headerlink" title="操作系统（Operation System，OS）"></a>操作系统（Operation System，OS）</h2><blockquote><p>操作系统作为接口的示意图</p></blockquote><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXuQy9.png" alt="001_OS作为接口的示意图"></p><a id="more"></a><blockquote><p>没有安装操作系统的计算机，通常被称为 <strong>裸机</strong></p><ul><li>如果想在 <strong>裸机</strong> 上运行自己所编写的程序，就必须用机器语言书写程序</li><li>如果计算机上安装了操作系统，就可以在操作系统上安装支持的高级语言环境，用高级语言开发程序</li></ul></blockquote><h3 id="操作系统的作用"><a href="#操作系统的作用" class="headerlink" title="操作系统的作用"></a>操作系统的作用</h3><ul><li>是现代计算机系统中 <strong>最基本和最重要</strong> 的系统软件</li><li>是 <strong>配置在计算机硬件上的第一层软件</strong>，是对硬件系统的首次扩展</li><li>主要作用是<strong>管理好硬件设备</strong>，并为用户和应用程序提供一个简单的接口，以便于使用</li><li>而其他的诸如编译程序、数据库管理系统，以及大量的应用软件，都直接依赖于操作系统的支持</li></ul><h3 id="不同应用领域的主流操作系统"><a href="#不同应用领域的主流操作系统" class="headerlink" title="不同应用领域的主流操作系统"></a>不同应用领域的主流操作系统</h3><ul><li>桌面操作系统</li><li>服务器操作系统</li><li>嵌入式操作系统</li><li>移动设备操作系统</li></ul><h4 id="桌面操作系统"><a href="#桌面操作系统" class="headerlink" title="桌面操作系统"></a>桌面操作系统</h4><ul><li>Windows 系列<ul><li>用户群体大</li></ul></li><li>macOS<ul><li>适合于开发人员</li></ul></li><li>Linux<ul><li>应用软件少</li></ul></li></ul><h4 id="服务器操作系统"><a href="#服务器操作系统" class="headerlink" title="服务器操作系统"></a>服务器操作系统</h4><ul><li>Linux<ul><li>安全、稳定、免费</li><li>占有率高</li></ul></li><li>Windows Server<ul><li>付费</li><li>占有率低</li></ul></li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/09/10/hXutJO.jpg" alt="002_机房照片"></p><h4 id="嵌入式操作系统"><a href="#嵌入式操作系统" class="headerlink" title="嵌入式操作系统"></a>嵌入式操作系统</h4><ul><li>Linux</li></ul><h4 id="移动设备操作系统"><a href="#移动设备操作系统" class="headerlink" title="移动设备操作系统"></a>移动设备操作系统</h4><ul><li>iOS</li><li>Android（基于 <code>Linux</code>）</li></ul><h2 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h2><p>虚拟机（Virtual Machine）指通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的完整计算机系统</p><ul><li>虚拟系统通过生成现有操作系统的全新虚拟镜像，具有真实操作系统完全一样的功能</li><li>进入虚拟系统后，所有操作都是在这个全新的独立的虚拟系统里面进行，可以独立安装运行软件，保存数据，拥有自己的独立桌面，不会对真正的系统产生任何影响</li><li>而且能够在现有系统与虚拟镜像之间灵活切换的一类操作系统</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;操作系统（Operation-System，OS）&quot;&gt;&lt;a href=&quot;#操作系统（Operation-System，OS）&quot; class=&quot;headerlink&quot; title=&quot;操作系统（Operation System，OS）&quot;&gt;&lt;/a&gt;操作系统（Operation System，OS）&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;操作系统作为接口的示意图&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==&quot; data-original=&quot;https://z3.ax1x.com/2021/09/10/hXuQy9.png&quot; alt=&quot;001_OS作为接口的示意图&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="编程基础" scheme="https://liyi-up.top/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="基础概念" scheme="https://liyi-up.top/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>React-组件分类</title>
    <link href="https://liyi-up.top/2021/09/06/React-%E7%BB%84%E4%BB%B6%E5%88%86%E7%B1%BB/"/>
    <id>https://liyi-up.top/2021/09/06/React-%E7%BB%84%E4%BB%B6%E5%88%86%E7%B1%BB/</id>
    <published>2021-09-06T01:55:49.000Z</published>
    <updated>2021-09-06T02:17:45.595Z</updated>
    
    <content type="html"><![CDATA[<h2 id="创建方式"><a href="#创建方式" class="headerlink" title="创建方式"></a>创建方式</h2><p>React 组件的通过创建方式的不同，可分为以下两种类型的组件：</p><ul><li>类组件</li><li>函数式组件</li></ul><h3 id="类组件（class）"><a href="#类组件（class）" class="headerlink" title="类组件（class）"></a>类组件（class）</h3><p>在React中类组件通过关键字<code>class</code> 来声明并通过<code>extend React.Component</code>来实现一个类式组件，其实在JavaScript中类与函数其实没有明显的界限，你可以理解<code>class</code><font color="red">其实本质也是函数</font>，只不过类的这种书写形式，让我们的代码更具有可读性。</p><a id="more"></a><p>创建方式</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="title">extend</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="string">``</span><span class="string">``</span>逻辑代码</span><br><span class="line">  render()&#123;</span><br><span class="line">      <span class="keyword">return</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数组件（function）"><a href="#函数组件（function）" class="headerlink" title="函数组件（function）"></a>函数组件（function）</h3><p>React官网比较推荐的一种创建组件的方式<font color="red">（逻辑操作较少的情况下）</font>，因为它相比于类组件，它的性能更好，创建代价更轻，并且在React 16.8.0后的版本推出了 <code>Hook</code>后，函数式组件变得更加强大，几乎能适用类组件的各种复杂的使用场景。</p><p>创建方式</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">  retrun(</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：在React中无论是函数式组件还是类组件，React都要求组件名首字母大小，便于区分</p></blockquote><h2 id="作用场景"><a href="#作用场景" class="headerlink" title="作用场景"></a>作用场景</h2><h3 id="有状态-stateful-组件-和-无状态-stateless-组件"><a href="#有状态-stateful-组件-和-无状态-stateless-组件" class="headerlink" title="有状态(stateful)组件 和 无状态(stateless)组件"></a>有状态(stateful)组件 和 无状态(stateless)组件</h3><p>就像有状态和无状态Web服务一样，React 组件也可以在应用程序使用期间保持和操作状态（stateful） ， 或者只是一个简单的组件，它接受输入 props 并返回要显示的内容（stateless）。</p><p>一个简单的 <strong>无状态(stateless)</strong> 按钮组件，仅依赖于 props(属性) ，这也称为函数式组件：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Button = <span class="function"><span class="params">props</span> =&gt;</span>  <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props.onClick&#125;</span>&gt;</span>    &#123;props.text&#125;  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>下面者是一个 <strong>有状态(stateful)</strong> 的计数器组件 <code>ButtonCounter</code>（使用了 <code>Button</code> 组件）：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonCounter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  <span class="keyword">constructor</span>() &#123;    <span class="keyword">super</span>()    <span class="keyword">this</span>.state = &#123; <span class="attr">clicks</span>: <span class="number">0</span> &#125;    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>)  &#125;   handleClick() &#123;    <span class="keyword">this</span>.setState(&#123; <span class="attr">clicks</span>: <span class="keyword">this</span>.state.clicks + <span class="number">1</span> &#125;)  &#125;   render() &#123;    <span class="keyword">return</span> (      <span class="xml"><span class="tag">&lt;<span class="name">Button</span>        <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>        <span class="attr">text</span>=<span class="string">&#123;</span>`<span class="attr">You</span>'<span class="attr">ve</span> <span class="attr">clicked</span> <span class="attr">me</span> $&#123;<span class="attr">this.state.clicks</span>&#125; <span class="attr">times</span>!`&#125;      /&gt;</span>    )  &#125;&#125;</span></span><br></pre></td></tr></table></figure><p>注意：只有 类(class)组件才会有 state(状态)，函数式组件不会有有 state(状态)。<a href="http://react.css88.com/docs/components-and-props.html" target="_blank" rel="noopener">关于函数式组件和类组件的说明请参考官方文档</a></p><p>如您所见，第二个组件的 constructor(构造函数) 包含一个组件 state(状态)，而第一个组件是一个简单的组件，通过 props(属性) 渲染文本。有状态组件和无状态组件的划分看起来非常简单，但可以使 <code>Button</code> 组件具有高度可重用性。</p><h3 id="容器-Container-组件-和-展示-Presentational-组件"><a href="#容器-Container-组件-和-展示-Presentational-组件" class="headerlink" title="容器(Container) 组件 和 展示(Presentational) 组件"></a>容器(Container) 组件 和 展示(Presentational) 组件</h3><p>在处理外部数据时，我们可以将组件划分为这两个新类别。<strong>容器(Container)</strong> 组件负责访问数据，它常常是超出了React范畴的，例如使用 Redux 或 Relay 进行了绑定。对比而言，虽然 <strong>展示(Presentational)</strong> 组件与应用程序的其余部分没有依赖关系，它只取决于其自身的 state(状态) 或 接收到的 props(属性) 。让我们来看看将用户列表作为 <strong>展示组件</strong> 的示例：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UserList = <span class="function"><span class="params">props</span> =&gt;</span>  <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>    &#123;props.users.map(u =&gt; (      <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;u.name&#125; — &#123;u.age&#125; years old<span class="tag">&lt;/<span class="name">li</span>&gt;</span>    ))&#125;  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>可以使用我们的容器(Container)组件更新这个列表组件 <code>UserList</code> ：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserListContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  <span class="keyword">constructor</span>() &#123;    <span class="keyword">super</span>()    <span class="keyword">this</span>.state = &#123; <span class="attr">users</span>: [] &#125;  &#125;   componentDidMount() &#123;    fetchUsers(<span class="function"><span class="params">users</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123; users &#125;))  &#125;   render() &#123;    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">UserList</span> <span class="attr">users</span>=<span class="string">&#123;this.state.users&#125;</span> /&gt;</span>  &#125;&#125;</span></span><br></pre></td></tr></table></figure><p>这种方法将数据获取与渲染分开，并使 <code>UserList</code> 可重用。如果你想进一步了解这种模式，来自 <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener">Dan Abramov 的精彩文章</a> 作了解释更详细的解释。</p><h3 id="高阶组件-Higher-order-components-HOC-）"><a href="#高阶组件-Higher-order-components-HOC-）" class="headerlink" title="高阶组件(Higher order components , HOC ）"></a>高阶组件(Higher order components , HOC ）</h3><p>当您想要重用组件逻辑时，高阶组件(简称HOC)非常有用。 它们是 JavaScript 函数，它将组件作为参数并返回一个新组件。</p><p>假设你需要构建一个可扩展的菜单组件，当用户点击它时会显示一些子内容。 因此，您可以简单地创建一个通用的HOC来处理它，而不是控制其父组件上的 state(状态) ：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeToggleable</span>(<span class="params">Clickable</span>) </span>&#123;  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;    <span class="keyword">constructor</span>() &#123;      <span class="keyword">super</span>()      <span class="keyword">this</span>.toggle = <span class="keyword">this</span>.toggle.bind(<span class="keyword">this</span>)      <span class="keyword">this</span>.state = &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;    &#125;     toggle() &#123;      <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">show</span>: !prevState.show &#125;))    &#125;     render() &#123;      <span class="keyword">return</span> (        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>          <span class="tag">&lt;<span class="name">Clickable</span>            &#123;<span class="attr">...this.props</span>&#125;            <span class="attr">onClick</span>=<span class="string">&#123;this.toggle&#125;</span>          /&gt;</span>          &#123;this.state.show &amp;&amp; this.props.children&#125;        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>      )    &#125;  &#125;&#125;</span></span><br></pre></td></tr></table></figure><p>这种方法允许我们使用 JavaScript 装饰器语法，将我们的逻辑应用于我们的 <code>ToggleableMenu</code> 组件：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@makeToggleableclass ToggleableMenu extends React.Component &#123;  render() &#123;    <span class="keyword">return</span> (      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.props.onClick&#125;</span>&gt;</span>        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>    )  &#125;&#125;</span><br></pre></td></tr></table></figure><p>现在我们可以将任何子节点传递给 <code>ToggleableMenu</code> 组件：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  render() &#123;    <span class="keyword">return</span> (      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>        <span class="tag">&lt;<span class="name">ToggleableMenu</span> <span class="attr">title</span>=<span class="string">"First Menu"</span>&gt;</span>          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Some content<span class="tag">&lt;/<span class="name">p</span>&gt;</span>        <span class="tag">&lt;/<span class="name">ToggleableMenu</span>&gt;</span>        <span class="tag">&lt;<span class="name">ToggleableMenu</span> <span class="attr">title</span>=<span class="string">"Second Menu"</span>&gt;</span>          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Another content<span class="tag">&lt;/<span class="name">p</span>&gt;</span>        <span class="tag">&lt;/<span class="name">ToggleableMenu</span>&gt;</span>        <span class="tag">&lt;<span class="name">ToggleableMenu</span> <span class="attr">title</span>=<span class="string">"Third Menu"</span>&gt;</span>          <span class="tag">&lt;<span class="name">p</span>&gt;</span>More content<span class="tag">&lt;/<span class="name">p</span>&gt;</span>        <span class="tag">&lt;/<span class="name">ToggleableMenu</span>&gt;</span>      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>    )  &#125;&#125;</span><br></pre></td></tr></table></figure><p>如果你熟悉 Redux 的 <code>connect</code> 函数或者 React Router 的 <code>withRouter</code> 函数，那么你已经使用过高阶组件了。</p><h3 id="渲染回调（Render-Callbacks）"><a href="#渲染回调（Render-Callbacks）" class="headerlink" title="渲染回调（Render Callbacks）"></a>渲染回调（Render Callbacks）</h3><p>注：这种模式以前也叫 <a href="https://www.html.cn/archives/9471" target="_blank" rel="noopener">函数作为子组件(Function as Child Components)</a> , 现在最新的叫法为：渲染属性(Render Props)，请参阅<a href="http://react.css88.com/docs/render-props.html" target="_blank" rel="noopener">官方文档</a>。</p><p>使组件逻辑可重用的另一个好方法是将组件子项转换为函数 – 这就是为什么将渲染回调也称为函数作为子组件。 我们可以举一个例子，使用渲染回调模式重写上面的 Menu 组件：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toggleable</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  <span class="keyword">constructor</span>() &#123;    <span class="keyword">super</span>()    <span class="keyword">this</span>.toggle = <span class="keyword">this</span>.toggle.bind(<span class="keyword">this</span>)    <span class="keyword">this</span>.state = &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;  &#125;   toggle() &#123;    <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">show</span>: !prevState.show &#125;))  &#125;   render() &#123;    <span class="keyword">return</span> <span class="keyword">this</span>.props.children(<span class="keyword">this</span>.state.show, <span class="keyword">this</span>.toggle)  &#125;&#125;</span><br></pre></td></tr></table></figure><p>现在我们可以传递一个函数作为我们 <code>Toggleable</code> 组件子项：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Toggleable&gt;  &#123;(show, onClick) =&gt; (    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>      <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>First Menu<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>      &#123;show ?        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Some content<span class="tag">&lt;/<span class="name">p</span>&gt;</span>        : null      &#125;    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  )&#125;&lt;<span class="regexp">/Toggleable&gt;</span></span><br></pre></td></tr></table></figure><p>上面的代码已经使用了一个函数作为子代，但是，如果我们想要像我们在 HOC 示例（多个菜单）中那样重用它，我们可以简单地创建一个使用 <code>Toggleable</code> 逻辑的新组件：</p><p>JavaScript 代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ToggleableMenu = <span class="function"><span class="params">props</span> =&gt;</span>      &#123;(show, onClick) =&gt; (</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="受控组件与非受控组件"><a href="#受控组件与非受控组件" class="headerlink" title="受控组件与非受控组件"></a>受控组件与非受控组件</h3><p>在大多数情况下，React推荐使用 <a href="https://zh-hans.reactjs.org/docs/forms.html#controlled-components" target="_blank" rel="noopener">受控组件</a> 来处理表单数据。在一个受控组件中，表单数据是由 React 组件来管理的。另一种替代方案是使用非受控组件，这时表单数据将交由 DOM 节点来处理。</p><p>例如，下面的代码使用非受控组件接受一个表单的值：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.input = React.createRef();  &#125;</span><br><span class="line"></span><br><span class="line">  handleSubmit(event) &#123;</span><br><span class="line">    alert(<span class="string">'A name was submitted: '</span> + <span class="keyword">this</span>.input.current.value);    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          Name:</span><br><span class="line">          &lt;input type=<span class="string">"text"</span> ref=&#123;<span class="keyword">this</span>.input&#125; /&gt;        <span class="xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"Submit"</span> /&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>在 React 渲染生命周期时，表单元素上的 <code>value</code> 将会覆盖 DOM 节点中的值。在非受控组件中，你经常希望 React 能赋予组件一个初始值，但是不去控制后续的更新。 在这种情况下, 你可以指定一个 <code>defaultValue</code> 属性，而不是 <code>value</code>。在一个组件已经挂载之后去更新 <code>defaultValue</code> 属性的值，不会造成 DOM 上值的任何更新。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;form onSubmit&#x3D;&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">      &lt;label&gt;</span><br><span class="line">        Name:</span><br><span class="line">        &lt;input</span><br><span class="line">          defaultValue&#x3D;&quot;Bob&quot;          type&#x3D;&quot;text&quot;</span><br><span class="line">          ref&#x3D;&#123;this.input&#125; &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;label&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;Submit&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样，<code>和</code> 支持 <code>defaultChecked</code>，<code>和</code> 支持 <code>defaultValue</code>。</p><h4 id="文件输入"><a href="#文件输入" class="headerlink" title="文件输入"></a>文件输入</h4><p>在 HTML 中，\<input type="file"> 可以让用户选择一个或多个文件上传到服务器，或者通过使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications" target="_blank" rel="noopener">File API</a> 进行操作。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type&#x3D;&quot;file&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure><p>在 React 中，\<input type="file"> 始终是一个非受控组件，因为它的值只能由用户设置，而不能通过代码控制。</p><p>您应该使用 File API 与文件进行交互。下面的例子显示了如何创建一个 <a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html" target="_blank" rel="noopener">DOM 节点的 ref</a> 从而在提交表单时获取文件的信息。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class FileInput extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.handleSubmit &#x3D; this.handleSubmit.bind(this);</span><br><span class="line">    this.fileInput &#x3D; React.createRef();  &#125;</span><br><span class="line">  handleSubmit(event) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">    alert(</span><br><span class="line">      &#96;Selected file - $&#123;this.fileInput.current.files[0].name&#125;&#96;    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;form onSubmit&#x3D;&#123;this.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          Upload file:</span><br><span class="line">          &lt;input type&#x3D;&quot;file&quot; ref&#x3D;&#123;this.fileInput&#125; &#x2F;&gt;        &lt;&#x2F;label&gt;</span><br><span class="line">        &lt;br &#x2F;&gt;</span><br><span class="line">        &lt;button type&#x3D;&quot;submit&quot;&gt;Submit&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;form&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;FileInput &#x2F;&gt;,</span><br><span class="line">  document.getElementById(&#39;root&#39;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;创建方式&quot;&gt;&lt;a href=&quot;#创建方式&quot; class=&quot;headerlink&quot; title=&quot;创建方式&quot;&gt;&lt;/a&gt;创建方式&lt;/h2&gt;&lt;p&gt;React 组件的通过创建方式的不同，可分为以下两种类型的组件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;类组件&lt;/li&gt;
&lt;li&gt;函数式组件&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;类组件（class）&quot;&gt;&lt;a href=&quot;#类组件（class）&quot; class=&quot;headerlink&quot; title=&quot;类组件（class）&quot;&gt;&lt;/a&gt;类组件（class）&lt;/h3&gt;&lt;p&gt;在React中类组件通过关键字&lt;code&gt;class&lt;/code&gt; 来声明并通过&lt;code&gt;extend React.Component&lt;/code&gt;来实现一个类式组件，其实在JavaScript中类与函数其实没有明显的界限，你可以理解&lt;code&gt;class&lt;/code&gt;&lt;font color=&quot;red&quot;&gt;其实本质也是函数&lt;/font&gt;，只不过类的这种书写形式，让我们的代码更具有可读性。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/"/>
    
    
  </entry>
  
  <entry>
    <title>前端常见优化场景</title>
    <link href="https://liyi-up.top/2021/08/14/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E5%9C%BA%E6%99%AF/"/>
    <id>https://liyi-up.top/2021/08/14/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E5%9C%BA%E6%99%AF/</id>
    <published>2021-08-14T00:45:05.000Z</published>
    <updated>2021-08-14T01:16:57.561Z</updated>
    
    <content type="html"><![CDATA[<h2 id="长列表"><a href="#长列表" class="headerlink" title="长列表"></a>长列表</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><blockquote><p>众所周知，浏览器在渲染dom节点的时候，节点越复杂数量越多那么所消耗的时间就会越长。当业务需求为一次性要渲染大量的数据时，数据量过大且一次性全部渲染出来的时候会使浏览器卡顿或者卡死。一般情况下，列表形式的数据展示形式是最常见的，大部分情况下，常见的方式时普通分页加载和无限滚动加载，普通分页加载在这里就不说了大部分后台管理都采用这个方式，无限滚动则是根据鼠标滚动触底时加载下一页数据，实现的思路大致是监听父元素的 scroll 事件（一般是 window），通过父元素的 scrollTop 判断是否到了页面是否到了页面底部，如果到了页面底部，就加载更多的数据。这样做优点就是用户向上翻数据的时候不用点上一页按钮。</p></blockquote><a id="more"></a><h3 id="非一次性完整渲染长列表"><a href="#非一次性完整渲染长列表" class="headerlink" title="非一次性完整渲染长列表"></a>非一次性完整渲染长列表</h3><ol><li>一是无限滚动加载，就是<font color="red">懒加载</font>，就是在滚动到页面底部的时候，再去加载剩余的数据，说白了也是对数据进行分页，一种常见的<font color="red">首屏</font>优化方案</li><li>另一种是<font color="red">按需加载</font>，假设总数据为1000条，可视区域高度为<code>500px</code>，每个列表item高度为<code>50px</code>，那么在可视区域内只需要渲染10个就可以了，而不是1000条，根据用户滚动在对可视区域的节点位置和下标进行计算，在总数据中进行截取替换，每次只是渲染可视区域的数据节点，懒加载则是一直追加</li></ol><p>在饿了么前端发表的文章中看到这么一段话</p><blockquote><p>你可能会发现无限滚动在移动端很常见，但是可见区域渲染并不常见，这个主要是因为 iOS 上 UIWebView 的 onscroll<br>事件并不能实时触发。笔者曾尝试过使用 iScroll<br>来实现类似可视区域渲染，虽然初次渲染慢的问题可以解决，但是会出现滚动时体验不佳的问题（会有白屏时间）。</p></blockquote><p>这个我也在移动端小程序上试过，渲染可视区域的固定数量节点，但是用户快速滑动或者一些其他操作的时候就会出现问题 体验感确实不好</p><p>下面给出一个简单demo，关于按需加载，实现方式有很多，也有很多博客技术贴，我这种也参考了其他人的，如果还有其他更好的方案，请告知</p><p>下面是ietm为固定高度得demo代码 大部分地方加了备注，都能看懂，写的比较草率，后期会整理成插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Card :bordered&#x3D;&quot;false&quot; class&#x3D;&quot;content&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;wraper&quot; ref&#x3D;&quot;wraper&quot; @scroll&#x3D;&quot;handleScroll&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;scroll-bar&quot; ref&#x3D;&quot;scrollBar&quot; :style&#x3D;&quot;&#123;height:allHeight + &#39;px&#39;&#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;ul class&#x3D;&quot;list&quot; ref&#x3D;&quot;list&quot;  :style&#x3D;&quot;&#123; transform: getTransform &#125;&quot;&gt;</span><br><span class="line">        &lt;li class&#x3D;&quot;item&quot; v-for&#x3D;&quot;item in visibaleData&quot; :key&#x3D;&quot;item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">      &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;Card&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;baseTable&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      wraperHeight: 600, &#x2F;&#x2F;可视区域高度</span><br><span class="line">      itemHeight: 60, &#x2F;&#x2F;每个列得高度</span><br><span class="line">      visibaleCount: 0, &#x2F;&#x2F;可视区域得渲染得个数</span><br><span class="line">      allHeight: 0, &#x2F;&#x2F;总数据得高度</span><br><span class="line">      visibaleData: [], &#x2F;&#x2F;可视区域渲染得数据集合</span><br><span class="line">      list: [], &#x2F;&#x2F;总数据</span><br><span class="line">      startIndex: 0, &#x2F;&#x2F;可视区域得第一个元素</span><br><span class="line">      endIndex: 0, &#x2F;&#x2F;可视区域得最后一个元素</span><br><span class="line">      bufferSize: 6, &#x2F;&#x2F; 一个缓冲值，用来增加一定的缓存区域，</span><br><span class="line">      getTransform:0,</span><br><span class="line">      scroll:0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    &#x2F;&#x2F; 构造个大数据量得数据集合</span><br><span class="line">    for (let i &#x3D; 0; i &lt; 1000; i++) &#123;</span><br><span class="line">      this.list.push(&quot;列表&quot; + i);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 计算显示区域可以渲染得数量</span><br><span class="line">    this.visibaleCount &#x3D; Math.floor(this.wraperHeight &#x2F; this.itemHeight) + this.bufferSize</span><br><span class="line">    &#x2F;&#x2F; 可视区域得最后一个元素</span><br><span class="line">      this.endIndex &#x3D; this.startIndex + this.visibaleCount</span><br><span class="line">    &#x2F;&#x2F; 计算全部数据得高度</span><br><span class="line">    this.allHeight &#x3D; this.list.length * this.itemHeight</span><br><span class="line">    this.updateVisibleData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F;  此处用计算属性也可以</span><br><span class="line">    updateVisibleData()&#123;</span><br><span class="line">      &#x2F;&#x2F;可视区域渲染得数据集合</span><br><span class="line">      this.visibaleData &#x3D; this.list.slice(this.startIndex,this.endIndex)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 滚动事件</span><br><span class="line">    handleScroll(e)&#123;</span><br><span class="line">      let scroll &#x3D; this.$refs.wraper.scrollTop</span><br><span class="line">      this.startIndex &#x3D; Math.floor(scroll &#x2F; this.itemHeight)</span><br><span class="line">      &#x2F;&#x2F; 可视区域得最后一个元素</span><br><span class="line">      this.endIndex &#x3D; this.startIndex + this.visibaleCount</span><br><span class="line">&#x2F;&#x2F; 设置top和平移都可以，貌似使用transform性能要好些</span><br><span class="line">      &#x2F;&#x2F; this.$refs.list.style.top &#x3D;this.startIndex * this.itemHeight + &#39;px&#39;</span><br><span class="line">      &#x2F;&#x2F; 让滚动距离为itemHeight整数倍，</span><br><span class="line">      this.getTransform &#x3D; &#96;translate3d(0,$&#123;scroll - scroll % this.itemHeight&#125;px,0)&#96;</span><br><span class="line">       this.updateVisibleData()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.wraper &#123;</span><br><span class="line">  width: 600px;</span><br><span class="line">  height: 600px;</span><br><span class="line">  background: cadetblue;</span><br><span class="line">  position: relative;</span><br><span class="line">  overflow-y: scroll;</span><br><span class="line">  .list &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    .item &#123;</span><br><span class="line">      height: 60px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      border: 1px solid #000;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h2 id="防抖与节流函数"><a href="#防抖与节流函数" class="headerlink" title="防抖与节流函数"></a>防抖与节流函数</h2><h3 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h3><blockquote><p>触发高频事件后n秒内函数只会执行一次，如果n秒内高频事件再次被触发，则重新计算时间</p></blockquote><ul><li>实现方式：每次触发事件时设置一个延迟调用方法，并且取消之前的延时调用方法</li><li>缺点：如果事件在规定的时间间隔内被不断的触发，则调用方法会被不断的延迟</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//防抖debounce代码：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout = <span class="literal">null</span>; <span class="comment">// 创建一个标记用来存放定时器的返回值</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 每当用户输入的时候把前一个 setTimeout clear 掉</span></span><br><span class="line">        clearTimeout(timeout); </span><br><span class="line">        <span class="comment">// 然后又创建一个新的 setTimeout, 这样就能保证interval 间隔内如果时间持续触发，就不会执行 fn 函数</span></span><br><span class="line">        timeout = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 处理函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Math</span>.random());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 滚动事件</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, debounce(handle));</span><br></pre></td></tr></table></figure><h3 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h3><blockquote><p>高频事件触发，但在n秒内只会执行一次，所以节流会稀释函数的执行频率</p></blockquote><ul><li>实现方式：每次触发事件时，如果当前有等待执行的延时函数，则直接return</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//节流throttle代码：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> canRun = <span class="literal">true</span>; <span class="comment">// 通过闭包保存一个标记</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="comment">// 在函数开头判断标记是否为true，不为true则return</span></span><br><span class="line">        <span class="keyword">if</span> (!canRun) <span class="keyword">return</span>;</span><br><span class="line">         <span class="comment">// 立即设置为false</span></span><br><span class="line">        canRun = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// 将外部传入的函数的执行放在setTimeout中</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; </span><br><span class="line">        <span class="comment">// 最后在setTimeout执行完毕后再把标记设置为true(关键)表示可以执行下一次循环了。</span></span><br><span class="line">        <span class="comment">// 当定时器没有执行的时候标记永远是false，在开头被return掉</span></span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">            canRun = <span class="literal">true</span>;</span><br><span class="line">        &#125;, <span class="number">500</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.target.innerWidth, e.target.innerHeight);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, throttle(sayHi));</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>函数防抖</strong>：将多次操作合并为一次操作进行。原理是维护一个计时器，规定在delay时间后触发函数，但是在delay时间内再次触发的话，就会取消之前的计时器而重新设置。这样一来，只有最后一次操作能被触发。</p><p><strong>函数节流</strong>：使得一定时间内只触发一次函数。原理是通过判断是否有延迟调用函数未执行。</p><p><strong>区别</strong>： 函数节流不管事件触发有多频繁，都会保证在规定时间内一定会执行一次真正的事件处理函数，而函数防抖只是在最后一次事件后才触发一次函数。 比如在页面的无限加载场景下，我们需要用户在滚动页面时，每隔一段时间发一次 Ajax 请求，而不是在用户停下滚动页面操作时才去请求数据。这样的场景，就适合用节流技术来实现。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;长列表&quot;&gt;&lt;a href=&quot;#长列表&quot; class=&quot;headerlink&quot; title=&quot;长列表&quot;&gt;&lt;/a&gt;长列表&lt;/h2&gt;&lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;众所周知，浏览器在渲染dom节点的时候，节点越复杂数量越多那么所消耗的时间就会越长。当业务需求为一次性要渲染大量的数据时，数据量过大且一次性全部渲染出来的时候会使浏览器卡顿或者卡死。一般情况下，列表形式的数据展示形式是最常见的，大部分情况下，常见的方式时普通分页加载和无限滚动加载，普通分页加载在这里就不说了大部分后台管理都采用这个方式，无限滚动则是根据鼠标滚动触底时加载下一页数据，实现的思路大致是监听父元素的 scroll 事件（一般是 window），通过父元素的 scrollTop 判断是否到了页面是否到了页面底部，如果到了页面底部，就加载更多的数据。这样做优点就是用户向上翻数据的时候不用点上一页按钮。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="性能优化" scheme="https://liyi-up.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>前端性能优化</title>
    <link href="https://liyi-up.top/2021/08/14/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <id>https://liyi-up.top/2021/08/14/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</id>
    <published>2021-08-14T00:26:13.000Z</published>
    <updated>2021-08-14T02:18:06.364Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>性能优化是把双刃剑，有好的一面也有坏的一面。好的一面就是能提升网站性能，坏的一面就是配置麻烦，或者要遵守的规则太多。并且某些性能优化规则并不适用所有场景，需要谨慎使用，请读者带着批判性的眼光来阅读本文。</p><p>本文相关的优化建议的引用资料出处均会在建议后面给出，或者放在文末（有些参考资料可能要梯子才能观看）</p><a id="more"></a><h2 id="性能优化24条建议"><a href="#性能优化24条建议" class="headerlink" title="性能优化24条建议"></a>性能优化24条建议</h2><h3 id="减少-HTTP-请求"><a href="#减少-HTTP-请求" class="headerlink" title="减少 HTTP 请求"></a>减少 HTTP 请求</h3><p>一个完整的 HTTP 请求需要经历 DNS 查找，TCP 握手，浏览器发出 HTTP 请求，服务器接收请求，服务器处理请求并发回响应，浏览器接收响应等过程。接下来看一个具体的例子帮助理解 HTTP ：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-ff4da0780527ab348f5594c04da5d667_720w.jpg" alt="img"></p><p>这是一个 HTTP 请求，请求的文件大小为 28.4KB。</p><p>名词解释：</p><ul><li>Queueing: 在请求队列中的时间。</li><li>Stalled: 从TCP 连接建立完成，到真正可以传输数据之间的时间差，此时间包括代理协商时间。</li><li>Proxy negotiation: 与代理服务器连接进行协商所花费的时间。</li><li>DNS Lookup: 执行DNS查找所花费的时间，页面上的每个不同的域都需要进行DNS查找。</li><li>Initial Connection / Connecting: 建立连接所花费的时间，包括TCP握手/重试和协商SSL。</li><li>SSL: 完成SSL握手所花费的时间。</li><li>Request sent: 发出网络请求所花费的时间，通常为一毫秒的时间。</li><li>Waiting(TFFB): TFFB 是发出页面请求到接收到应答数据第一个字节的时间。</li><li>Content Download: 接收响应数据所花费的时间。</li></ul><p>从这个例子可以看出，真正下载数据的时间占比为 <code>13.05 / 204.16 = 6.39%</code>，文件越小，这个比例越小，文件越大，比例就越高。这就是为什么要建议将多个小文件合并为一个大文件，从而减少 HTTP 请求次数的原因。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/tools/chrome-devtools/network/understanding-resource-timing">understanding-resource-timing</a></li></ul><h3 id="使用-HTTP2"><a href="#使用-HTTP2" class="headerlink" title="使用 HTTP2"></a>使用 HTTP2</h3><p>HTTP2 相比 HTTP1.1 有如下几个优点：</p><h4 id="解析速度快"><a href="#解析速度快" class="headerlink" title="解析速度快"></a>解析速度快</h4><p>服务器解析 HTTP1.1 的请求时，必须不断地读入字节，直到遇到分隔符 CRLF 为止。而解析 HTTP2 的请求就不用这么麻烦，因为 HTTP2 是基于帧的协议，每个帧都有表示帧长度的字段。</p><h4 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h4><p>HTTP1.1 如果要同时发起多个请求，就得建立多个 TCP 连接，因为一个 TCP 连接同时只能处理一个 HTTP1.1 的请求。</p><p>在 HTTP2 上，多个请求可以共用一个 TCP 连接，这称为多路复用。同一个请求和响应用一个流来表示，并有唯一的流 ID 来标识。 多个请求和响应在 TCP 连接中可以乱序发送，到达目的地后再通过流 ID 重新组建。</p><h4 id="首部压缩"><a href="#首部压缩" class="headerlink" title="首部压缩"></a>首部压缩</h4><p>HTTP2 提供了首部压缩功能。</p><p>例如有如下两个请求：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求1</span></span><br><span class="line">:authority: unpkg.zhimg.com</span><br><span class="line">:method: GET</span><br><span class="line">:path: <span class="regexp">/za-js-sdk@2.16.0/</span>dist/zap.js</span><br><span class="line">:scheme: https</span><br><span class="line">accept: *<span class="comment">/*</span></span><br><span class="line"><span class="comment">accept-encoding: gzip, deflate, br</span></span><br><span class="line"><span class="comment">accept-language: zh-CN,zh;q=0.9</span></span><br><span class="line"><span class="comment">cache-control: no-cache</span></span><br><span class="line"><span class="comment">pragma: no-cache</span></span><br><span class="line"><span class="comment">referer: https://www.zhihu.com/</span></span><br><span class="line"><span class="comment">sec-fetch-dest: script</span></span><br><span class="line"><span class="comment">sec-fetch-mode: no-cors</span></span><br><span class="line"><span class="comment">sec-fetch-site: cross-site</span></span><br><span class="line"><span class="comment">user-agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 请求2</span></span><br><span class="line"><span class="comment">:authority: zz.bdstatic.com</span></span><br><span class="line"><span class="comment">:method: GET</span></span><br><span class="line"><span class="comment">:path: /linksubmit/push.js</span></span><br><span class="line"><span class="comment">:scheme: https</span></span><br><span class="line"><span class="comment">accept: */</span>*</span><br><span class="line">accept-encoding: gzip, deflate, br</span><br><span class="line">accept-language: zh-CN,zh;q=<span class="number">0.9</span></span><br><span class="line">cache-control: no-cache</span><br><span class="line">pragma: no-cache</span><br><span class="line">referer: https:<span class="comment">//www.zhihu.com/</span></span><br><span class="line">sec-fetch-dest: script</span><br><span class="line">sec-fetch-mode: no-cors</span><br><span class="line">sec-fetch-site: cross-site</span><br><span class="line">user-agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">6.1</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">80.0</span><span class="number">.3987</span><span class="number">.122</span> Safari/<span class="number">537.36</span></span><br></pre></td></tr></table></figure><p>从上面两个请求可以看出来，有很多数据都是重复的。如果可以把相同的首部存储起来，仅发送它们之间不同的部分，就可以节省不少的流量，加快请求的时间。</p><p>HTTP/2 在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键－值对，对于相同的数据，不再通过每次请求和响应发送。</p><p>下面再来看一个简化的例子，假设客户端按顺序发送如下请求首部：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Header1:foo</span><br><span class="line">Header2:bar</span><br><span class="line">Header3:bat</span><br></pre></td></tr></table></figure><p>当客户端发送请求时，它会根据首部值创建一张表：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic2.zhimg.com/80/v2-be170562d69da5c67cfc40aa591a722d_720w.jpg" alt="img"></p><p>如果服务器收到了请求，它会照样创建一张表。 当客户端发送下一个请求的时候，如果首部相同，它可以直接发送这样的首部块：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">62 63 64</span><br></pre></td></tr></table></figure><p>服务器会查找先前建立的表格，并把这些数字还原成索引对应的完整首部。</p><h4 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h4><p>HTTP2 可以对比较紧急的请求设置一个较高的优先级，服务器在收到这样的请求后，可以优先处理。</p><h4 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h4><p>由于一个 TCP 连接流量带宽（根据客户端到服务器的网络带宽而定）是固定的，当有多个请求并发时，一个请求占的流量多，另一个请求占的流量就会少。流量控制可以对不同的流的流量进行精确控制。</p><h4 id="服务器推送"><a href="#服务器推送" class="headerlink" title="服务器推送"></a>服务器推送</h4><p>HTTP2 新增的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。换句话说，除了对最初请求的响应外，服务器还可以额外向客户端推送资源，而无需客户端明确地请求。</p><p>例如当浏览器请求一个网站时，除了返回 HTML 页面外，服务器还可以根据 HTML 页面中的资源的 URL，来提前推送资源。</p><p>现在有很多网站已经开始使用 HTTP2 了，例如知乎：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic2.zhimg.com/80/v2-5fc8a7961b0cbeaa0253f366489c85a9_720w.jpg" alt="img"></p><p>其中 h2 是指 HTTP2 协议，http/1.1 则是指 HTTP1.1 协议。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/http2/%3Fhl%3Dzh-cn">HTTP2 简介</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/Front-end-articles/blob/master/http-https-http2.md">半小时搞懂 HTTP、HTTPS和HTTP2</a></li></ul><h3 id="使用服务端渲染"><a href="#使用服务端渲染" class="headerlink" title="使用服务端渲染"></a>使用服务端渲染</h3><p>客户端渲染: 获取 HTML 文件，根据需要下载 JavaScript 文件，运行文件，生成 DOM，再渲染。</p><p>服务端渲染：服务端返回 HTML 文件，客户端只需解析 HTML。</p><ul><li>优点：首屏渲染快，SEO 好。</li><li>缺点：配置麻烦，增加了服务器的计算压力。</li></ul><p>下面我用 Vue SSR 做示例，简单的描述一下 SSR 过程。</p><h4 id="客户端渲染过程"><a href="#客户端渲染过程" class="headerlink" title="客户端渲染过程"></a>客户端渲染过程</h4><ol><li>访问客户端渲染的网站。</li><li>服务器返回一个包含了引入资源语句和 `` 的 HTML 文件。</li><li>客户端通过 HTTP 向服务器请求资源，当必要的资源都加载完毕后，执行 <code>new Vue()</code> 开始实例化并渲染页面。</li></ol><h4 id="服务端渲染过程"><a href="#服务端渲染过程" class="headerlink" title="服务端渲染过程"></a>服务端渲染过程</h4><ol><li>访问服务端渲染的网站。</li><li>服务器会查看当前路由组件需要哪些资源文件，然后将这些文件的内容填充到 HTML 文件。如果有 ajax 请求，就会执行它进行数据预取并填充到 HTML 文件里，最后返回这个 HTML 页面。</li><li>当客户端接收到这个 HTML 页面时，可以马上就开始渲染页面。与此同时，页面也会加载资源，当必要的资源都加载完毕后，开始执行 <code>new Vue()</code> 开始实例化并接管页面。</li></ol><p>从上述两个过程中可以看出，区别就在于第二步。客户端渲染的网站会直接返回 HTML 文件，而服务端渲染的网站则会渲染完页面再返回这个 HTML 文件。</p><p><strong>这样做的好处是什么？是更快的内容到达时间 (time-to-content)</strong>。</p><p>假设你的网站需要加载完 abcd 四个文件才能渲染完毕。并且每个文件大小为 1 M。</p><p>这样一算：客户端渲染的网站需要加载 4 个文件和 HTML 文件才能完成首页渲染，总计大小为 4M（忽略 HTML 文件大小）。而服务端渲染的网站只需要加载一个渲染完毕的 HTML 文件就能完成首页渲染，总计大小为已经渲染完毕的 HTML 文件（这种文件不会太大，一般为几百K，我的个人博客网站（SSR）加载的 HTML 文件为 400K）。<strong>这就是服务端渲染更快的原因</strong>。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/vue-ssr-demo">vue-ssr-demo</a></li><li><a href="https://link.zhihu.com/?target=https%3A//ssr.vuejs.org/zh/">Vue.js 服务器端渲染指南</a></li></ul><h3 id="静态资源使用-CDN"><a href="#静态资源使用-CDN" class="headerlink" title="静态资源使用 CDN"></a>静态资源使用 CDN</h3><p>内容分发网络（CDN）是一组分布在多个不同地理位置的 Web 服务器。我们都知道，当服务器离用户越远时，延迟越高。CDN 就是为了解决这一问题，在多个位置部署服务器，让用户离服务器更近，从而缩短请求时间。</p><h4 id="CDN-原理"><a href="#CDN-原理" class="headerlink" title="CDN 原理"></a>CDN 原理</h4><p>当用户访问一个网站时，如果没有 CDN，过程是这样的：</p><ol><li>浏览器要将域名解析为 IP 地址，所以需要向本地 DNS 发出请求。</li><li>本地 DNS 依次向根服务器、顶级域名服务器、权限服务器发出请求，得到网站服务器的 IP 地址。</li><li>本地 DNS 将 IP 地址发回给浏览器，浏览器向网站服务器 IP 地址发出请求并得到资源。</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-1fd06c4ca166b16616cf31933f1e60bf_720w.jpg" alt="img"></p><p>如果用户访问的网站部署了 CDN，过程是这样的：</p><ol><li>浏览器要将域名解析为 IP 地址，所以需要向本地 DNS 发出请求。</li><li>本地 DNS 依次向根服务器、顶级域名服务器、权限服务器发出请求，得到全局负载均衡系统（GSLB）的 IP 地址。</li><li>本地 DNS 再向 GSLB 发出请求，GSLB 的主要功能是根据本地 DNS 的 IP 地址判断用户的位置，筛选出距离用户较近的本地负载均衡系统（SLB），并将该 SLB 的 IP 地址作为结果返回给本地 DNS。</li><li>本地 DNS 将 SLB 的 IP 地址发回给浏览器，浏览器向 SLB 发出请求。</li><li>SLB 根据浏览器请求的资源和地址，选出最优的缓存服务器发回给浏览器。</li><li>浏览器再根据 SLB 发回的地址重定向到缓存服务器。</li><li>如果缓存服务器有浏览器需要的资源，就将资源发回给浏览器。如果没有，就向源服务器请求资源，再发给浏览器并缓存在本地。</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic3.zhimg.com/80/v2-6fda408c9a38f178e45a1477a00156e6_720w.jpg" alt="img"></p><p>参考资料：</p><ul><li><a href="https://www.zhihu.com/question/36514327/answer/193768864" target="_blank" rel="noopener">CDN是什么？使用CDN有什么优势？</a></li><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5d105e1af265da1b71530095">CDN原理简析</a></li></ul><h3 id="将-CSS-放在文件头部，JavaScript-文件放在底部"><a href="#将-CSS-放在文件头部，JavaScript-文件放在底部" class="headerlink" title="将 CSS 放在文件头部，JavaScript 文件放在底部"></a>将 CSS 放在文件头部，JavaScript 文件放在底部</h3><p>所有放在 head 标签里的 CSS 和 JS 文件都会堵塞渲染。如果这些 CSS 和 JS 需要加载和解析很久的话，那么页面就空白了。所以 JS 文件要放在底部，等 HTML 解析完了再加载 JS 文件。</p><p>那为什么 CSS 文件还要放在头部呢？</p><p>因为先加载 HTML 再加载 CSS，会让用户第一时间看到的页面是没有样式的、“丑陋”的，为了避免这种情况发生，就要将 CSS 文件放在头部了。</p><p>另外，JS 文件也不是不可以放在头部，只要给 script 标签加上 defer 属性就可以了，异步下载，延迟执行。</p><h3 id="使用字体图标-iconfont-代替图片图标"><a href="#使用字体图标-iconfont-代替图片图标" class="headerlink" title="使用字体图标 iconfont 代替图片图标"></a>使用字体图标 iconfont 代替图片图标</h3><p>字体图标就是将图标制作成一个字体，使用时就跟字体一样，可以设置属性，例如 font-size、color 等等，非常方便。并且字体图标是矢量图，不会失真。还有一个优点是生成的文件特别小。</p><h4 id="压缩字体文件"><a href="#压缩字体文件" class="headerlink" title="压缩字体文件"></a>压缩字体文件</h4><p>使用 <a href="https://link.zhihu.com/?target=https%3A//github.com/patrickhulce/fontmin-webpack">fontmin-webpack</a> 插件对字体文件进行压缩（感谢<a href="https://link.zhihu.com/?target=https%3A//juejin.im/user/237150239985165">前端小伟</a>提供）。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic1.zhimg.com/80/v2-8b48ecbd52eb30aae94d45b16a4f5268_720w.jpg" alt="img"></p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//github.com/patrickhulce/fontmin-webpack">fontmin-webpack</a></li><li><a href="https://link.zhihu.com/?target=https%3A//www.iconfont.cn/">Iconfont-阿里巴巴矢量图标库</a></li></ul><h3 id="善用缓存，不重复加载相同的资源"><a href="#善用缓存，不重复加载相同的资源" class="headerlink" title="善用缓存，不重复加载相同的资源"></a>善用缓存，不重复加载相同的资源</h3><p>为了避免用户每次访问网站都得请求文件，我们可以通过添加 Expires 或 max-age 来控制这一行为。Expires 设置了一个时间，只要在这个时间之前，浏览器都不会请求文件，而是直接使用缓存。而 max-age 是一个相对时间，建议使用 max-age 代替 Expires 。</p><p>不过这样会产生一个问题，当文件更新了怎么办？怎么通知浏览器重新请求文件？</p><p>可以通过更新页面中引用的资源链接地址，让浏览器主动放弃缓存，加载新资源。</p><p>具体做法是把资源地址 URL 的修改与文件内容关联起来，也就是说，只有文件内容变化，才会导致相应 URL 的变更，从而实现文件级别的精确缓存控制。什么东西与文件内容相关呢？我们会很自然的联想到利用<a href="https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%B6%88%E6%81%AF%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95/3286770%3Ffromtitle%3D%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95%26fromid%3D12011257">数据摘要要算法</a>对文件求摘要信息，摘要信息与文件内容一一对应，就有了一种可以精确到单个文件粒度的缓存控制依据了。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/node-blog/blob/master/doc/node-blog7.md">webpack + express 实现文件精确缓存</a></li><li><a href="https://link.zhihu.com/?target=https%3A//www.webpackjs.com/guides/caching/">webpack-缓存</a></li><li><a href="https://www.zhihu.com/question/20790576/answer/32602154" target="_blank" rel="noopener">张云龙—大公司里怎样开发和部署前端代码？</a></li><li><a href="https://www.jianshu.com/p/fb59c770160c" target="_blank" rel="noopener">强缓存和协商缓存</a></li></ul><h3 id="压缩文件"><a href="#压缩文件" class="headerlink" title="压缩文件"></a>压缩文件</h3><p>压缩文件可以减少文件下载时间，让用户体验性更好。</p><p>得益于 webpack 和 node 的发展，现在压缩文件已经非常方便了。</p><p>在 webpack 可以使用如下插件进行压缩：</p><ul><li>JavaScript：UglifyPlugin</li><li>CSS ：MiniCssExtractPlugin</li><li>HTML：HtmlWebpackPlugin</li></ul><p>其实，我们还可以做得更好。那就是使用 gzip 压缩。可以通过向 HTTP 请求头中的 Accept-Encoding 头添加 gzip 标识来开启这一功能。当然，服务器也得支持这一功能。</p><p>gzip 是目前最流行和最有效的压缩方法。举个例子，我用 Vue 开发的项目构建后生成的 app.js 文件大小为 1.4MB，使用 gzip 压缩后只有 573KB，体积减少了将近 60%。</p><p>附上 webpack 和 node 配置 gzip 的使用方法。</p><p><strong>下载插件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install compression-webpack-plugin --save-dev</span><br><span class="line">npm install compression</span><br></pre></td></tr></table></figure><p><strong>webpack 配置</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const CompressionPlugin &#x3D; require(&#39;compression-webpack-plugin&#39;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: [new CompressionPlugin()],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>node 配置</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const compression &#x3D; require(&#39;compression&#39;)</span><br><span class="line">&#x2F;&#x2F; 在其他中间件前使用</span><br><span class="line">app.use(compression())</span><br></pre></td></tr></table></figure><h3 id="图片优化"><a href="#图片优化" class="headerlink" title="图片优化"></a>图片优化</h3><h4 id="图片延迟加载"><a href="#图片延迟加载" class="headerlink" title="图片延迟加载"></a>图片延迟加载</h4><p>在页面中，先不给图片设置路径，只有当图片出现在浏览器的可视区域时，才去加载真正的图片，这就是延迟加载。对于图片很多的网站来说，一次性加载全部图片，会对用户体验造成很大的影响，所以需要使用图片延迟加载。</p><p>首先可以将图片这样设置，在页面不可见时图片不会加载：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">"https://avatars0.githubusercontent.com/u/22117876?s=460&amp;u=7bd8f32788df6988833da6bd155c3cfbebc68006&amp;v=4"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>等页面可见时，使用 JS 加载图片：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> img = <span class="built_in">document</span>.querySelector(<span class="string">'img'</span>)</span><br><span class="line">img.src = img.dataset.src</span><br></pre></td></tr></table></figure><p>这样图片就加载出来了，完整的代码可以看一下参考资料。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/entry/594a483061ff4b006c12cea1">web 前端图片懒加载实现原理</a></li></ul><h4 id="响应式图片"><a href="#响应式图片" class="headerlink" title="响应式图片"></a>响应式图片</h4><p>响应式图片的优点是浏览器能够根据屏幕大小自动加载合适的图片。</p><p>通过 <code>picture</code> 实现</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"banner_w1000.jpg"</span> <span class="attr">media</span>=<span class="string">"(min-width: 801px)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"banner_w800.jpg"</span> <span class="attr">media</span>=<span class="string">"(max-width: 800px)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"banner_w800.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure><p>通过 <code>@media</code> 实现</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@media (min-width: 769px) &#123;</span><br><span class="line">    .bg &#123;</span><br><span class="line">        background-image: url(bg1080.jpg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media (max-width: 768px) &#123;</span><br><span class="line">    .bg &#123;</span><br><span class="line">        background-image: url(bg768.jpg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="调整图片大小"><a href="#调整图片大小" class="headerlink" title="调整图片大小"></a>调整图片大小</h4><p>例如，你有一个 1920 * 1080 大小的图片，用缩略图的方式展示给用户，并且当用户鼠标悬停在上面时才展示全图。如果用户从未真正将鼠标悬停在缩略图上，则浪费了下载图片的时间。</p><p>所以，我们可以用两张图片来实行优化。一开始，只加载缩略图，当用户悬停在图片上时，才加载大图。还有一种办法，即对大图进行延迟加载，在所有元素都加载完成后手动更改大图的 src 进行下载。</p><h4 id="降低图片质量"><a href="#降低图片质量" class="headerlink" title="降低图片质量"></a>降低图片质量</h4><p>例如 JPG 格式的图片，100% 的质量和 90% 质量的通常看不出来区别，尤其是用来当背景图的时候。我经常用 PS 切背景图时， 将图片切成 JPG 格式，并且将它压缩到 60% 的质量，基本上看不出来区别。</p><p>压缩方法有两种，一是通过 webpack 插件 <code>image-webpack-loader</code>，二是通过在线网站进行压缩。</p><p>以下附上 webpack 插件 <code>image-webpack-loader</code> 的用法。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D image-webpack-loader</span><br></pre></td></tr></table></figure><p>webpack 配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpe?g|gif|svg)(\?.*)?$/</span>,</span><br><span class="line">  use:[</span><br><span class="line">    &#123;</span><br><span class="line">    loader: <span class="string">'url-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">      limit: <span class="number">10000</span>, <span class="comment">/* 图片大小小于1000字节限制时会自动转成 base64 码引用*/</span></span><br><span class="line">      name: utils.assetsPath(<span class="string">'img/[name].[hash:7].[ext]'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/*对图片进行压缩*/</span></span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        bypassOnDebug: <span class="literal">true</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="尽可能利用-CSS3-效果代替图片"><a href="#尽可能利用-CSS3-效果代替图片" class="headerlink" title="尽可能利用 CSS3 效果代替图片"></a>尽可能利用 CSS3 效果代替图片</h4><p>有很多图片使用 CSS 效果（渐变、阴影等）就能画出来，这种情况选择 CSS3 效果更好。因为代码大小通常是图片大小的几分之一甚至几十分之一。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5cad99b5518825215d37b894">img图片在webpack中使用</a></li></ul><h4 id="使用-webp-格式的图片"><a href="#使用-webp-格式的图片" class="headerlink" title="使用 webp 格式的图片"></a>使用 webp 格式的图片</h4><blockquote><p>WebP 的优势体现在它具有更优的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量；同时具备了无损和有损的压缩模式、Alpha 透明以及动画的特性，在 JPEG 和 PNG 上的转化效果都相当优秀、稳定和统一。</p></blockquote><p>参考资料：</p><ul><li><a href="https://www.zhihu.com/question/27201061" target="_blank" rel="noopener">WebP 相对于 PNG、JPG 有什么优势？</a></li></ul><h4 id="通过-webpack-按需加载代码，提取第三库代码，减少-ES6-转为-ES5-的冗余代码"><a href="#通过-webpack-按需加载代码，提取第三库代码，减少-ES6-转为-ES5-的冗余代码" class="headerlink" title="通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码"></a>通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码</h4><blockquote><p>懒加载或者按需加载，是一种很好的优化网页或应用的方式。这种方式实际上是先把你的代码在一些逻辑断点处分离开，然后在一些代码块中完成某些操作后，立即引用或即将引用另外一些新的代码块。这样加快了应用的初始加载速度，减轻了它的总体体积，因为某些代码块可能永远不会被加载。</p></blockquote><h4 id="根据文件内容生成文件名，结合-import-动态引入组件实现按需加载"><a href="#根据文件内容生成文件名，结合-import-动态引入组件实现按需加载" class="headerlink" title="根据文件内容生成文件名，结合 import 动态引入组件实现按需加载"></a>根据文件内容生成文件名，结合 import 动态引入组件实现按需加载</h4><p>通过配置 output 的 filename 属性可以实现这个需求。filename 属性的值选项中有一个 [contenthash]，它将根据文件内容创建出唯一 hash。当文件内容发生变化时，[contenthash] 也会发生变化。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].[contenthash].js'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].[contenthash].js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="提取第三方库"><a href="#提取第三方库" class="headerlink" title="提取第三方库"></a>提取第三方库</h4><p>由于引入的第三方库一般都比较稳定，不会经常改变。所以将它们单独提取出来，作为长期缓存是一个更好的选择。 这里需要使用 webpack4 的 splitChunk 插件 cacheGroups 选项。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    runtimeChunk: &#123;</span><br><span class="line">        name: <span class="string">'manifest'</span> <span class="comment">// 将 webpack 的 runtime 代码拆分为一个单独的 chunk。</span></span><br><span class="line">    &#125;,</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">            vendor: &#123;</span><br><span class="line">                name: <span class="string">'chunk-vendors'</span>,</span><br><span class="line">                test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                priority: <span class="number">-10</span>,</span><br><span class="line">                chunks: <span class="string">'initial'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            common: &#123;</span><br><span class="line">                name: <span class="string">'chunk-common'</span>,</span><br><span class="line">                minChunks: <span class="number">2</span>,</span><br><span class="line">                priority: <span class="number">-20</span>,</span><br><span class="line">                chunks: <span class="string">'initial'</span>,</span><br><span class="line">                reuseExistingChunk: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>test: 用于控制哪些模块被这个缓存组匹配到。原封不动传递出去的话，它默认会选择所有的模块。可以传递的值类型：RegExp、String和Function;</li><li>priority：表示抽取权重，数字越大表示优先级越高。因为一个 module 可能会满足多个 cacheGroups 的条件，那么抽取到哪个就由权重最高的说了算；</li><li>reuseExistingChunk：表示是否使用已有的 chunk，如果为 true 则表示如果当前的 chunk 包含的模块已经被抽取出去了，那么将不会重新生成新的。</li><li>minChunks（默认是1）：在分割之前，这个代码块最小应该被引用的次数（译注：保证代码块复用性，默认配置的策略是不需要多次引用也可以被分割）</li><li>chunks (默认是async) ：initial、async和all</li><li>name(打包的chunks的名字)：字符串或者函数(函数可以根据条件自定义名字)</li></ul><h4 id="减少-ES6-转为-ES5-的冗余代码"><a href="#减少-ES6-转为-ES5-的冗余代码" class="headerlink" title="减少 ES6 转为 ES5 的冗余代码"></a>减少 ES6 转为 ES5 的冗余代码</h4><p>Babel 转化后的代码想要实现和原来代码一样的功能需要借助一些帮助函数，比如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>会被转换为：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_classCallCheck</span>(<span class="params">instance, Constructor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> Constructor)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"Cannot call a class as a function"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  _classCallCheck(<span class="keyword">this</span>, Person);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这里 <code>_classCallCheck</code> 就是一个 <code>helper</code> 函数，如果在很多文件里都声明了类，那么就会产生很多个这样的 <code>helper</code> 函数。</p><p>这里的 <code>@babel/runtime</code> 包就声明了所有需要用到的帮助函数，而 <code>@babel/plugin-transform-runtime</code> 的作用就是将所有需要 <code>helper</code> 函数的文件，从 <code>@babel/runtime包</code> 引进来：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _classCallCheck2 = <span class="built_in">require</span>(<span class="string">"@babel/runtime/helpers/classCallCheck"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _classCallCheck3 = _interopRequireDefault(_classCallCheck2);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="attr">default</span>: obj &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  (<span class="number">0</span>, _classCallCheck3.default)(<span class="keyword">this</span>, Person);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这里就没有再编译出 <code>helper</code> 函数 <code>classCallCheck</code> 了，而是直接引用了 <code>@babel/runtime</code> 中的 <code>helpers/classCallCheck</code>。</p><p><strong>安装</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @babel&#x2F;plugin-transform-runtime @babel&#x2F;runtime</span><br></pre></td></tr></table></figure><p><strong>使用</strong> 在 <code>.babelrc</code> 文件中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;plugins&quot;: [</span><br><span class="line">        &quot;@babel&#x2F;plugin-transform-runtime&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/d078b5f3036a">Babel 7.1介绍 transform-runtime polyfill env</a></li><li><a href="https://link.zhihu.com/?target=http%3A//webpack.docschina.org/guides/lazy-loading/">懒加载</a></li><li><a href="https://link.zhihu.com/?target=https%3A//router.vuejs.org/zh/guide/advanced/lazy-loading.html%23%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD">Vue 路由懒加载</a></li><li><a href="https://link.zhihu.com/?target=https%3A//webpack.docschina.org/guides/caching/">webpack 缓存</a></li><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5af1677c6fb9a07ab508dabb">一步一步的了解webpack4的splitChunk插件</a></li></ul><h3 id="减少重绘重排"><a href="#减少重绘重排" class="headerlink" title="减少重绘重排"></a>减少重绘重排</h3><p><strong>浏览器渲染过程</strong></p><ol><li>解析HTML生成DOM树。</li><li>解析CSS生成CSSOM规则树。</li><li>将DOM树与CSSOM规则树合并在一起生成渲染树。</li><li>遍历渲染树开始布局，计算每个节点的位置大小信息。</li><li>将渲染树每个节点绘制到屏幕。</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-72bd4270037cd646b1f0b2c2823eb2e3_720w.jpg" alt="img"></p><p><strong>重排</strong></p><p>当改变 DOM 元素位置或大小时，会导致浏览器重新生成渲染树，这个过程叫重排。</p><p><strong>重绘</strong></p><p>当重新生成渲染树后，就要将渲染树每个节点绘制到屏幕，这个过程叫重绘。不是所有的动作都会导致重排，例如改变字体颜色，只会导致重绘。记住，重排会导致重绘，重绘不会导致重排 。</p><p>重排和重绘这两个操作都是非常昂贵的，因为 JavaScript 引擎线程与 GUI 渲染线程是互斥，它们同时只能一个在工作。</p><p>什么操作会导致重排？</p><ul><li>添加或删除可见的 DOM 元素</li><li>元素位置改变</li><li>元素尺寸改变</li><li>内容改变</li><li>浏览器窗口尺寸改变</li></ul><p>如何减少重排重绘？</p><ul><li>用 JavaScript 修改样式时，最好不要直接写样式，而是替换 class 来改变样式。</li><li>如果要对 DOM 元素执行一系列操作，可以将 DOM 元素脱离文档流，修改完成后，再将它带回文档。推荐使用隐藏元素（display:none）或文档碎片（DocumentFragement），都能很好的实现这个方案。</li></ul><h3 id="使用事件委托"><a href="#使用事件委托" class="headerlink" title="使用事件委托"></a>使用事件委托</h3><p>事件委托利用了事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。所有用到按钮的事件（多数鼠标事件和键盘事件）都适合采用事件委托技术， 使用事件委托可以节省内存。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;苹果&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;香蕉&lt;/</span>li&gt;</span><br><span class="line">  &lt;li&gt;凤梨&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">&lt;/u</span>l&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>).onclick = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> target = event.target</span><br><span class="line">  <span class="keyword">if</span> (target.nodeName === <span class="string">'LI'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(target.innerHTML)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'li'</span>).forEach(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  e.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="注意程序的局部性"><a href="#注意程序的局部性" class="headerlink" title="注意程序的局部性"></a>注意程序的局部性</h3><p>一个编写良好的计算机程序常常具有良好的局部性，它们倾向于引用最近引用过的数据项附近的数据项，或者最近引用过的数据项本身，这种倾向性，被称为局部性原理。有良好局部性的程序比局部性差的程序运行得更快。</p><p><strong>局部性通常有两种不同的形式：</strong></p><ul><li>时间局部性：在一个具有良好时间局部性的程序中，被引用过一次的内存位置很可能在不远的将来被多次引用。</li><li>空间局部性 ：在一个具有良好空间局部性的程序中，如果一个内存位置被引用了一次，那么程序很可能在不远的将来引用附近的一个内存位置。</li></ul><p>时间局部性示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">arry</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i, sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> len = arry.length</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        sum += arry[i]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个例子中，变量sum在每次循环迭代中被引用一次，因此，对于sum来说，具有良好的时间局部性</p><p>空间局部性示例</p><p><strong>具有良好空间局部性的程序</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二维数组 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum1</span>(<span class="params">arry, rows, cols</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i, j, sum = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">            sum += arry[i][j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>空间局部性差的程序</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二维数组 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum2</span>(<span class="params">arry, rows, cols</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i, j, sum = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">            sum += arry[i][j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看一下上面的两个空间局部性示例，像示例中从每行开始按顺序访问数组每个元素的方式，称为具有步长为1的引用模式。 如果在数组中，每隔k个元素进行访问，就称为步长为k的引用模式。 一般而言，随着步长的增加，空间局部性下降。</p><p>这两个例子有什么区别？区别在于第一个示例是按行扫描数组，每扫描完一行再去扫下一行；第二个示例是按列来扫描数组，扫完一行中的一个元素，马上就去扫下一行中的同一列元素。</p><p>数组在内存中是按照行顺序来存放的，结果就是逐行扫描数组的示例得到了步长为 1 引用模式，具有良好的空间局部性；而另一个示例步长为 rows，空间局部性极差。</p><h4 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h4><p>运行环境：</p><ul><li>cpu: i5-7400</li><li>浏览器: chrome 70.0.3538.110</li></ul><p>对一个长度为9000的二维数组（子数组长度也为9000）进行10次空间局部性测试，时间（毫秒）取平均值，结果如下：</p><p>所用示例为上述两个空间局部性示例</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-a966daac10d8fb827818ea92e6bc9013_720w.jpg" alt="img"></p><p>从以上测试结果来看，步长为 1 的数组执行时间比步长为 9000 的数组快了一个数量级。</p><p>总结：</p><ul><li>重复引用相同变量的程序具有良好的时间局部性</li><li>对于具有步长为 k 的引用模式的程序，步长越小，空间局部性越好；而在内存中以大步长跳来跳去的程序空间局部性会很差</li></ul><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//book.douban.com/subject/26912767/">深入理解计算机系统</a></li></ul><h3 id="if-else-对比-switch"><a href="#if-else-对比-switch" class="headerlink" title="if-else 对比 switch"></a>if-else 对比 switch</h3><p>当判断条件数量越来越多时，越倾向于使用 switch 而不是 if-else。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (color == <span class="string">'blue'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'yellow'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'white'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'black'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'green'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'orange'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (color == <span class="string">'pink'</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'blue'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'yellow'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'white'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'black'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'green'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'orange'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">'pink'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>像以上这种情况，使用 switch 是最好的。假设 color 的值为 pink，则 if-else 语句要进行 7 次判断，switch 只需要进行一次判断。 从可读性来说，switch 语句也更好。</p><p>从使用时机来说，当条件值大于两个的时候，使用 switch 更好。不过 if-else 也有 switch 无法做到的事情，例如有多个判断条件的情况下，无法使用 switch。</p><h3 id="查找表"><a href="#查找表" class="headerlink" title="查找表"></a>查找表</h3><p>当条件语句特别多时，使用 switch 和 if-else 不是最佳的选择，这时不妨试一下查找表。查找表可以使用数组和对象来构建。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (index) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'0'</span>:</span><br><span class="line">        <span class="keyword">return</span> result0</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'1'</span>:</span><br><span class="line">        <span class="keyword">return</span> result1</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'2'</span>:</span><br><span class="line">        <span class="keyword">return</span> result2</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'3'</span>:</span><br><span class="line">        <span class="keyword">return</span> result3</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'4'</span>:</span><br><span class="line">        <span class="keyword">return</span> result4</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'5'</span>:</span><br><span class="line">        <span class="keyword">return</span> result5</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'6'</span>:</span><br><span class="line">        <span class="keyword">return</span> result6</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'7'</span>:</span><br><span class="line">        <span class="keyword">return</span> result7</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'8'</span>:</span><br><span class="line">        <span class="keyword">return</span> result8</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'9'</span>:</span><br><span class="line">        <span class="keyword">return</span> result9</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'10'</span>:</span><br><span class="line">        <span class="keyword">return</span> result10</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'11'</span>:</span><br><span class="line">        <span class="keyword">return</span> result11</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以将这个 switch 语句转换为查找表</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> results = [result0,result1,result2,result3,result4,result5,result6,result7,result8,result9,result10,result11]</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> results[index]</span><br></pre></td></tr></table></figure><p>如果条件语句不是数值而是字符串，可以用对象来建立查找表</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = &#123;</span><br><span class="line">  red: result0,</span><br><span class="line">  green: result1,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> map[color]</span><br></pre></td></tr></table></figure><h3 id="避免页面卡顿"><a href="#避免页面卡顿" class="headerlink" title="避免页面卡顿"></a>避免页面卡顿</h3><p><strong>60fps 与设备刷新率</strong></p><blockquote><p>目前大多数设备的屏幕刷新率为 60 次/秒。因此，如果在页面中有一个动画或渐变效果，或者用户正在滚动页面，那么浏览器渲染动画或页面的每一帧的速率也需要跟设备屏幕的刷新率保持一致。 其中每个帧的预算时间仅比 16 毫秒多一点 (1 秒/ 60 = 16.66 毫秒)。但实际上，浏览器有整理工作要做，因此您的所有工作需要在 10 毫秒内完成。如果无法符合此预算，帧率将下降，并且内容会在屏幕上抖动。 此现象通常称为卡顿，会对用户体验产生负面影响。</p></blockquote><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic2.zhimg.com/80/v2-dc48e4bd5b41dac0b0e8cb64a8e603c9_720w.jpeg" alt="img"></p><p>假如你用 JavaScript 修改了 DOM，并触发样式修改，经历重排重绘最后画到屏幕上。如果这其中任意一项的执行时间过长，都会导致渲染这一帧的时间过长，平均帧率就会下降。假设这一帧花了 50 ms，那么此时的帧率为 1s / 50ms = 20fps，页面看起来就像卡顿了一样。</p><p>对于一些长时间运行的 JavaScript，我们可以使用定时器进行切分，延迟执行。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arry.length; i &lt; len; i++) &#123;</span><br><span class="line">    process(arry[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设上面的循环结构由于 process() 复杂度过高或数组元素太多，甚至两者都有，可以尝试一下切分。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todo = arry.concat()</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    process(todo.shift())</span><br><span class="line">    <span class="keyword">if</span> (todo.length) &#123;</span><br><span class="line">        setTimeout(<span class="built_in">arguments</span>.callee, <span class="number">25</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        callback(arry)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">25</span>)</span><br></pre></td></tr></table></figure><p>如果有兴趣了解更多，可以查看一下<a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/recommended-books/blob/master/%E5%89%8D%E7%AB%AF/%E9%AB%98%E6%80%A7%E8%83%BDJavaScript.pdf">高性能JavaScript</a>第 6 章和<a href="https://link.zhihu.com/?target=https%3A//book.douban.com/subject/30170670/">高效前端：Web高效编程与优化实践</a>第 3 章。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/rendering">渲染性能</a></li></ul><h3 id="使用-requestAnimationFrame-来实现视觉变化"><a href="#使用-requestAnimationFrame-来实现视觉变化" class="headerlink" title="使用 requestAnimationFrame 来实现视觉变化"></a>使用 requestAnimationFrame 来实现视觉变化</h3><p>从第 16 点我们可以知道，大多数设备屏幕刷新率为 60 次/秒，也就是说每一帧的平均时间为 16.66 毫秒。在使用 JavaScript 实现动画效果的时候，最好的情况就是每次代码都是在帧的开头开始执行。而保证 JavaScript 在帧开始时运行的唯一方式是使用 <code>requestAnimationFrame</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If run as a requestAnimationFrame callback, this</span></span><br><span class="line"><span class="comment"> * will be run at the start of the frame.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateScreen</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Make visual updates here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">requestAnimationFrame(updateScreen);</span><br></pre></td></tr></table></figure><p>如果采取 <code>setTimeout</code> 或 <code>setInterval</code> 来实现动画的话，回调函数将在帧中的某个时点运行，可能刚好在末尾，而这可能经常会使我们丢失帧，导致卡顿。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic3.zhimg.com/80/v2-78490faf61c45ea02c6dfc84914d504a_720w.jpg" alt="img"></p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution%3Fhl%3Dzh-cn">优化 JavaScript 执行</a></li></ul><h3 id="使用-Web-Workers"><a href="#使用-Web-Workers" class="headerlink" title="使用 Web Workers"></a>使用 Web Workers</h3><p>Web Worker 使用其他工作线程从而独立于主线程之外，它可以执行任务而不干扰用户界面。一个 worker 可以将消息发送到创建它的 JavaScript 代码, 通过将消息发送到该代码指定的事件处理程序（反之亦然）。</p><p>Web Worker 适用于那些处理纯数据，或者与浏览器 UI 无关的长时间运行脚本。</p><p>创建一个新的 worker 很简单，指定一个脚本的 URI 来执行 worker 线程（main.js）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myWorker = <span class="keyword">new</span> Worker(<span class="string">'worker.js'</span>);</span><br><span class="line"><span class="comment">// 你可以通过postMessage() 方法和onmessage事件向worker发送消息。</span></span><br><span class="line">first.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  myWorker.postMessage([first.value,second.value]);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Message posted to worker'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">second.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  myWorker.postMessage([first.value,second.value]);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Message posted to worker'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 worker 中接收到消息后，我们可以写一个事件处理函数代码作为响应（worker.js）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Message received from main script'</span>);</span><br><span class="line">  <span class="keyword">var</span> workerResult = <span class="string">'Result: '</span> + (e.data[<span class="number">0</span>] * e.data[<span class="number">1</span>]);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Posting message back to main script'</span>);</span><br><span class="line">  postMessage(workerResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>onmessage处理函数在接收到消息后马上执行，代码中消息本身作为事件的data属性进行使用。这里我们简单的对这2个数字作乘法处理并再次使用postMessage()方法，将结果回传给主线程。</p><p>回到主线程，我们再次使用onmessage以响应worker回传的消息：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myWorker.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  result.textContent = e.data;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Message received from worker'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这里我们获取消息事件的data，并且将它设置为result的textContent，所以用户可以直接看到运算的结果。</p><p>不过在worker内，不能直接操作DOM节点，也不能使用window对象的默认方法和属性。然而你可以使用大量window对象之下的东西，包括WebSockets，IndexedDB以及FireFox OS专用的Data Store API等数据存储机制。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a></li></ul><h3 id="使用位操作"><a href="#使用位操作" class="headerlink" title="使用位操作"></a>使用位操作</h3><p>JavaScript 中的数字都使用 IEEE-754 标准以 64 位格式存储。但是在位操作中，数字被转换为有符号的 32 位格式。即使需要转换，位操作也比其他数学运算和布尔操作快得多。</p><h4 id="取模"><a href="#取模" class="headerlink" title="取模"></a>取模</h4><p>由于偶数的最低位为 0，奇数为 1，所以取模运算可以用位操作来代替。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (value % <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// 奇数</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 偶数 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 位操作</span></span><br><span class="line"><span class="keyword">if</span> (value &amp; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 奇数</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 偶数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="取整"><a href="#取整" class="headerlink" title="取整"></a>取整</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~~<span class="number">10.12</span> <span class="comment">// 10</span></span><br><span class="line">~~<span class="number">10</span> <span class="comment">// 10</span></span><br><span class="line">~~<span class="string">'1.5'</span> <span class="comment">// 1</span></span><br><span class="line">~~<span class="literal">undefined</span> <span class="comment">// 0</span></span><br><span class="line">~~<span class="literal">null</span> <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h4 id="位掩码"><a href="#位掩码" class="headerlink" title="位掩码"></a>位掩码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="number">4</span></span><br><span class="line"><span class="keyword">const</span> options = a | b | c</span><br></pre></td></tr></table></figure><p>通过定义这些选项，可以用按位与操作来判断 a/b/c 是否在 options 中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选项 b 是否在选项中</span></span><br><span class="line"><span class="keyword">if</span> (b &amp; options) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="不要覆盖原生方法"><a href="#不要覆盖原生方法" class="headerlink" title="不要覆盖原生方法"></a>不要覆盖原生方法</h3><p>无论你的 JavaScript 代码如何优化，都比不上原生方法。因为原生方法是用低级语言写的（C/C++），并且被编译成机器码，成为浏览器的一部分。当原生方法可用时，尽量使用它们，特别是数学运算和 DOM 操作。</p><h3 id="降低-CSS-选择器的复杂性"><a href="#降低-CSS-选择器的复杂性" class="headerlink" title="降低 CSS 选择器的复杂性"></a>降低 CSS 选择器的复杂性</h3><h4 id="浏览器读取选择器，遵循的原则是从选择器的右边到左边读取。"><a href="#浏览器读取选择器，遵循的原则是从选择器的右边到左边读取。" class="headerlink" title="浏览器读取选择器，遵循的原则是从选择器的右边到左边读取。"></a>浏览器读取选择器，遵循的原则是从选择器的右边到左边读取。</h4><p>看个示例</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#block</span> <span class="selector-class">.text</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>查找所有 P 元素。</li><li>查找结果 1 中的元素是否有类名为 text 的父元素</li><li>查找结果 2 中的元素是否有 id 为 block 的父元素</li></ol><h4 id="CSS-选择器优先级"><a href="#CSS-选择器优先级" class="headerlink" title="CSS 选择器优先级"></a>CSS 选择器优先级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">内联 &gt; ID选择器 &gt; 类选择器 &gt; 标签选择器</span><br></pre></td></tr></table></figure><p>根据以上两个信息可以得出结论。</p><ol><li>选择器越短越好。</li><li>尽量使用高优先级的选择器，例如 ID 和类选择器。</li><li>避免使用通配符 *。</li></ol><p>最后要说一句，据我查找的资料所得，CSS 选择器没有优化的必要，因为最慢和慢快的选择器性能差别非常小。</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//ecss.io/appendix1.html">CSS selector performance</a></li><li><a href="https://link.zhihu.com/?target=https%3A//www.sitepoint.com/optimizing-css-id-selectors-and-other-myths/">Optimizing CSS: ID Selectors and Other Myths</a></li></ul><h3 id="使用-flexbox-而不是较早的布局模型"><a href="#使用-flexbox-而不是较早的布局模型" class="headerlink" title="使用 flexbox 而不是较早的布局模型"></a>使用 flexbox 而不是较早的布局模型</h3><p>在早期的 CSS 布局方式中我们能对元素实行绝对定位、相对定位或浮动定位。而现在，我们有了新的布局方式 <a href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox">flexbox</a>，它比起早期的布局方式来说有个优势，那就是性能比较好。</p><p>下面的截图显示了在 1300 个框上使用浮动的布局开销：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-bada97c5dbbc674d0109bc62a018f4d3_720w.jpg" alt="img"></p><p>然后我们用 flexbox 来重现这个例子：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic2.zhimg.com/80/v2-d876053d01ca9bb62711d4240165037d_720w.jpg" alt="img"></p><p>现在，对于相同数量的元素和相同的视觉外观，布局的时间要少得多（本例中为分别 3.5 毫秒和 14 毫秒）。</p><p>不过 flexbox 兼容性还是有点问题，不是所有浏览器都支持它，所以要谨慎使用。</p><p>各浏览器兼容性：</p><ul><li>Chrome 29+</li><li>Firefox 28+</li><li>Internet Explorer 11</li><li>Opera 17+</li><li>Safari 6.1+ (prefixed with -webkit-)</li><li>Android 4.4+</li><li>iOS 7.1+ (prefixed with -webkit-)</li></ul><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing%3Fhl%3Dzh-cn">使用 flexbox 而不是较早的布局模型</a></li></ul><h3 id="使用-transform-和-opacity-属性更改来实现动画"><a href="#使用-transform-和-opacity-属性更改来实现动画" class="headerlink" title="使用 transform 和 opacity 属性更改来实现动画"></a>使用 transform 和 opacity 属性更改来实现动画</h3><p>在 CSS 中，transforms 和 opacity 这两个属性更改不会触发重排与重绘，它们是可以由合成器（composite）单独处理的属性。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pic4.zhimg.com/80/v2-c91ff089a7a0512aeffd63e0c53dfa97_720w.jpeg" alt="img"></p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/rendering/stick-to-compositor-only-properties-and-manage-layer-count%3Fhl%3Dzh-cn">使用 transform 和 opacity 属性更改来实现动画</a></li></ul><h3 id="合理使用规则，避免过度优化"><a href="#合理使用规则，避免过度优化" class="headerlink" title="合理使用规则，避免过度优化"></a>合理使用规则，避免过度优化</h3><p>性能优化主要分为两类：</p><ol><li>加载时优化</li><li>运行时优化</li></ol><p>上述 23 条建议中，属于加载时优化的是前面 10 条建议，属于运行时优化的是后面 13 条建议。通常来说，没有必要 23 条性能优化规则都用上，根据网站用户群体来做针对性的调整是最好的，节省精力，节省时间。</p><p>在解决问题之前，得先找出问题，否则无从下手。所以在做性能优化之前，最好先调查一下网站的加载性能和运行性能。</p><h4 id="检查加载性能"><a href="#检查加载性能" class="headerlink" title="检查加载性能"></a>检查加载性能</h4><p>一个网站加载性能如何主要看白屏时间和首屏时间。</p><ul><li>白屏时间：指从输入网址，到页面开始显示内容的时间。</li><li>首屏时间：指从输入网址，到页面完全渲染的时间。</li></ul><p>将以下脚本放在 \&lt;/head&gt; 前面就能获取白屏时间。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">new</span> <span class="built_in">Date</span>() - performance.timing.navigationStart</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在 <code>window.onload</code> 事件里执行 <code>new Date() - performance.timing.navigationStart</code> 即可获取首屏时间。</p><h4 id="检查运行性能"><a href="#检查运行性能" class="headerlink" title="检查运行性能"></a>检查运行性能</h4><p>配合 chrome 的开发者工具，我们可以查看网站在运行时的性能。</p><p>打开网站，按 F12 选择 performance，点击左上角的灰色圆点，变成红色就代表开始记录了。这时可以模仿用户使用网站，在使用完毕后，点击 stop，然后你就能看到网站运行期间的性能报告。如果有红色的块，代表有掉帧的情况；如果是绿色，则代表 FPS 很好。performance 的具体使用方法请用搜索引擎搜索一下，毕竟篇幅有限。</p><p>通过检查加载和运行性能，相信你对网站性能已经有了大概了解。所以这时候要做的事情，就是使用上述 23 条建议尽情地去优化你的网站，加油！</p><p>参考资料：</p><ul><li><a href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/navigationStart">performance.timing.navigationStart</a></li></ul><h2 id="其他参考资料"><a href="#其他参考资料" class="headerlink" title="其他参考资料"></a>其他参考资料</h2><ul><li><a href="https://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/why-performance-matters%3Fhl%3Dzh-cn">性能为何至关重要</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/recommended-books/blob/master/%E5%89%8D%E7%AB%AF/%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE%E6%8C%87%E5%8D%97.pdf">高性能网站建设指南</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/recommended-books/blob/master/%E5%89%8D%E7%AB%AF/Web%E6%80%A7%E8%83%BD%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.pdf">Web性能权威指南</a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/woai3c/recommended-books/blob/master/%E5%89%8D%E7%AB%AF/%E9%AB%98%E6%80%A7%E8%83%BDJavaScript.pdf">高性能JavaScript</a></li><li><a href="https://link.zhihu.com/?target=https%3A//book.douban.com/subject/30170670/">高效前端：Web高效编程与优化实践</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;性能优化是把双刃剑，有好的一面也有坏的一面。好的一面就是能提升网站性能，坏的一面就是配置麻烦，或者要遵守的规则太多。并且某些性能优化规则并不适用所有场景，需要谨慎使用，请读者带着批判性的眼光来阅读本文。&lt;/p&gt;
&lt;p&gt;本文相关的优化建议的引用资料出处均会在建议后面给出，或者放在文末（有些参考资料可能要梯子才能观看）&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="性能优化" scheme="https://liyi-up.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>React-Native封装原生组件</title>
    <link href="https://liyi-up.top/2021/08/13/React-Native%E5%B0%81%E8%A3%85%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6/"/>
    <id>https://liyi-up.top/2021/08/13/React-Native%E5%B0%81%E8%A3%85%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6/</id>
    <published>2021-08-13T00:59:42.000Z</published>
    <updated>2021-08-14T01:19:34.784Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>参考文档官方版：<a href="https://facebook.github.io/react-native/releases/next/docs/native-components-android.html" target="_blank" rel="noopener">Native UI Components</a></p><p>中文版：<a href="http://reactnative.cn/docs/0.31/native-component-android.html" target="_blank" rel="noopener">原生UI组件</a></p><p>上面的文档介绍了facebook 开发小组，如何封装原生组件ImageView给js调用，但是没有具体的实例。本文以封装原生TextView为例，一步一步的实现一个简单示例。</p><a id="more"></a><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>提供原生视图很简单：</p><p>1.创建一个ViewManager的子类（或者更常见的，SimpleViewManage的派生类）。<br>2.实现createViewInstance方法。<br>3.导出视图的属性设置器：使用@ReactProp（或@ReactPropGroup）注解。<br>4.把这个视图管理类注册到应用程序包的createViewManagers里。<br>5.实现JavaScript模块。</p><h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p>创建<code>ViewManager</code>的子类MyTextViewManager</p><h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p>实现方法<code>createViewInstance</code></p><h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>通过<code>@ReactProp</code>（或<code>@ReactPropGroup</code>）注解来导出属性的设置方法</p><p>上面三步中MyTextViewManager的整个代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTextViewManager</span> <span class="keyword">extends</span> <span class="title">SimpleViewManager</span>&lt;<span class="title">TextView</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"MyTextView"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> TextView <span class="title">createViewInstance</span><span class="params">(ThemedReactContext reactContext)</span> </span>&#123;</span><br><span class="line">        TextView textView = <span class="keyword">new</span> TextView(reactContext);</span><br><span class="line">        <span class="keyword">return</span> textView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ReactProp</span>(name = <span class="string">"text"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(TextView view, String text)</span> </span>&#123;</span><br><span class="line">        view.setText(text);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ReactProp</span>(name = <span class="string">"textSize"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextSize</span><span class="params">(TextView view, <span class="keyword">float</span> fontSize)</span> </span>&#123;</span><br><span class="line">        view.setTextSize(fontSize);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ReactProp</span>(name = <span class="string">"textColor"</span>, defaultInt = Color.BLACK)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextColor</span><span class="params">(TextView view, <span class="keyword">int</span> textColor)</span> </span>&#123;</span><br><span class="line">        view.setTextColor(textColor);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ReactProp</span>(name = <span class="string">"isAlpha"</span>, defaultBoolean = <span class="keyword">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTextAlpha</span><span class="params">(TextView view, <span class="keyword">boolean</span> isAlpha)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isAlpha) &#123;</span><br><span class="line">           view.setAlpha(<span class="number">0.5f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h3><p>注册MyTextViewManager。</p><p>​     创建类MyReactPackage，实现ReactPackage的方法createViewManager，在该方法中注册上面的组件MyTextViewManager。实现ReactPackage时，需要实现这三个方法，学过导入原生模块部分时我们应该很熟悉了。封装的原生模块放在createNativeModules里，封装的原生UI组件放在createViewManagers里。</p><font color="red">需要注意的是剩下的最后一个方法createJSModules里默认是返回null，要改成返回空集合，否则编译时会报错。</font><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReactPackage</span> <span class="keyword">implements</span> <span class="title">ReactPackage</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;NativeModule&gt; <span class="title">createNativeModules</span><span class="params">(ReactApplicationContext reactContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Class&lt;? extends JavaScriptModule&gt;&gt; createJSModules() &#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;ViewManager&gt; <span class="title">createViewManagers</span><span class="params">(ReactApplicationContext reactContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.&lt;ViewManager&gt;asList(</span><br><span class="line">                <span class="keyword">new</span> MyTextViewManager()</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MyReactPackage还需要在MainApplication.java文件的getPackages方法中提供。这个文件位于你的react-native应用文件夹的android目录中。</p><p>具体路径是: <code>android/app/src/main/java/com/your-app-name/MainApplication.java.</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> List&lt;ReactPackage&gt; <span class="title">getPackages</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Arrays.&lt;ReactPackage&gt;asList(</span><br><span class="line">      <span class="keyword">new</span> MainReactPackage(),</span><br><span class="line">          <span class="keyword">new</span> MyReactPackage()</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第五步"><a href="#第五步" class="headerlink" title="第五步"></a>第五步</h3><p>实现对应的JS模块。</p><p>最后一步就是创建JavaScript模块并且定义Java和JavaScript之间的接口层。大部分过程都由React底层的Java和JavaScript代码来完成，你所需要做的就是通过<font color="red">propTypes</font>，来描述属性的类型</p><p>新建一个MyTextView.js文件。代码如下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;requireNativeComponent,View&#125; <span class="keyword">from</span><span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">var</span> myTextView =&#123;</span><br><span class="line">    name:<span class="string">'MyTextView'</span>,</span><br><span class="line">    propTypes:&#123;</span><br><span class="line">        text:PropTypes.string,</span><br><span class="line">        textSize:PropTypes.number,</span><br><span class="line">        textColor:PropTypes.number,</span><br><span class="line">        isAlpha:PropTypes.bool,</span><br><span class="line"></span><br><span class="line">        ...View.propTypes <span class="comment">// 包含默认的View的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports =requireNativeComponent(<span class="string">'MyTextView'</span>,myTextView);</span><br></pre></td></tr></table></figure><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"> <span class="keyword">import</span> &#123;</span><br><span class="line">   AppRegistry,</span><br><span class="line">   StyleSheet,</span><br><span class="line">   Text,</span><br><span class="line">   View</span><br><span class="line"> &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> MyTextView = <span class="built_in">require</span>(<span class="string">'./MyTextView'</span>);</span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">NativeView</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">   render() &#123;</span><br><span class="line">     <span class="keyword">return</span> (</span><br><span class="line">         &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">             &lt;View style=&#123;styles.outView&#125;&gt;</span><br><span class="line">             &lt;MyTextView</span><br><span class="line">                 style=&#123;styles.myTextView&#125;</span><br><span class="line">                 text=&#123;<span class="string">"Welcome you Andy！"</span>&#125;</span><br><span class="line">                 textSize=&#123;<span class="number">25</span>&#125;</span><br><span class="line">             /&gt;</span><br><span class="line">             &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">         &lt;/</span>View&gt;</span><br><span class="line">     );</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">   container: &#123;</span><br><span class="line">     justifyContent:<span class="string">'center'</span>,</span><br><span class="line">       alignItems:<span class="string">'center'</span>,</span><br><span class="line">     flex: <span class="number">1</span>,</span><br><span class="line">     backgroundColor: <span class="string">'#F5FCFF'</span>,</span><br><span class="line">   &#125;,</span><br><span class="line">     outView:&#123;</span><br><span class="line">         borderWidth:<span class="number">2</span>,</span><br><span class="line">     &#125;,</span><br><span class="line">     myTextView:&#123;</span><br><span class="line">         width:<span class="number">300</span>,</span><br><span class="line">         height:<span class="number">50</span>,</span><br><span class="line">     &#125;,</span><br><span class="line"> &#125;);</span><br><span class="line"> AppRegistry.registerComponent(<span class="string">'NativeView'</span>, () =&gt; NativeView);</span><br></pre></td></tr></table></figure><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>现在我们已经知道了怎么导出一个原生视图组件，并且我们可以在JS里很方便的控制它了。</p><p>不过我们怎么才能处理来自用户的事件，譬如用户的点击？当一个原生事件发生的时候，它应该也能触发JavaScript端视图上的事件，这两个视图会依据getId()而关联在一起</p><p>在MyTextViewManager中，修改createViewInstance方法。代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> TextView <span class="title">createViewInstance</span><span class="params">(<span class="keyword">final</span> ThemedReactContext reactContext)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> TextView textView = <span class="keyword">new</span> TextView(reactContext);</span><br><span class="line">    textView.setOnTouchListener(<span class="keyword">new</span> View.OnTouchListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(event.getAction()== MotionEvent.ACTION_DOWN)&#123;</span><br><span class="line">                WritableMap nativeEvent= Arguments.createMap();</span><br><span class="line">                nativeEvent.putString(<span class="string">"message"</span>, <span class="string">"MyMessage"</span>);</span><br><span class="line">                reactContext.getJSModule(RCTEventEmitter<span class="class">.<span class="keyword">class</span>).<span class="title">receiveEvent</span>(</span></span><br><span class="line">                        textView.getId(), "topChange",nativeEvent</span><br><span class="line">                );</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> textView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是在创建的view实例中，当发生本地事件时进行事件注册。这个事件名<strong>topChange</strong> 在JavaScript端映射到onChange<br>回调属性上，这个映射关系是固定的被官方写在<code>UIManagerModuleConstants.java</code> 文件里了。这个回调会被原生事件执行，<br>然后我们通常会封装组建里构造一个类似的API，修改上面的MyTextView.js文件，完整代码如下</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;requireNativeComponent,View&#125; <span class="keyword">from</span><span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">var</span> myTextView =&#123;</span><br><span class="line">    name:<span class="string">'MyTextView'</span>,</span><br><span class="line">    propTypes:&#123;</span><br><span class="line">        text:PropTypes.string,</span><br><span class="line">        textSize:PropTypes.number,</span><br><span class="line">        textColor:PropTypes.number,</span><br><span class="line">        isAlpha:PropTypes.bool,</span><br><span class="line">        ...View.propTypes <span class="comment">// 包含默认的View的属性</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//module.exports =requireNativeComponent('MyTextView',myTextView);</span></span><br><span class="line"><span class="keyword">var</span> RCTMyView=requireNativeComponent(<span class="string">'MyTextView'</span>,myTextView);</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>()&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>._onChange = <span class="keyword">this</span>._onChange.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  _onChange(event:Event)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.props.onChangeMessage)&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(event.nativeEvent.message === <span class="string">'MyMessage'</span>)&#123;</span><br><span class="line">      <span class="keyword">this</span>.props.onChangeMessage();</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span><span class="xml"><span class="tag">&lt;<span class="name">RCTMyView</span></span></span></span><br><span class="line"><span class="xml">    &#123;...this.props&#125;</span></span><br><span class="line"><span class="xml">    onChange = &#123;this._onChange&#125;/&gt;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">MyView.propTypes = &#123;</span></span><br><span class="line"><span class="xml">  onChangeMessage:React.PropTypes.func,</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">module.exports = MyView;</span></span><br></pre></td></tr></table></figure><p>这里用MyView对myTextView进行了一次封装。</p><font color="red">注意到在MyView里为onChange绑定了_onChange方法，在这个方法里我们会调用一个预定义为函数的onChangeMessage。</font><p>而之前已经在native端将topChange绑定了原生的onTouch事件，topChange又会映射到JS端的onChange属性，这样最后当原生的onTouch事件发生时，就会调用JS端定义的onChangeMessage函数，就实现了两端事件的互动。其实onTouch事件对应到onChange属性后就已经实现了事件绑定，写onChangeMessage是为了示例展示而已。</p><p>现在只需在index.android.js文件中添加几行代码就可以看到效果了</p><p>只需为上面的index.android.js文件添加几行代码即可。</p><p>添加一个函数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_onButtonPress()&#123;</span><br><span class="line">          alert(<span class="string">"haha,you pressed me"</span>);</span><br><span class="line">          <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">              text:<span class="string">"bind event successful!"</span></span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>再给MyTextView添加一个属性<code>onChangeMessage={()=&gt;this._onButtonPress()}</code></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;参考文档官方版：&lt;a href=&quot;https://facebook.github.io/react-native/releases/next/docs/native-components-android.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Native UI Components&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;中文版：&lt;a href=&quot;http://reactnative.cn/docs/0.31/native-component-android.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原生UI组件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上面的文档介绍了facebook 开发小组，如何封装原生组件ImageView给js调用，但是没有具体的实例。本文以封装原生TextView为例，一步一步的实现一个简单示例。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React-Native" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React-Native/"/>
    
    
      <category term="RNAndroid原生封装" scheme="https://liyi-up.top/tags/RNAndroid%E5%8E%9F%E7%94%9F%E5%B0%81%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>React-Native-apk打包</title>
    <link href="https://liyi-up.top/2021/08/06/React-Native-apk%E6%89%93%E5%8C%85/"/>
    <id>https://liyi-up.top/2021/08/06/React-Native-apk%E6%89%93%E5%8C%85/</id>
    <published>2021-08-06T03:17:31.000Z</published>
    <updated>2021-08-06T04:04:23.340Z</updated>
    
    <content type="html"><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>本文主要针对React-Native在安卓平台的打包</p><h3 id="修改打包应用名称"><a href="#修改打包应用名称" class="headerlink" title="修改打包应用名称"></a>修改打包应用名称</h3><p>修改打包后的应用名称，同时，ic_launcher.png为应用图标</p><a id="more"></a><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://images2018.cnblogs.com/blog/1066491/201807/1066491-20180711224724538-237253291.png" alt></p><h3 id="生成秘钥"><a href="#生成秘钥" class="headerlink" title="生成秘钥"></a>生成秘钥</h3><p>Java开发环境自带了秘钥生成工具。可以在命令行窗口执行以下命令生成一个发布秘钥：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize <span class="number">2048</span> -validity <span class="number">10000</span></span><br></pre></td></tr></table></figure><p>其中，my-release-key.keystore是生成的秘钥库文件名称，my-key-alias是生成的秘钥库别名。</p><p>实际上生成秘使用的是别名<code>demo</code><br><code>keytool -genkey -v -keystore golf.keystore -alias demo -keyalg RSA -keysize 2048 -validity 20000</code>，按回车键后，命令行</p><p>会提示输入秘钥库<code>keystore</code>和对应的秘钥的密码，还有名称、公司名称、公司简称等一大串信息。最后会在当前目录下生成一个指定名称的秘钥文件。如果运行后提示找不到keytool，请检查Java JDK安装目录下得bin子目录是否在环境变量path中。如果不在 ，将其添加后就可以找到。</p><p>最后，秘钥文件生成后，将它移动到项目目录的“android\app”子目录下。</p><h3 id="修改gradle配置文件"><a href="#修改gradle配置文件" class="headerlink" title="修改gradle配置文件"></a>修改gradle配置文件</h3><p>为了生成发布版本，需要修改RN项目中Android项目的build.gradle文件。这个文件位于项目目录“android\app”子目录下，需要修改的内容如下所示：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion 23</span><br><span class="line">    buildToolsVersion "23.0.1"</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId "cn.yunhwa.android.zdl.soip"</span><br><span class="line">        minSdkVersion 16</span><br><span class="line">        targetSdkVersion 22</span><br><span class="line">        versionCode 1</span><br><span class="line">        versionName "1.0"</span><br><span class="line">        ndk &#123;</span><br><span class="line">            abiFilters "armeabi-v7a", "x86"</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file("./golf.keystore")//使用刚才生成的秘钥文件名称</span><br><span class="line">            storePassword "mygolf"//使用生成秘钥时输入的密码</span><br><span class="line">            keyAlias "golf"//使用生成密钥时输入的别名</span><br><span class="line">            keyPassword "mygolf"//使用生成密钥时输入的别名密码</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    splits &#123;</span><br><span class="line">        abi &#123;</span><br><span class="line">            reset()</span><br><span class="line">            enable enableSeparateBuildPerCPUArchitecture</span><br><span class="line">            universalApk false  // If true, also generate a universal APK</span><br><span class="line">            include "armeabi-v7a", "x86"</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"</span><br><span class="line">            signingConfig signingConfigs.release//这个别忘记加上</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="最后是打包命令"><a href="#最后是打包命令" class="headerlink" title="最后是打包命令"></a>最后是打包命令</h3><p>在命令行状态下，进入项目目录的android子目录下，输入命令：</p><p>./gradlew assembleRelease(不好使)，废了很大劲</p><p>最后使用<code>gradlew assembleRelease --console plain</code>命令，按下回车键，打包成功，会生成发布版本安装包。</p><p>它的位置是：项目目录/android/app/build/outputs/app/app-release.apk. </p><h3 id="自定义APK输出路径与名称"><a href="#自定义APK输出路径与名称" class="headerlink" title="自定义APK输出路径与名称"></a>自定义APK输出路径与名称</h3><p><code>app/build.gradle</code>路径</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">android.applicationVariants.all &#123; v -&gt;</span><br><span class="line">    v.outputs.all &#123;</span><br><span class="line">        <span class="comment">/*指定输出到 $&#123;project&#125;/outputs/apk/release文件夹下*/</span></span><br><span class="line">        v.getPackageApplication().outputDirectory = new File(project.rootDir.absolutePath + "/outputs/apk/release")</span><br><span class="line">        <span class="comment">/*修改输出apk名字*/</span></span><br><span class="line">        outputFileName = "testAPP.apk"</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h3&gt;&lt;p&gt;本文主要针对React-Native在安卓平台的打包&lt;/p&gt;
&lt;h3 id=&quot;修改打包应用名称&quot;&gt;&lt;a href=&quot;#修改打包应用名称&quot; class=&quot;headerlink&quot; title=&quot;修改打包应用名称&quot;&gt;&lt;/a&gt;修改打包应用名称&lt;/h3&gt;&lt;p&gt;修改打包后的应用名称，同时，ic_launcher.png为应用图标&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React-Native" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React-Native/"/>
    
    
  </entry>
  
  <entry>
    <title>React-Native动画</title>
    <link href="https://liyi-up.top/2021/08/03/React-Native%E5%8A%A8%E7%94%BB/"/>
    <id>https://liyi-up.top/2021/08/03/React-Native%E5%8A%A8%E7%94%BB/</id>
    <published>2021-08-03T01:40:52.000Z</published>
    <updated>2021-08-06T03:20:05.126Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对于一个移动应用APP，其中的动画交互能够给用户带来很好的体验，所以动画在移动应用开发过程中是非常重要的;</p><h2 id="React-Native中实现动画的方式"><a href="#React-Native中实现动画的方式" class="headerlink" title="React Native中实现动画的方式"></a>React Native中实现动画的方式</h2><ul><li>不断修改state</li><li>Animated API</li></ul><a id="more"></a><p>首先如果不使用任何动画API，那想到的实现动画效果的方式，应该就是通过不断修改state中的组件相关的属性值来实现动画效果,但是这个就是不断的重新渲染整个页面，所以可能会非常影响性能;<br>React Native中提供了<font color="red">Animated API</font>来实现动画,<code>Animated API</code>可以简洁的实现各种动画和交互方式，并且具备极高的性能;<br>我们知道所谓动画，无非就是通过平移、缩放、旋转，透明度变换，以及这些基本变换的组合;React Native中也是通过Animated API 来实现对组件透明度style属性(opacity)以及style中transform属性的(<code>translateX,translateY,rotate,scale</code>)的修改来实现平移，缩放，旋转，透明度变换；</p><h2 id="Animated-动画"><a href="#Animated-动画" class="headerlink" title="Animated 动画"></a>Animated 动画</h2><p>-使用Animated 实现动画的步骤</p><p>（1）组件需要变化的属性必须使用Animated.Value或者Animated.ValueXY作为值</p><p>（2）需要进行动画的组件必须是Animated组件,Animated 提供了<br><code>Animated.View，Animated.Image，Animated.Text，Animated.ScrollView， Animated.FlatList， Anmated.SectionList</code>这些基本的动画组件，但是也可以通过<code>Animated.createAnimatedComponent()</code>方法将<font color="red">任意组件变成Animated组件</font></p><p>（3）创建动画<br><code>Animated</code>用于创建动画的方法：<br><code>Animated.timing()</code>：最常用的动画类型,使得值按照过渡曲线随时间变化<br><code>Animated.spring()</code>：弹簧变化效果<br><code>Animated.decay()</code>：衰变效果，以一个初始的速度和一个衰减系数逐渐减慢为 0</p><p>（4）创建动画之后调用start()方法，stop()方法开启和结束动画<br>以上就是Animated实现动画的基本步骤</p><h3 id="动画示例"><a href="#动画示例" class="headerlink" title="-动画示例"></a>-动画示例</h3><p>下面我们就按照上面的步骤，来实现透明度，平移，缩放，旋转动画;</p><p><strong>透明度动画：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Animated, Text, View,</span><br><span class="line">Button</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">AnimatedViewScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    fadeInOpacity= <span class="keyword">new</span> Animated.Value(<span class="number">0</span>) <span class="comment">//透明度初始值设为0</span></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        Animated.timing(        <span class="comment">//随时间变化而执行动画</span></span><br><span class="line">            <span class="keyword">this</span>.fadeInOpacity, <span class="comment">//动画中的变量值</span></span><br><span class="line">            &#123;</span><br><span class="line">                toValue: <span class="number">1</span>, <span class="comment">// 透明度最终变为1，即完全不透明</span></span><br><span class="line">                duration: <span class="number">3000</span>, <span class="comment">//动画时长</span></span><br><span class="line">            &#125;</span><br><span class="line">        ).start(); <span class="comment">//开始执行动画</span></span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">      &lt;Animated.View style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">opacity</span>:<span class="keyword">this</span>.fadeInOpacity&#125;&#125;&gt;</span><br><span class="line">          &lt;Button title=<span class="string">'透明度 按钮'</span>/&gt;</span><br><span class="line">     &lt;<span class="regexp">/Animated.View&gt;  </span></span><br><span class="line"><span class="regexp">  &lt;/</span>View&gt;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>平移动画：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Animated, Text, View,</span><br><span class="line">Button</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">AnimatedViewScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    translateX=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">      Animated.timing(<span class="keyword">this</span>.translateX,</span><br><span class="line">            &#123;</span><br><span class="line">                toValue:<span class="number">150</span>,</span><br><span class="line">                duration:<span class="number">3000</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        ).start();</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">     &lt;Animated.View style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">transform</span>:[&#123;<span class="attr">translateX</span>:<span class="keyword">this</span>.translateX&#125;]&#125;&#125;&gt;</span><br><span class="line">       &lt;Button title=<span class="string">'平移按钮'</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/Animated.View&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>View&gt;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>旋转动画：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Animated, Text, View,</span><br><span class="line">Button</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">AnimatedViewScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    degree=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">     Animated.timing(<span class="keyword">this</span>.degree,</span><br><span class="line">            &#123;</span><br><span class="line">                toValue:<span class="number">1</span>,</span><br><span class="line">                duration:<span class="number">3000</span>,</span><br><span class="line">             &#125;</span><br><span class="line">            ).start();</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">       <span class="keyword">const</span> realDeg=<span class="keyword">this</span>.degree.interpolate(&#123;</span><br><span class="line">        inputRange:[<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">        outputRange:[<span class="string">'0deg'</span>,<span class="string">'360deg'</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">     &lt;Animated.Image style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">transform</span>:[&#123;<span class="attr">rotate</span>:realDeg&#125;],</span><br><span class="line">                &#125;&#125; source=&#123;<span class="built_in">require</span>(<span class="string">'./image/tab_b_select.png'</span>)&#125;&gt;</span><br><span class="line">     &lt;<span class="regexp">/Animated.Image&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>View&gt;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里我们使用了一个interpolate()插值函数,用于将输入值范围转换为输出值范围这里是将<code>[0,1]</code> 输入 转为<code>[‘0deg’,‘360deg’];</code><br>interpolate变化过程也可以是多段的输入<code>[0,0.5,1]</code> ,输出为<code>[‘0deg’,‘360deg’,‘0deg’]</code></p><p><strong>缩放动画：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Animated, Text, View,</span><br><span class="line">Button</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">AnimatedViewScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    scale=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">    Animated.timing(<span class="keyword">this</span>.scale,</span><br><span class="line">            &#123;</span><br><span class="line">                toValue:<span class="number">1</span>,</span><br><span class="line">                duration:<span class="number">3000</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        ).start();</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">    &lt;Animated.View style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">transform</span>:[&#123;<span class="attr">scale</span>:<span class="keyword">this</span>.scale&#125;]&#125;&#125;&gt;</span><br><span class="line">         &lt;Button title=<span class="string">'缩放按钮'</span>/&gt;</span><br><span class="line">  &lt;<span class="regexp">/Animated.View&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>View&gt;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>-<strong>组合动画</strong></p><p>上面已经介绍了基本动画,透明度，平移，旋转，缩放，那么复杂的动画就需要这些基本变换的组合，也就是对这些基本动画的组合。</p><p>Animated API中提供了以下方法来实现组合动画：</p><p><code>Animated.parallel()</code>：参数是动画数组，<font color="red">同时开始</font>动画数组中的全部动画。默认情况下有一个动画停止了，其余的也会停止，可以通过<code>stopTogether</code>选项设置false,来取消这种关联。</p><p><code>Animated.sequence()</code>：参数是动画数组<font color="red">，按照顺序执行</font>动画中的所有数组，前一个动画执行完成后，后面一个动画再开始，如果当前动画被中止，则后面的动画不会继续执行；</p><p><code>Animated.stagger()</code>：参数是一个延迟时间和一个动画数组，<font color="red">前一个动画开始之后，一段时间后（延迟时间后），后一个动画开始</font>；因为仅仅是前一个动画开始后指定时间，前一个动画并不一定结束了，所以会出现同时执行（重叠）的情况;</p><p><strong>组合动画示例：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Animated, Text, View,</span><br><span class="line">Button</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">AnimatedViewScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    sameTimeDegree=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">    sameTimeScale=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line"><span class="comment">//释放出来看效果</span></span><br><span class="line"><span class="comment">// Animated.parallel([</span></span><br><span class="line">   <span class="comment">//     this.createAnimation(this.sameTimeScale,3000),</span></span><br><span class="line">   <span class="comment">//     this.createAnimation(this.sameTimeDegree,3000)</span></span><br><span class="line">   <span class="comment">// ]).start()</span></span><br><span class="line">   </span><br><span class="line">     <span class="comment">//释放出来看效果</span></span><br><span class="line">    <span class="comment">// Animated.sequence([</span></span><br><span class="line">    <span class="comment">//     this.createAnimation(this.sameTimeScale,3000),</span></span><br><span class="line">    <span class="comment">//     this.createAnimation(this.sameTimeDegree,3000)</span></span><br><span class="line">    <span class="comment">// ]).start()</span></span><br><span class="line"></span><br><span class="line">    Animated.stagger(<span class="number">10000</span>,[</span><br><span class="line">        <span class="keyword">this</span>.createAnimation(<span class="keyword">this</span>.sameTimeScale,<span class="number">3000</span>),</span><br><span class="line">        <span class="keyword">this</span>.createAnimation(<span class="keyword">this</span>.sameTimeDegree,<span class="number">3000</span>)</span><br><span class="line">    ]).start()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line"> <span class="keyword">const</span> realSameTimeDeg=<span class="keyword">this</span>.sameTimeDegree.interpolate(&#123;</span><br><span class="line">    inputRange:[<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">    outputRange:[<span class="string">'0deg'</span>,<span class="string">'360deg'</span>]</span><br><span class="line">&#125;)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">         &lt;Animated.Image</span><br><span class="line">                 style=&#123;&#123;</span><br><span class="line">                     width:<span class="number">100</span>,</span><br><span class="line">                     height:<span class="number">100</span>,</span><br><span class="line">                     transform:[</span><br><span class="line">                         &#123;</span><br><span class="line">                             scale:<span class="keyword">this</span>.sameTimeScale</span><br><span class="line">                         &#125;,</span><br><span class="line">                         &#123;<span class="attr">rotate</span>:realSameTimeDeg&#125;</span><br><span class="line">                     ]</span><br><span class="line">                 &#125;&#125;</span><br><span class="line">                 source=&#123;<span class="built_in">require</span>(<span class="string">'./image/tab_b_select.png'</span>)&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                &lt;<span class="regexp">/Animated.Image&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>View&gt;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="一些注意点"><a href="#一些注意点" class="headerlink" title="一些注意点"></a>一些注意点</h3><p>（1）如何使动画循环执行</p><p>我们可能需要一个一直旋转的View;<br><code>Animated.start()</code>方法可以传入一个参数，这个参数是一个函数，在动画结束时会回调这个函数，我们可以在这个函数里将属性值重新设置为初始值，然后再启动画以此来实现动画的循环执行;</p><p>循环动画示例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line"> Animated, </span><br><span class="line"> View,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="class"><span class="keyword">class</span> <span class="title">ProgressBar</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">      deg=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>)</span><br><span class="line">      rotate=Animated.timing(<span class="keyword">this</span>.deg, &#123;</span><br><span class="line">             toValue: <span class="number">1</span>,        <span class="comment">//属性目标值</span></span><br><span class="line">             duration: <span class="number">1000</span>,    <span class="comment">//动画执行时间</span></span><br><span class="line">             easing: Easing.linear</span><br><span class="line">    &#125;)</span><br><span class="line">      componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.startAnimate()</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      startAnimate()&#123;</span><br><span class="line">        <span class="keyword">this</span>.deg.setValue(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">this</span>.rotate.start(<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="keyword">this</span>.startAnimate()&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   render() &#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">const</span> realDeg=<span class="keyword">this</span>.deg.interpolate(&#123;</span><br><span class="line">            inputRange:[<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">            outputRange:[<span class="string">'0deg'</span>,<span class="string">'360deg'</span>]</span><br><span class="line">        &#125;);</span><br><span class="line">     <span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line">   &lt;View style=&#123;&#123;<span class="attr">flex</span>:<span class="number">1</span>,<span class="attr">justifyContent</span>:<span class="string">'center'</span>,<span class="attr">alignItems</span>:<span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">      &lt;Animated.Image style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>,<span class="attr">transform</span>:  [&#123;<span class="attr">rotate</span>:realDeg&#125;],</span><br><span class="line">                &#125;&#125; source=&#123;<span class="built_in">require</span>(<span class="string">'./image/tab_b_select.png'</span>)&#125;&gt;</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">                &lt;<span class="regexp">/Animated.Image&gt;</span></span><br><span class="line"><span class="regexp">       &lt;View/</span>&gt;    </span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码就是通过start()启动动画时传入函数，重新调用startAnimation()方法设置属性值为初始值，并重新启动动画实现动画循环执行，从而实现了一个一直旋转的图片这里要注意的是，Animated.timing()方法中easing:Easing.linear属性，也就是设置动画线性匀速播放，否则动画一次播放结束时，进入下一次动画时可能并不是连续的，会有停顿；</p><p>（2）创建动画组件</p><p>上面提到了除了Animated提供的支持的一些动画组件之外，我们可以使用Animated.createAnimatedComponent()方法来将任意组件变成动画组件；但是在实际尝试的过程中将Button变成动画组件好像无效，其他的组件都是有效的；</p><p>下面给出将TextInput变成动画组件，并进行动画的实例:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    View,</span><br><span class="line">    TextInput</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">const</span> AnimatedTextInput=Animated.createAnimatedComponent(TextInput);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MainScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    scale=<span class="keyword">new</span> Animated.Value(<span class="number">0</span>);</span><br><span class="line">     componentDidMount() &#123;</span><br><span class="line">        Animated.timing(  <span class="comment">//随时间变化而执行动画</span></span><br><span class="line">            <span class="keyword">this</span>.scale,   <span class="comment">//动画中的变量值</span></span><br><span class="line">            &#123;</span><br><span class="line">                toValue: <span class="number">1</span>,  <span class="comment">//透明度最终变为1，即完全不透明</span></span><br><span class="line">                duration: <span class="number">3000</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        ).start();</span><br><span class="line">   &#125;</span><br><span class="line">   render()&#123;</span><br><span class="line">     <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">               &lt;AnimatedTextInput style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">200</span>,</span><br><span class="line">                    transform:[&#123;<span class="attr">scale</span>:<span class="keyword">this</span>.scale&#125;],</span><br><span class="line">                    backgroundColor:<span class="string">'red'</span></span><br><span class="line">                &#125;&#125; height=&#123;<span class="number">200</span>&#125;&gt;</span><br><span class="line">                    请输入内容</span><br><span class="line">                &lt;<span class="regexp">/AnimatedTextInput&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">      )</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转自：<a href="https://blog.csdn.net/mq2856992713/article/details/109244269" target="_blank" rel="noopener">https://blog.csdn.net/mq2856992713/article/details/109244269</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;对于一个移动应用APP，其中的动画交互能够给用户带来很好的体验，所以动画在移动应用开发过程中是非常重要的;&lt;/p&gt;
&lt;h2 id=&quot;React-Native中实现动画的方式&quot;&gt;&lt;a href=&quot;#React-Native中实现动画的方式&quot; class=&quot;headerlink&quot; title=&quot;React Native中实现动画的方式&quot;&gt;&lt;/a&gt;React Native中实现动画的方式&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;不断修改state&lt;/li&gt;
&lt;li&gt;Animated API&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React-Native" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React-Native/"/>
    
    
  </entry>
  
  <entry>
    <title>React-Native踩坑日记</title>
    <link href="https://liyi-up.top/2021/07/28/React-Native%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/"/>
    <id>https://liyi-up.top/2021/07/28/React-Native%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/</id>
    <published>2021-07-28T00:43:57.000Z</published>
    <updated>2021-08-27T07:32:36.565Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>本文主要针对，react-native日常开发中所遇到小坑、大坑、天坑，通过此文你可以避免走弯路（至少少走我走过的弯路），提高你的开发效率，本着分享开源的原则，给广大刚入门react-native的小白同志们送温暖。主要内容如下：</p><ul><li>Common components（常用第三方组件集成）</li><li>Common plug （常用插件集成）</li><li>Common  Issues（常见开发问题）</li></ul><a id="more"></a><h2 id="Common-components"><a href="#Common-components" class="headerlink" title="Common components"></a>Common components</h2><h3 id="react-native-vector-icons（图标组件）"><a href="#react-native-vector-icons（图标组件）" class="headerlink" title="react-native-vector-icons（图标组件）"></a>react-native-vector-icons（图标组件）</h3><p><strong>简介：</strong></p><p><code>react-native-vector-icons</code>组件是react-native开发中，矢量图片的常用解决方案，该组件捆绑了很多图标库，例如：<code>AntDesign</code>、<code>Entypo</code>、<code>Feather</code>、并且该组件能够兼容各个平台终端（Web、IOS、Andorid等）</p><p>官网：<a href="https://github.com/oblador/react-native-vector-icons" target="_blank" rel="noopener">https://github.com/oblador/react-native-vector-icons</a></p><p>图标库：<a href="https://oblador.github.io/react-native-vector-icons/" target="_blank" rel="noopener">https://oblador.github.io/react-native-vector-icons/</a></p><p><strong>使用步骤：</strong></p><p>1.安装：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-vector-icons --save</span><br><span class="line">或者</span><br><span class="line">npm install react-native-vector-icons --save</span><br></pre></td></tr></table></figure><font color="red">2.链接：</font><p>这一步至关重要！这一步主要适用于自动将该组件配置进Android，你要不喜欢也可以手动配置，具体可以参考官网</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">react-native link react-native-vector-icons</span><br><span class="line">&#x2F;&#x2F; 或者</span><br><span class="line">npm install -g rnpm</span><br><span class="line">rnpm link react-native-vector-icons</span><br></pre></td></tr></table></figure><p>3.使用：</p><p><code>react-native-vector-icons</code>内置了很多组件，主要对应了不同图标库使用不同组件</p><ul><li><p>属性：</p><p>| 属性        | 描述                                                 | 默认值      |<br>| —————- | —————————————————————————— | —————- |<br>| <strong><code>size</code></strong>  | 图标的大小，也可以在样式对象中作为’ fontSize ‘传递。 | <code>12</code>        |<br>| <strong><code>name</code></strong>  | 要显示图标的名字，可以查看图标库查看，上文有提到     | <em>None</em>      |<br>| <strong><code>color</code></strong> | Color of the icon.                                   | <em>Inherited</em> |</p></li><li><p>静态方法：</p><p>| 方法名                   | 描述                                                         |<br>| ———————————— | —————————————————————————————— |<br>| <strong><code>getFontFamily</code></strong>      | 返回当前用于将图标检索为文本的字体系列。 用法:<code>const fontFamily = Icon.getFontFamily()</code> |<br>| <strong><code>getImageSource</code></strong>     | 返回一个<code>Promise</code>，解析到图标的位图版本的源,以便与“Image”组件等一起使用。 用法:<code>const source = await Icon. &#39; getImageSource(名称、大小、颜色)</code> |<br>| <strong><code>getImageSourceSync</code></strong> | 与<code>getImageSource</code>相同，但是是同步的。 用法:<code>const source = Icon. &#39; getImageSourceSync(名称、大小、颜色)</code> |<br>| <strong><code>getRawGlyphMap</code></strong>     | 返回图标集的原始符号映射。 用法:<code>const glyphMap = Icon.getRawGlyphMap()</code> |<br>| <strong><code>hasIcon</code></strong>            | 检查当前图标集中的名称是否有效。 用法:<code>const isNameValid = Icon.hasIcon(name)</code> |</p></li><li><p>demo:</p><p>搭配<code>react-native-navgation</code>的<code>bottomTab</code>（navgation的使用可以查看blog中的其他文章）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入手势支持</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'react-native-gesture-handler'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createBottomTabNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/bottom-tabs'</span>;</span><br><span class="line"><span class="keyword">import</span> MaterialCommunityIcons <span class="keyword">from</span> <span class="string">'react-native-vector-icons/MaterialCommunityIcons'</span>;</span><br><span class="line"><span class="comment">//引入页面模块</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@pages/home'</span>;</span><br><span class="line"><span class="keyword">import</span> Details <span class="keyword">from</span> <span class="string">'@pages/details'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Tab = createBottomTabNavigator();</span><br><span class="line"><span class="comment">// 创建TagNavigation 配置对象</span></span><br><span class="line"><span class="keyword">const</span> tabBarOptions = &#123;</span><br><span class="line">    activeTintColor: <span class="string">'blue'</span>,</span><br><span class="line">    inactiveTintColor: <span class="string">'gray'</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TabNaviagtor</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Tab.Navigator tabBarOptions=&#123;tabBarOptions&#125; &gt;</span><br><span class="line">                &lt;Tab.Screen name=<span class="string">"Home"</span> component=&#123;Home&#125; options=&#123;&#123;</span><br><span class="line">                    tabBarLabel: <span class="string">'Home'</span>,</span><br><span class="line">                    tabBarIcon: <span class="function">(<span class="params">&#123; color, size &#125;</span>) =&gt;</span> (</span><br><span class="line">                        &lt;MaterialCommunityIcons name=<span class="string">"home"</span> color=&#123;color&#125; size=&#123;size&#125; /&gt;</span><br><span class="line">                    ),</span><br><span class="line">                &#125;&#125; /&gt;</span><br><span class="line">                &lt;Tab.Screen name=<span class="string">"Details"</span> component=&#123;Details&#125;</span><br><span class="line">                    options=&#123;&#123;</span><br><span class="line">                        tabBarLabel: <span class="string">'details'</span>,</span><br><span class="line">                        tabBarIcon: <span class="function">(<span class="params">&#123; color, size &#125;</span>) =&gt;</span> (</span><br><span class="line">                            &lt;MaterialCommunityIcons name=<span class="string">"details"</span> color=&#123;color&#125; size=&#123;size&#125; /&gt;</span><br><span class="line">                        ),</span><br><span class="line">                    &#125;&#125; /&gt;</span><br><span class="line">                &lt;Tab.Screen name=<span class="string">"Home2"</span> component=&#123;Details&#125; /&gt;</span><br><span class="line">            &lt;<span class="regexp">/Tab.Navigator&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>自定义icon的引入</strong></p><p>1.找到自己喜欢的icon推荐<a href="https://www.iconfont.cn/" target="_blank" rel="noopener">iconfont-阿里巴巴矢量图标库</a>，这里默认会使用该图标库，且本地需要搭建好<code>pythono环境</code>，将喜欢的<code>iconfont</code>下载到本地获取其中的<code>.tff</code>字体文件.</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://upload-images.jianshu.io/upload_images/3825978-4cc6e5bc6ee0bf9a.png?imageMogr2/auto-orient/strip|imageView2/2/w/214/format/webp" alt="iconfont"></p><p>2.找到 <code>iconfont.ttf</code> 文件，并将文件复制到react项目中的<em>/node_modules/react-native-vector-icons/Fonts</em> 目录下。</p><p>3.在<em>/node_modules/react-native-vector-icons/glyphmaps/</em> 目录下新建<em>iconfont.json</em> 文件（中间的十进制编码可以在下载的<code>iconfont</code>文件的json文件中找到，文件内容如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"home"</span> : <span class="number">58912</span>,</span><br><span class="line">  <span class="attr">"category"</span> : <span class="number">58880</span>,</span><br><span class="line">  <span class="attr">"cart"</span> : <span class="number">58892</span>,</span><br><span class="line">  <span class="attr">"mine"</span> : <span class="number">58948</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.在<em>/node_modules/react-native-vector-icons/</em> 目录下新建<em>iconfont.js</em> 文件，文件内容如下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> createIconSet <span class="keyword">from</span> <span class="string">'./lib/create-icon-set'</span>;</span><br><span class="line"><span class="keyword">import</span> glyphMap <span class="keyword">from</span> <span class="string">'./glyphmaps/iconfont.json'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iconSet = createIconSet(glyphMap, <span class="string">'iconfont'</span>, <span class="string">'iconfont.ttf'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> iconSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Button = iconSet.Button;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TabBarItem = iconSet.TabBarItem;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> TabBarItemIOS = iconSet.TabBarItemIOS;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ToolbarAndroid = iconSet.ToolbarAndroid;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getImageSource = iconSet.getImageSource;</span><br></pre></td></tr></table></figure><p>5.使用：</p><p>在页面中导入组件<code>import Icon from &#39;react-native-vector-icons/iconfont&#39;;</code>然后就可以使用了；</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;AppRegistry,View&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> Icon <span class="keyword">from</span> <span class="string">'react-native-vector-icons/iconfont'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">icons2</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">        &lt;Icon name=&#123;<span class="string">'home'</span>&#125; size=&#123;<span class="number">26</span>&#125; color=<span class="string">"red"</span>/&gt;</span><br><span class="line">        &lt;Icon name=&#123;<span class="string">'category'</span>&#125; size=&#123;<span class="number">26</span>&#125; color=<span class="string">"red"</span>/&gt;</span><br><span class="line">        &lt;Icon name=&#123;<span class="string">'cart'</span>&#125; size=&#123;<span class="number">26</span>&#125; color=<span class="string">"red"</span>/&gt;</span><br><span class="line">        &lt;Icon name=&#123;<span class="string">'mine'</span>&#125; size=&#123;<span class="number">26</span>&#125; color=<span class="string">"red"</span>/&gt;</span><br><span class="line">      &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">AppRegistry.registerComponent('icons2', () =&gt; icons2);</span></span><br></pre></td></tr></table></figure><p>6.重新链接：</p><p><code>react-native link react-native-vector-icons</code></p><p>注意：</p><p>1.不要忘记重新链接<code>react-native link react-native-vector-icons</code></p><p>2.此外在这再推荐一个icon库：<a href="https://github.com/iconfont-cli/react-native-iconfont-cli" target="_blank" rel="noopener">https://github.com/iconfont-cli/react-native-iconfont-cli</a></p><h3 id="ant-design（蚂蚁金服UI库）"><a href="#ant-design（蚂蚁金服UI库）" class="headerlink" title="ant-design（蚂蚁金服UI库）"></a>ant-design（蚂蚁金服UI库）</h3><p>官网：<a href="https://rn.mobile.ant.design/docs/react/introduce-cn" target="_blank" rel="noopener">https://rn.mobile.ant.design/docs/react/introduce-cn</a></p><p>1.安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @ant-design/react-native --save</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @ant-design/react-native</span><br></pre></td></tr></table></figure><p>2.链接字体图标 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">react-native link @ant-design/icons-react-native</span><br><span class="line">or</span><br><span class="line">npx react-native link</span><br></pre></td></tr></table></figure><p>3.安装其他支持库（4.x一下版本请忽略）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @react-native-community/cameraroll @react-native-community/picker @react-native-community/segmented-control @react-native-community/slider @react-native-community/viewpager</span><br></pre></td></tr></table></figure><p>4.按需引入：</p><p>使用 <a href="https://github.com/ant-design/babel-plugin-import" target="_blank" rel="noopener">babel-plugin-import</a>（推荐）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .babelrc or babel-loader option</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">    [<span class="string">"import"</span>, &#123; <span class="attr">libraryName</span>: <span class="string">"@ant-design/react-native"</span> &#125;] <span class="comment">// 与 Web 平台的区别是不需要设置 style</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后改变从 @ant-design/react-native 引入模块方式即可。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">'@ant-design/react-native'</span>;</span><br></pre></td></tr></table></figure><font color="red">注意：</font><p>1.这边建议重新安装一个低版本尝试，否则会报错<code>invalid hook call</code>，这是本人摸索了三个小时，才找到的解决办法，具体出错的原因不得而知，归根到版本差异问题</p><p>2.或者通过<code>npm ls react</code>查找项目中多余的react将其删除（因为不知道会不会造成其他影响，所以不推荐）</p><p>参考：</p><p><a href="https://zhuanlan.zhihu.com/p/363288266" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/363288266</a></p><p><a href="https://github.com/react-component/picker/issues/130" target="_blank" rel="noopener">基于antd 4.x 封装组件库时报错 Invalid hook call.)</a></p><h3 id="native-echarts（数据可视化组件）"><a href="#native-echarts（数据可视化组件）" class="headerlink" title="native-echarts（数据可视化组件）"></a>native-echarts（数据可视化组件）</h3><p>官网：<a href="https://github.com/somonus/react-native-echarts" target="_blank" rel="noopener">https://github.com/somonus/react-native-echarts</a></p><p>1.安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install native-echarts</span><br></pre></td></tr></table></figure><p>2.添加支持</p><p>因为react在<code>16.x</code>以后就将很多包分离出去，实现分包管理，而<code>native-echarts</code>已经很久没有更新了，所以还是沿用了老版本的的方式</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-webview -S</span><br></pre></td></tr></table></figure><p>3.配置</p><p>对<code>node_modules\native-echarts\components\Echarts\index.js</code>文件进行如下修改</p><ul><li>替换原来的<code>webview</code>引入方式</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> WebView <span class="keyword">from</span> <span class="string">'react-native-webview'</span></span><br></pre></td></tr></table></figure><ul><li>添加设备检测</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iosPlatform = Platform.OS === <span class="string">'ios'</span> ? <span class="string">'true'</span> : <span class="string">'false'</span>;</span><br></pre></td></tr></table></figure><ul><li>修改已经启用的生命周期函数名（如果你不想报warning警告的话）</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UNSAFE_componentWillReceiveProps(nextProps)&#123;</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>修改<code>webView</code>的source源</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source=&#123;iosPlatform === <span class="string">'true'</span> ? <span class="built_in">require</span>(<span class="string">'./tpl.html'</span>) : &#123;<span class="attr">uri</span>: <span class="string">'file:///android_asset/tpl.html'</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>tpl.html的配置</strong></p><p>在node_modules包中找到native-charts包，拷贝<code>native-echarts/src/components/Echarts</code>文件夹下面的<code>tpl.html</code></p><p>在项目android/app/src/main/assets目录下，粘贴<code>tpl.html</code></p><p>如果没有assets文件夹，则直接新建assets文件夹即可。</p><p>完成如上操作后便可以进行正常操作。</p><p>参考：<a href="https://blog.csdn.net/zcylyzhi4/article/details/108362441" target="_blank" rel="noopener">https://blog.csdn.net/zcylyzhi4/article/details/108362441</a></p><p>参考：<a href="https://segmentfault.com/a/1190000015758777" target="_blank" rel="noopener">https://segmentfault.com/a/1190000015758777</a></p><h3 id="react-native-table-component（表格组件）"><a href="#react-native-table-component（表格组件）" class="headerlink" title="react-native-table-component（表格组件）"></a>react-native-table-component（表格组件）</h3><p>官网：<a href="https://github.com/Gil2015/react-native-table-component" target="_blank" rel="noopener">https://github.com/Gil2015/react-native-table-component</a></p><p>1.安装：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-table-component -S</span><br></pre></td></tr></table></figure><p>2.使用：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Text, View, StyleSheet, ScrollView, RefreshControl, FlatList &#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Table, Row, Rows &#125; <span class="keyword">from</span> <span class="string">'react-native-table-component'</span>;</span><br><span class="line"><span class="keyword">import</span> toast <span class="keyword">from</span> <span class="string">'@components/myToast'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTable</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            tableHead: [<span class="string">'名次'</span>, <span class="string">'管区名称'</span>, <span class="string">'完成率'</span>, <span class="string">'进度差'</span>],</span><br><span class="line">            tableData: [</span><br><span class="line">                [<span class="string">'1'</span>, <span class="string">'山西省区'</span>, <span class="string">'56.5%'</span>, <span class="string">'10%'</span>],</span><br><span class="line">                [<span class="string">'2'</span>, <span class="string">'云南省区'</span>, <span class="string">'54.5%'</span>, <span class="string">'-2%'</span>],</span><br><span class="line">                [<span class="string">'3'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'4'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'5'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'6'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'7'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'8'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'9'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">                [<span class="string">'10'</span>, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>],</span><br><span class="line">            ]</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    _endRefresh = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> Arr = [];</span><br><span class="line">        <span class="keyword">const</span> offsetY = e.nativeEvent.contentOffset.y; <span class="comment">//滑动距离</span></span><br><span class="line">        <span class="keyword">const</span> contentSizeHeight = e.nativeEvent.contentSize.height; <span class="comment">//scrollView contentSize高度</span></span><br><span class="line">        <span class="keyword">const</span> oriageScrollHeight = e.nativeEvent.layoutMeasurement.height; <span class="comment">//scrollView高度</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; tableData &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">const</span> index = <span class="built_in">parseInt</span>(tableData[tableData.length - <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            Arr.push([index + i, <span class="string">'京津冀蒙省区'</span>, <span class="string">'53.23%'</span>, <span class="string">'45789'</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (offsetY + oriageScrollHeight &gt;= contentSizeHeight) &#123;</span><br><span class="line">            toast.loading();</span><br><span class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        tableData: [...this.state.tableData, ...Arr],</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                toast.hide();</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    initTable = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; tableData &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">const</span> rows = tableData.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                &lt;Row</span><br><span class="line">                    key=&#123;index&#125;</span><br><span class="line">                    data=&#123;item&#125;</span><br><span class="line">                    style=&#123;[styles.row, index % <span class="number">2</span> === <span class="number">0</span> ? &#123; <span class="attr">backgroundColor</span>: <span class="string">'#FFFFFF'</span> &#125; : &#123; <span class="attr">backgroundColor</span>: <span class="string">'#F2F2F2'</span> &#125;]&#125;</span><br><span class="line">                    textStyle=&#123;styles.text&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> rows</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; tableHead, tableData &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;Table &gt;</span><br><span class="line">                    &lt;Row data=&#123;tableHead&#125; style=&#123;styles.head&#125; textStyle=&#123;styles.headText&#125; /&gt;</span><br><span class="line">                &lt;<span class="regexp">/Table&gt;</span></span><br><span class="line"><span class="regexp">                &lt;ScrollView</span></span><br><span class="line"><span class="regexp">                    onScroll=&#123;this._endRefresh&#125;</span></span><br><span class="line"><span class="regexp">                    showsVerticalScrollIndicator=&#123;false&#125;&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;Table&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;this.initTable()&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Table&gt;</span><br><span class="line">                &lt;<span class="regexp">/ScrollView&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    container: &#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">padding</span>: <span class="number">16</span>, <span class="attr">backgroundColor</span>: <span class="string">'#fff'</span>, <span class="attr">width</span>: <span class="string">"100%"</span>, &#125;,</span><br><span class="line">    head: &#123; <span class="attr">height</span>: <span class="number">40</span>, <span class="attr">backgroundColor</span>: <span class="string">'#F2F2F2'</span> &#125;,</span><br><span class="line">    headText: &#123; <span class="attr">textAlign</span>: <span class="string">'center'</span> &#125;,</span><br><span class="line">    row: &#123; <span class="attr">height</span>: <span class="number">40</span>, <span class="attr">backgroundColor</span>: <span class="string">'#E7E6E1'</span> &#125;,</span><br><span class="line">    text: &#123; <span class="attr">margin</span>: <span class="number">6</span>, <span class="attr">textAlign</span>: <span class="string">'center'</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="react-native-linear-gradient（渐变组件）"><a href="#react-native-linear-gradient（渐变组件）" class="headerlink" title="react-native-linear-gradient（渐变组件）"></a>react-native-linear-gradient（渐变组件）</h3><p>官网：<a href="https://github.com/react-native-linear-gradient/react-native-linear-gradient" target="_blank" rel="noopener">https://github.com/react-native-linear-gradient/react-native-linear-gradient</a></p><p>1.安装：</p><p>2.手动链接库</p><p>为了避免出现<code>BVLinearGradient</code> 不存在的异常，劝你还是手动执行一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="react-native-tab-view（选项卡组件）"><a href="#react-native-tab-view（选项卡组件）" class="headerlink" title="react-native-tab-view（选项卡组件）"></a>react-native-tab-view（选项卡组件）</h3><p>官网：<a href="https://github.com/satya164/react-native-tab-view" target="_blank" rel="noopener">https://github.com/satya164/react-native-tab-view</a></p><p>说明文档：<a href="https://www.5axxw.com/wiki/content/ecuyvo#a3bpbpz94ot" target="_blank" rel="noopener">https://www.5axxw.com/wiki/content/ecuyvo#a3bpbpz94ot</a></p><p>1.安装：：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-tab-view</span><br></pre></td></tr></table></figure><p>2.使用：：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PureComponent &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ScrollView, Text, View, TouchableOpacity, StyleSheet, Dimensions &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TabView, SceneMap, TabBar &#125; <span class="keyword">from</span> <span class="string">'react-native-tab-view'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FirstRoute = <span class="function">(<span class="params">&#123; navigation &#125;</span>) =&gt;</span> (</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">        &lt;TouchableOpacity onPress=&#123;() =&gt; &#123; navigation.navigate(<span class="string">'CardOne'</span>) &#125;&#125;&gt;</span><br><span class="line">            &lt;Text&gt;周报系统&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const SecondRoute = () =&gt; (</span></span><br><span class="line"><span class="regexp">    &lt;View style=&#123;[styles.container]&#125; &gt;</span></span><br><span class="line"><span class="regexp">        &lt;Text&gt;常用功能&lt;/</span>Text&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 懒加载，当数据还没有出现的时候应该显示的东西</span></span><br><span class="line"><span class="regexp">const LazyPlaceholder = (&#123; route &#125;) =&gt; (</span></span><br><span class="line"><span class="regexp">    &lt;View&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Text&gt;Loading &#123;route.title&#125;…&lt;/</span>Text&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class TabOne extends PureComponent &#123;</span></span><br><span class="line"><span class="regexp">    state = &#123;</span></span><br><span class="line"><span class="regexp">        index: 0,</span></span><br><span class="line"><span class="regexp">        routes: [</span></span><br><span class="line"><span class="regexp">            &#123; key: 'first', title: '报表应用' &#125;,</span></span><br><span class="line"><span class="regexp">            &#123; key: 'second', title: '常用功能' &#125;,</span></span><br><span class="line"><span class="regexp">        ],</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    static propTypes = &#123;</span></span><br><span class="line"><span class="regexp">        itemWidth: PropTypes.number.isRequired,</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ 设置默认值</span></span><br><span class="line"><span class="regexp">    static defaultProps = &#123;</span></span><br><span class="line"><span class="regexp">        itemWidth: 30,</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ 设置页面切换事件</span></span><br><span class="line"><span class="regexp">    _handleIndexChange = index =&gt; this.setState(&#123; index &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ 还是懒加载</span></span><br><span class="line"><span class="regexp">    _renderLazyPlaceholder = (&#123; route &#125;) =&gt; &lt;LazyPlaceholder route=&#123;route&#125; /</span>&gt;;</span><br><span class="line">    _tabBarPress = <span class="function"><span class="params">()</span> =&gt;</span> &#123; &#125;</span><br><span class="line">    <span class="comment">// 自定义tabBar</span></span><br><span class="line">    _renderTabBar = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; itemWidth &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TabBar</span><br><span class="line">                &#123;...props&#125;</span><br><span class="line">                scrollEnabled=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">                <span class="comment">// 选中时的颜色</span></span><br><span class="line">                activeColor=&#123;<span class="string">'black'</span>&#125;</span><br><span class="line">                <span class="comment">// 未选中时的颜色</span></span><br><span class="line">                inactiveColor=&#123;<span class="string">'#d3d7d4'</span>&#125;</span><br><span class="line">                <span class="comment">// 标签样式</span></span><br><span class="line">                labelStyle=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">18</span>, <span class="attr">fontWeight</span>: <span class="string">'bold'</span> &#125;&#125;</span><br><span class="line">                <span class="comment">// tab样式</span></span><br><span class="line">                tabStyle=&#123;&#123;</span><br><span class="line">                    width: <span class="string">'auto'</span>,</span><br><span class="line">                    minWidth: itemWidth</span><br><span class="line">                &#125;&#125;</span><br><span class="line">                indicatorStyle=&#123;&#123;</span><br><span class="line">                    backgroundColor: <span class="string">'#694d9f'</span>,</span><br><span class="line">                    marginBottom: <span class="number">5</span>,</span><br><span class="line"></span><br><span class="line">                &#125;&#125;</span><br><span class="line">                style=&#123;&#123;</span><br><span class="line">                    backgroundColor: <span class="string">'white'</span>,</span><br><span class="line">                    <span class="comment">// 取消底部阴影</span></span><br><span class="line">                    elevation: <span class="number">0</span></span><br><span class="line">                &#125;&#125;</span><br><span class="line">                onTabPress=&#123;(&#123; route, preventDefault &#125;) =&gt; &#123;</span><br><span class="line">                &#125;&#125;</span><br><span class="line"></span><br><span class="line">            /&gt;</span><br><span class="line"></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; index, routes &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">const</span> &#123; navigation &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;TabView</span><br><span class="line">                navigationState=&#123;&#123; index, routes, navigation &#125;&#125;</span><br><span class="line">                <span class="comment">// 自定义tabBar</span></span><br><span class="line">                renderTabBar=&#123;<span class="keyword">this</span>._renderTabBar&#125;</span><br><span class="line">                renderScene=&#123;SceneMap(&#123;</span><br><span class="line">                    first: <span class="function"><span class="params">()</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">FirstRoute</span> <span class="attr">navigation</span>=<span class="string">&#123;navigation&#125;</span> /&gt;</span>,</span></span><br><span class="line"><span class="xml">                    second: SecondRoute,</span></span><br><span class="line"><span class="xml">                &#125;)&#125;</span></span><br><span class="line"><span class="xml">                onIndexChange=&#123;index&#125;</span></span><br><span class="line"><span class="xml">                initialLayout=&#123;&#123; width: Dimensions.get('window').width &#125;&#125;</span></span><br><span class="line"><span class="xml">                onIndexChange=&#123;this._handleIndexChange&#125;</span></span><br><span class="line"><span class="xml">                // 懒加载</span></span><br><span class="line"><span class="xml">                lazy=&#123;true&#125;</span></span><br><span class="line"><span class="xml">                lazyPreloadDistance=&#123;1&#125;</span></span><br><span class="line"><span class="xml">                renderLazyPlaceholder=&#123;this._renderLazyPlaceholder&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            /&gt;</span></span><br><span class="line"><span class="xml">        )</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="xml">    container: &#123;</span></span><br><span class="line"><span class="xml">        flex: 1,</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    tabBar: &#123;</span></span><br><span class="line"><span class="xml">        flexDirection: 'row',</span></span><br><span class="line"><span class="xml">        paddingTop: 64,</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    tabItem: &#123;</span></span><br><span class="line"><span class="xml">        flex: 1,</span></span><br><span class="line"><span class="xml">        alignItems: 'center',</span></span><br><span class="line"><span class="xml">        padding: 16,</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">&#125;)</span></span><br><span class="line"><span class="xml">export &#123; TabOne &#125;</span></span><br></pre></td></tr></table></figure><p>具体使用可以参考上文提到的说明文档</p><h3 id="react-native-progress-进度条"><a href="#react-native-progress-进度条" class="headerlink" title="react-native-progress(进度条)"></a>react-native-progress(进度条)</h3><p>官网：<a href="https://github.com/oblador/react-native-progress" target="_blank" rel="noopener">https://github.com/oblador/react-native-progress</a></p><p>1.安装</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-progress react-native-svg -S</span><br></pre></td></tr></table></figure><p>2.使用</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Progress <span class="keyword">from</span> <span class="string">'react-native-progress'</span>;</span><br><span class="line"></span><br><span class="line">&lt;Progress.Bar progress=&#123;<span class="number">0.3</span>&#125; width=&#123;<span class="number">200</span>&#125; /&gt;</span><br><span class="line">&lt;Progress.Pie progress=&#123;<span class="number">0.4</span>&#125; size=&#123;<span class="number">50</span>&#125; /&gt;</span><br><span class="line">&lt;Progress.Circle size=&#123;<span class="number">30</span>&#125; indeterminate=&#123;<span class="literal">true</span>&#125; /&gt;</span><br><span class="line">&lt;Progress.CircleSnail color=&#123;[<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>]&#125; /&gt;</span><br></pre></td></tr></table></figure><p>具体配置可自行参考官网</p><h3 id="SVG-图片的引入（react-native-svg）"><a href="#SVG-图片的引入（react-native-svg）" class="headerlink" title="SVG 图片的引入（react-native-svg）"></a>SVG 图片的引入（react-native-svg）</h3><p>1.安装<code>react-native-svg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-svg -S</span><br></pre></td></tr></table></figure><p>2.下载你喜欢的SVG图片，可在阿里图标库慢慢挑选，然后放在一个文件夹里面。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/09/f1fBFK.png" alt="f1fBFK.png"></p><p>3.将svg处理成一个js文件，因为稍后要用到的react-native-svg-uri这个库虽然可以直接使用文件路径的方式引入，但是在安卓下有bug，具体自行百度，这个js文件也可以百度获得，<font color="red">使用node处理的，会将svg图片处理成key：value的键值对</font>，比较简单，具体代码如下，这里取名叫做getSvg.js(看你喜欢取什么取什么)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  getSvg.js</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> svgDir = path.resolve(__dirname, <span class="string">'./svg'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取单个文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readfile</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path.join(svgDir, filename), <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data.replace(<span class="regexp">/&lt;\?xml.*?\?&gt;|&lt;\!--.*?--&gt;|&lt;!DOCTYPE.*?&gt;/g</span>, <span class="string">''</span>));</span><br><span class="line">            <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">            resolve(&#123;</span><br><span class="line">                [filename.slice(<span class="number">0</span>, filename.lastIndexOf(<span class="string">'.'</span>))]: data,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取SVG文件夹下所有svg</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readSvgs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readdir(svgDir, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">            <span class="built_in">Promise</span>.all(files.map(<span class="function"><span class="params">filename</span> =&gt;</span> readfile(filename)))</span><br><span class="line">                .then(<span class="function"><span class="params">data</span> =&gt;</span> resolve(data))</span><br><span class="line">                .catch(<span class="function"><span class="params">err</span> =&gt;</span> reject(err));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成js文件</span></span><br><span class="line">readSvgs().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> svgFile = <span class="string">'export default '</span> + <span class="built_in">JSON</span>.stringify(<span class="built_in">Object</span>.assign.apply(<span class="keyword">this</span>, data));</span><br><span class="line">    fs.writeFile(path.resolve(__dirname, <span class="string">'./Svgs.js'</span>), svgFile, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>4.上面两步走完之后你的文件夹里面应该有这些东西，一个svg图片集合，一个处理svg的脚本文件</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/09/f1fWwt.png" alt="f1fWwt.png"></p><p>5.打开控制台运行getSvg.js脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node getSvg.js</span><br></pre></td></tr></table></figure><p>运行完毕后，目录结构如下</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/09/f1f4Ff.png" alt="f1f4Ff.png"></p><p>6.去<code>react-native-svg-uri</code>的github下载源码<a href="https://github.com/vault-development/react-native-svg-uri" target="_blank" rel="noopener">地址在这儿</a>，但是这个库年代久远了，好多东西已经过期了，而且不能和最新版<code>react-native-svg</code>配合了，好在这个库非常简单且不依赖于其他库，所以我们下载他的源码自己改造一下</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://img-blog.csdnimg.cn/20201002135515714.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjM0MTIzMg==,size_16,color_FFFFFF,t_70#pic_center" alt="react-native-svg-uri"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// svgUri.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; View &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> xmldom <span class="keyword">from</span> <span class="string">'xmldom'</span>;</span><br><span class="line"><span class="keyword">import</span> resolveAssetSource <span class="keyword">from</span> <span class="string">'react-native/Libraries/Image/resolveAssetSource'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> utils <span class="keyword">from</span> <span class="string">'./svgUriUtils'</span>;</span><br><span class="line"><span class="keyword">import</span> Svg, &#123;</span><br><span class="line">    Circle,</span><br><span class="line">    Ellipse,</span><br><span class="line">    G,</span><br><span class="line">    LinearGradient,</span><br><span class="line">    RadialGradient,</span><br><span class="line">    Line,</span><br><span class="line">    Path,</span><br><span class="line">    Polygon,</span><br><span class="line">    Polyline,</span><br><span class="line">    Rect,</span><br><span class="line">    Text,</span><br><span class="line">    TSpan,</span><br><span class="line">    Defs,</span><br><span class="line">    Stop,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native-svg'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ACCEPTED_SVG_ELEMENTS = [</span><br><span class="line">    <span class="string">'svg'</span>,</span><br><span class="line">    <span class="string">'g'</span>,</span><br><span class="line">    <span class="string">'circle'</span>,</span><br><span class="line">    <span class="string">'path'</span>,</span><br><span class="line">    <span class="string">'rect'</span>,</span><br><span class="line">    <span class="string">'defs'</span>,</span><br><span class="line">    <span class="string">'line'</span>,</span><br><span class="line">    <span class="string">'linearGradient'</span>,</span><br><span class="line">    <span class="string">'radialGradient'</span>,</span><br><span class="line">    <span class="string">'stop'</span>,</span><br><span class="line">    <span class="string">'ellipse'</span>,</span><br><span class="line">    <span class="string">'polygon'</span>,</span><br><span class="line">    <span class="string">'polyline'</span>,</span><br><span class="line">    <span class="string">'text'</span>,</span><br><span class="line">    <span class="string">'tspan'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Attributes from SVG elements that are mapped directly.</span></span><br><span class="line"><span class="keyword">const</span> SVG_ATTS = [<span class="string">'viewBox'</span>, <span class="string">'width'</span>, <span class="string">'height'</span>];</span><br><span class="line"><span class="keyword">const</span> G_ATTS = [<span class="string">'id'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CIRCLE_ATTS = [<span class="string">'cx'</span>, <span class="string">'cy'</span>, <span class="string">'r'</span>];</span><br><span class="line"><span class="keyword">const</span> PATH_ATTS = [<span class="string">'d'</span>];</span><br><span class="line"><span class="keyword">const</span> RECT_ATTS = [<span class="string">'width'</span>, <span class="string">'height'</span>];</span><br><span class="line"><span class="keyword">const</span> LINE_ATTS = [<span class="string">'x1'</span>, <span class="string">'y1'</span>, <span class="string">'x2'</span>, <span class="string">'y2'</span>];</span><br><span class="line"><span class="keyword">const</span> LINEARG_ATTS = LINE_ATTS.concat([<span class="string">'id'</span>, <span class="string">'gradientUnits'</span>]);</span><br><span class="line"><span class="keyword">const</span> RADIALG_ATTS = CIRCLE_ATTS.concat([<span class="string">'id'</span>, <span class="string">'gradientUnits'</span>]);</span><br><span class="line"><span class="keyword">const</span> STOP_ATTS = [<span class="string">'offset'</span>];</span><br><span class="line"><span class="keyword">const</span> ELLIPSE_ATTS = [<span class="string">'cx'</span>, <span class="string">'cy'</span>, <span class="string">'rx'</span>, <span class="string">'ry'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TEXT_ATTS = [<span class="string">'fontFamily'</span>, <span class="string">'fontSize'</span>, <span class="string">'fontWeight'</span>, <span class="string">'textAnchor'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> POLYGON_ATTS = [<span class="string">'points'</span>];</span><br><span class="line"><span class="keyword">const</span> POLYLINE_ATTS = [<span class="string">'points'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> COMMON_ATTS = [</span><br><span class="line">    <span class="string">'fill'</span>,</span><br><span class="line">    <span class="string">'fillOpacity'</span>,</span><br><span class="line">    <span class="string">'stroke'</span>,</span><br><span class="line">    <span class="string">'strokeWidth'</span>,</span><br><span class="line">    <span class="string">'strokeOpacity'</span>,</span><br><span class="line">    <span class="string">'opacity'</span>,</span><br><span class="line">    <span class="string">'strokeLinecap'</span>,</span><br><span class="line">    <span class="string">'strokeLinejoin'</span>,</span><br><span class="line">    <span class="string">'strokeDasharray'</span>,</span><br><span class="line">    <span class="string">'strokeDashoffset'</span>,</span><br><span class="line">    <span class="string">'x'</span>,</span><br><span class="line">    <span class="string">'y'</span>,</span><br><span class="line">    <span class="string">'rotate'</span>,</span><br><span class="line">    <span class="string">'scale'</span>,</span><br><span class="line">    <span class="string">'origin'</span>,</span><br><span class="line">    <span class="string">'originX'</span>,</span><br><span class="line">    <span class="string">'originY'</span>,</span><br><span class="line">    <span class="string">'transform'</span>,</span><br><span class="line">    <span class="string">'clipPath'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ind = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fixYPosition</span>(<span class="params">y, node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node.attributes) &#123;</span><br><span class="line">        <span class="keyword">const</span> fontSizeAttr = <span class="built_in">Object</span>.keys(node.attributes).find(</span><br><span class="line">            (a) =&gt; node.attributes[a].name === <span class="string">'font-size'</span>,</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">if</span> (fontSizeAttr) &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                <span class="string">''</span> + (<span class="built_in">parseFloat</span>(y) - <span class="built_in">parseFloat</span>(node.attributes[fontSizeAttr].value))</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!node.parentNode) &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fixYPosition(y, node.parentNode);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SvgUri</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        fill: <span class="keyword">this</span>.props.fill,</span><br><span class="line">        svgXmlData: <span class="keyword">this</span>.props.svgXmlData,</span><br><span class="line">        createSVGElement: <span class="keyword">this</span>.createSVGElement.bind(<span class="keyword">this</span>),</span><br><span class="line">        obtainComponentAtts: <span class="keyword">this</span>.obtainComponentAtts.bind(<span class="keyword">this</span>),</span><br><span class="line">        inspectNode: <span class="keyword">this</span>.inspectNode.bind(<span class="keyword">this</span>),</span><br><span class="line">        fetchSVGData: <span class="keyword">this</span>.fetchSVGData.bind(<span class="keyword">this</span>),</span><br><span class="line">        isComponentMounted: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// Gets the image data from an URL or a static file</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.props.source) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.props);</span><br><span class="line">            <span class="keyword">const</span> source = resolveAssetSource(<span class="keyword">this</span>.props.source) || &#123;&#125;;</span><br><span class="line">            <span class="keyword">this</span>.fetchSVGData(source.uri);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            isComponentMounted: <span class="literal">true</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// this.isComponentMounted = true;</span></span><br><span class="line">    &#125;</span><br><span class="line">    UNSAFE_componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nextProps.source) &#123;</span><br><span class="line">            <span class="keyword">const</span> source = resolveAssetSource(nextProps.source) || &#123;&#125;;</span><br><span class="line">            <span class="keyword">const</span> oldSource = resolveAssetSource(<span class="keyword">this</span>.props.source) || &#123;&#125;;</span><br><span class="line">            <span class="keyword">if</span> (source.uri !== oldSource.uri) &#123;</span><br><span class="line">                <span class="keyword">this</span>.fetchSVGData(source.uri);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nextProps.svgXmlData !== <span class="keyword">this</span>.props.svgXmlData) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123; <span class="attr">svgXmlData</span>: nextProps.svgXmlData &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nextProps.fill !== <span class="keyword">this</span>.props.fill) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123; <span class="attr">fill</span>: nextProps.fill &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillUnmount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.isComponentMounted = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> fetchSVGData(uri) &#123;</span><br><span class="line">        <span class="keyword">let</span> responseXML = <span class="literal">null</span>,</span><br><span class="line">            error = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(uri);</span><br><span class="line">            responseXML = <span class="keyword">await</span> response.text();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            error = e;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'ERROR SVG'</span>, e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.isComponentMounted) &#123;</span><br><span class="line">                <span class="keyword">this</span>.setState(&#123; <span class="attr">svgXmlData</span>: responseXML &#125;, () =&gt; &#123;</span><br><span class="line">                    <span class="keyword">const</span> &#123; onLoad &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">                    <span class="keyword">if</span> (onLoad &amp;&amp; !error) &#123;</span><br><span class="line">                        onLoad();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> responseXML;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remove empty strings from children array</span></span><br><span class="line">    trimElementChilden(children) &#123;</span><br><span class="line">        <span class="keyword">for</span> (child <span class="keyword">of</span> children) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> child === <span class="string">'string'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (child.trim().length === <span class="number">0</span>)</span><br><span class="line">                    children.splice(children.indexOf(child), <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createSVGElement(node, childs) &#123;</span><br><span class="line">        <span class="keyword">this</span>.trimElementChilden(childs);</span><br><span class="line">        <span class="keyword">let</span> componentAtts = &#123;&#125;;</span><br><span class="line">        <span class="keyword">const</span> i = ind++;</span><br><span class="line">        <span class="keyword">switch</span> (node.nodeName) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'svg'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, SVG_ATTS);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.props.width) &#123;</span><br><span class="line">                    componentAtts.width = <span class="keyword">this</span>.props.width;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.props.height) &#123;</span><br><span class="line">                    componentAtts.height = <span class="keyword">this</span>.props.height;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Svg key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Svg&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'g':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, G_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;G key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>G&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'path'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, PATH_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Path key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Path&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'circle':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, CIRCLE_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;Circle key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Circle&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'rect'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, RECT_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Rect key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Rect&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'line':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, LINE_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;Line key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Line&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'defs'</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Defs</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span>&#123;childs&#125;<span class="tag">&lt;/<span class="name">Defs</span>&gt;</span></span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'linearGradient'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, LINEARG_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;LinearGradient key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/LinearGradient&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'radialGradient':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, RADIALG_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;RadialGradient key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>RadialGradient&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'stop'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, STOP_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Stop key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Stop&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'ellipse':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, ELLIPSE_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;Ellipse key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Ellipse&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'polygon'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, POLYGON_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Polygon key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Polygon&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'polyline':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, POLYLINE_ATTS);</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;Polyline key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Polyline&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'text'</span>:</span><br><span class="line">                componentAtts = <span class="keyword">this</span>.obtainComponentAtts(node, TEXT_ATTS);</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    &lt;Text key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span><br><span class="line">                        &#123;childs&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                );</span></span><br><span class="line"><span class="regexp">            case 'tspan':</span></span><br><span class="line"><span class="regexp">                componentAtts = this.obtainComponentAtts(node, TEXT_ATTS);</span></span><br><span class="line"><span class="regexp">                if (componentAtts.y) &#123;</span></span><br><span class="line"><span class="regexp">                    componentAtts.y = fixYPosition(componentAtts.y, node);</span></span><br><span class="line"><span class="regexp">                &#125;</span></span><br><span class="line"><span class="regexp">                return (</span></span><br><span class="line"><span class="regexp">                    &lt;TSpan key=&#123;i&#125; &#123;...componentAtts&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;childs&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>TSpan&gt;</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    obtainComponentAtts(&#123; attributes &#125;, enabledAttributes) &#123;</span><br><span class="line">        <span class="keyword">const</span> styleAtts = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.state.fill &amp;&amp; <span class="keyword">this</span>.props.fillAll) &#123;</span><br><span class="line">            styleAtts.fill = <span class="keyword">this</span>.state.fill;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Array</span>.from(attributes).forEach(<span class="function">(<span class="params">&#123; nodeName, nodeValue &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">Object</span>.assign(</span><br><span class="line">                styleAtts,</span><br><span class="line">                utils.transformStyle(&#123;</span><br><span class="line">                    nodeName,</span><br><span class="line">                    nodeValue,</span><br><span class="line">                    fillProp: <span class="keyword">this</span>.state.fill,</span><br><span class="line">                &#125;),</span><br><span class="line">            );</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> componentAtts = <span class="built_in">Array</span>.from(attributes)</span><br><span class="line">            .map(utils.camelCaseNodeName)</span><br><span class="line">            .map(utils.removePixelsFromNodeValue)</span><br><span class="line">            .filter(utils.getEnabledAttributes(enabledAttributes.concat(COMMON_ATTS)))</span><br><span class="line">            .reduce(<span class="function">(<span class="params">acc, &#123; nodeName, nodeValue &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">                acc[nodeName] =</span><br><span class="line">                    <span class="keyword">this</span>.state.fill &amp;&amp; nodeName === <span class="string">'fill'</span> &amp;&amp; nodeValue !== <span class="string">'none'</span></span><br><span class="line">                        ? <span class="keyword">this</span>.state.fill</span><br><span class="line">                        : nodeValue;</span><br><span class="line">                <span class="keyword">return</span> acc;</span><br><span class="line">            &#125;, &#123;&#125;);</span><br><span class="line">        <span class="built_in">Object</span>.assign(componentAtts, styleAtts);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> componentAtts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    inspectNode(node) &#123;</span><br><span class="line">        <span class="comment">// Only process accepted elements</span></span><br><span class="line">        <span class="keyword">if</span> (!ACCEPTED_SVG_ELEMENTS.includes(node.nodeName)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">key</span>=<span class="string">&#123;node&#125;</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        // Process the xml node</span></span><br><span class="line"><span class="xml">        const arrayElements = [];</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        // if have children process them.</span></span><br><span class="line"><span class="xml">        // Recursive function.</span></span><br><span class="line"><span class="xml">        if (node.childNodes &amp;&amp; node.childNodes.length &gt; 0) &#123;</span></span><br><span class="line"><span class="xml">            for (let i = 0; i <span class="tag">&lt; <span class="attr">node.childNodes.length</span>; <span class="attr">i</span>++) &#123;</span></span></span><br><span class="line"><span class="xml">                const isTextValue = node.childNodes[i].nodeValue;</span></span><br><span class="line"><span class="xml">                if (isTextValue) &#123;</span></span><br><span class="line"><span class="xml">                    arrayElements.push(node.childNodes[i].nodeValue);</span></span><br><span class="line"><span class="xml">                &#125; else &#123;</span></span><br><span class="line"><span class="xml">                    const nodo = this.inspectNode(node.childNodes[i]);</span></span><br><span class="line"><span class="xml">                    if (nodo != null) &#123;</span></span><br><span class="line"><span class="xml">                        arrayElements.push(nodo);</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                &#125;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        return this.createSVGElement(node, arrayElements);</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">    render() &#123;</span></span><br><span class="line"><span class="xml">        try &#123;</span></span><br><span class="line"><span class="xml">            if (this.state.svgXmlData == null) &#123;</span></span><br><span class="line"><span class="xml">                return null;</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            const inputSVG = this.state.svgXmlData</span></span><br><span class="line"><span class="xml">                .substring(</span></span><br><span class="line">                    this.state.svgXmlData.indexOf('&lt;svg '),</span><br><span class="line"><span class="xml">                    this.state.svgXmlData.indexOf('<span class="tag">&lt;/<span class="name">svg</span>&gt;</span>') + 6,</span></span><br><span class="line"><span class="xml">                )</span></span><br><span class="line"><span class="xml">                .replace(/<span class="tag">&lt;<span class="name">!-(.*?)-</span>&gt;</span>/g, '');</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            const doc = new xmldom.DOMParser().parseFromString(inputSVG);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            const rootSVG = this.inspectNode(doc.childNodes[0]);</span></span><br><span class="line"></span><br><span class="line"><span class="xml">            return <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;this.props.style&#125;</span>&gt;</span>&#123;rootSVG&#125;<span class="tag">&lt;/<span class="name">View</span>&gt;</span>;</span></span><br><span class="line"><span class="xml">        &#125; catch (e) &#123;</span></span><br><span class="line"><span class="xml">            console.error('ERROR SVG', e);</span></span><br><span class="line"><span class="xml">            return null;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">SvgUri.propTypes = &#123;</span></span><br><span class="line"><span class="xml">    style: PropTypes.object,</span></span><br><span class="line"><span class="xml">    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),</span></span><br><span class="line"><span class="xml">    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),</span></span><br><span class="line"><span class="xml">    svgXmlData: PropTypes.string,</span></span><br><span class="line"><span class="xml">    source: PropTypes.any,</span></span><br><span class="line"><span class="xml">    fill: PropTypes.string,</span></span><br><span class="line"><span class="xml">    onLoad: PropTypes.func,</span></span><br><span class="line"><span class="xml">    fillAll: PropTypes.bool,</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">module.exports = SvgUri;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// svgUriUtils.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> camelCase = <span class="function"><span class="params">value</span> =&gt;</span> value.replace(<span class="regexp">/-([a-z])/g</span>, g =&gt; g[<span class="number">1</span>].toUpperCase());</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> camelCaseNodeName = <span class="function">(<span class="params">&#123; nodeName, nodeValue &#125;</span>) =&gt;</span> (&#123; <span class="attr">nodeName</span>: camelCase(nodeName), nodeValue &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removePixelsFromNodeValue = <span class="function">(<span class="params">&#123; nodeName, nodeValue &#125;</span>) =&gt;</span> (&#123; nodeName, <span class="attr">nodeValue</span>: nodeValue.replace(<span class="string">'px'</span>, <span class="string">''</span>) &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> transformStyle = <span class="function">(<span class="params">&#123; nodeName, nodeValue, fillProp &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nodeName === <span class="string">'style'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> nodeValue.split(<span class="string">';'</span>)</span><br><span class="line">            .reduce(<span class="function">(<span class="params">acc, attribute</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> [property, value] = attribute.split(<span class="string">':'</span>);</span><br><span class="line">                <span class="keyword">if</span> (property == <span class="string">""</span>)</span><br><span class="line">                    <span class="keyword">return</span> acc;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">return</span> &#123; ...acc, [camelCase(property)]: fillProp &amp;&amp; property === <span class="string">'fill'</span> ? fillProp : value &#125;;</span><br><span class="line">            &#125;, &#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getEnabledAttributes = <span class="function"><span class="params">enabledAttributes</span> =&gt;</span> <span class="function">(<span class="params">&#123; nodeName &#125;</span>) =&gt;</span> enabledAttributes.includes(camelCase(nodeName));</span><br></pre></td></tr></table></figure><font color="red">注意两个文件在同级目录下</font><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/09/f1hYh8.png" alt="f1hYh8.png"></p><p>7.最后我们封装一个<code>svg</code>组件出来，这个百度可以找到，我这里是其中一份比较简单的，你可以自己定制，<strong>唯一要注意的就是两个导入的文件，第一个是刚才我们到github下载并改造的index文件，命名自己喜欢，第二个导入就是我们使用脚本生成的svg的js文件合集</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> SvgUri <span class="keyword">from</span> <span class="string">'@utils/svgUri.js'</span>;</span><br><span class="line"><span class="keyword">import</span> svgs <span class="keyword">from</span> <span class="string">'@icons/Svgs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MSvg</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; color, size, style, icon &#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> svgXmlData = svgs[icon];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!svgXmlData) &#123;</span><br><span class="line">            <span class="keyword">let</span> err_msg = <span class="string">`没有"<span class="subst">$&#123;icon&#125;</span>"这个icon，请下载最新的icomoo并 npm run build-js`</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err_msg);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;SvgUri</span><br><span class="line">                width=&#123;size&#125;</span><br><span class="line">                height=&#123;size&#125;</span><br><span class="line">                svgXmlData=&#123;svgXmlData&#125;</span><br><span class="line">                fill=&#123;color&#125;</span><br><span class="line">                style=&#123;style&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8.最后在任意组件导入SVG并使用即可，这里要注意的地方就是，icon填入的字符串是我们用脚本生成的js中导出对象的key值（自己可以打开生成的脚本文件查看一下，建议先用vscode格式化一下，不然很乱看不出什么东西），其实就是svg的文件名字（这里我的是仓库管理），还有就是SVG是导入我们自己封装的不要导入react-native-svg的，切记。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MSvg <span class="keyword">from</span> <span class="string">'@components/mSvg'</span>;</span><br><span class="line"></span><br><span class="line">&lt;MSvg icon=<span class="string">"all-icon"</span> size=<span class="string">"30"</span> key=&#123;item.id&#125; color=<span class="string">"red"</span> /&gt;</span><br></pre></td></tr></table></figure><h3 id="接入高德地图（react-native-amap3d）"><a href="#接入高德地图（react-native-amap3d）" class="headerlink" title="接入高德地图（react-native-amap3d）"></a>接入高德地图（react-native-amap3d）</h3><p><code>react-native-amap3d</code>需要搭配<code>react-native-amap-geolocation</code>，该组件作者于2021年7月28日发布暂停维护公告，所以在引入项目时请三思，在此只记录如何集成并使用该组件</p><p>官网：<a href="https://github.com/qiuxiang/react-native-amap3d" target="_blank" rel="noopener">https://github.com/qiuxiang/react-native-amap3d</a></p><p>相关项目推荐：</p><ul><li><a href="https://github.com/qiuxiang/react-native-baidumap-sdk" target="_blank" rel="noopener">react-native-baidumap-sdk（百度地图 SDK）</a></li><li><a href="https://github.com/qiuxiang/react-native-amap-geolocation" target="_blank" rel="noopener">react-native-amap-geolocation（高德地图定位模块）</a></li></ul><p>接口文档：<a href="https://qiuxiang.github.io/react-native-amap3d/api/globals.html" target="_blank" rel="noopener">https://qiuxiang.github.io/react-native-amap3d/api/globals.html</a></p><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-amap3d react-native-amap-geolocation -S</span><br></pre></td></tr></table></figure><h4 id="高德sdk环境搭建"><a href="#高德sdk环境搭建" class="headerlink" title="高德sdk环境搭建"></a>高德sdk环境搭建</h4><p><strong>1.申请高德开发账号，并进入高德开放平台</strong></p><p><a href="https://console.amap.com/dev/index" target="_blank" rel="noopener">首页 | 高德控制台 (amap.com)</a></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/12/f0FrT0.png" alt="f0F3wt.png"></p><p><strong>2.创建应用</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/12/f0ke7q.png" alt="创建应用"></p><p><strong>创建应用后，添加对应的应用key（此处ios与andorid都应添加）</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/12/f0kCh8.png" alt="添加key"></p><p><strong>3.获取发布版/调试版<code>SHA1</code>签名证书</strong></p><ul><li>开发<code>SHA1</code>key在<code>andorid/app</code>目录下，进入该目录你会发现目录下存在<code>debug.keystore</code>,我们在该目录下通过cmd输入以下指令便可获取调试版<code>SHA1</code>，默认密码为: andorid</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -v -list -keystore debug.keystore</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/12/f0ArGT.png" alt="调试版SHA1"></p><ul><li>发布版的SHA1证书需要我们自己生成，可以通过JRE环境中的keytool命令生成，指令如下</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -alias testalias -keyalg RSA -keysize 2048 -validity 36500 -keystore test.keystore</span><br></pre></td></tr></table></figure><blockquote><p>testalias是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字<br>test.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</p></blockquote><p>回车后会提示：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://upload-images.jianshu.io/upload_images/54923-10ebbc0c402ec7cb.png?imageMogr2/auto-orient/strip|imageView2/2/w/1156/format/webp" alt="获取证书"></p><ul><li>生成完成后便可以查看证书信息，命令如下</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore test.keystore  </span><br><span class="line">Enter keystore password: //输入密码，回车</span><br></pre></td></tr></table></figure><ul><li>会输出如下格式信息</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">D:</span>\&gt;keytool -list -v -keystore test.keystore</span><br><span class="line">输入密钥库口令<span class="symbol">:</span></span><br><span class="line">密钥库类型: PKCS12</span><br><span class="line">密钥库提供方: SUN</span><br><span class="line"></span><br><span class="line">您的密钥库包含 <span class="number">1</span> 个条目</span><br><span class="line"></span><br><span class="line">别名: testalias</span><br><span class="line">创建日期: <span class="number">2021</span>年<span class="number">8</span>月<span class="number">3</span>日</span><br><span class="line">条目类型: PrivateKeyEntry</span><br><span class="line">证书链长度: <span class="number">1</span></span><br><span class="line">证书[<span class="number">1</span>]<span class="symbol">:</span></span><br><span class="line">所有者: CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown</span><br><span class="line">发布者: CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown</span><br><span class="line">序列号: <span class="number">285</span>ee26ccd06665f</span><br><span class="line">生效时间: Tue Nov <span class="number">03</span> <span class="number">14</span><span class="symbol">:</span><span class="number">36</span><span class="symbol">:</span><span class="number">27</span> CST <span class="number">2020</span>, 失效时间: Thu Oct <span class="number">10</span> <span class="number">14</span><span class="symbol">:</span><span class="number">36</span><span class="symbol">:</span><span class="number">27</span> CST <span class="number">2120</span></span><br><span class="line">证书指纹<span class="symbol">:</span></span><br><span class="line">         <span class="symbol">SHA1:</span> <span class="number">72</span><span class="symbol">:</span><span class="number">9</span><span class="symbol">C:</span><span class="symbol">BC:</span><span class="symbol">A5:</span><span class="number">58</span><span class="symbol">:D4</span><span class="symbol">:</span><span class="number">6</span><span class="symbol">B:</span><span class="number">5</span><span class="symbol">D:</span><span class="number">5</span><span class="symbol">C:</span><span class="number">46</span><span class="symbol">:F3</span><span class="symbol">:ED</span><span class="symbol">:</span><span class="number">8</span><span class="symbol">B:</span><span class="number">99</span><span class="symbol">:</span><span class="number">9</span><span class="symbol">C:</span><span class="number">16</span><span class="symbol">:</span><span class="number">01</span><span class="symbol">:FE</span><span class="symbol">:</span><span class="number">48</span><span class="symbol">:</span><span class="number">80</span></span><br><span class="line">         <span class="symbol">SHA256:</span> <span class="number">73</span><span class="symbol">:BE</span><span class="symbol">:</span><span class="number">93</span><span class="symbol">:FB</span><span class="symbol">:EA</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">D:</span><span class="number">00</span><span class="symbol">:</span><span class="number">39</span><span class="symbol">:</span><span class="number">2</span><span class="symbol">C:</span><span class="number">22</span><span class="symbol">:</span><span class="number">3</span><span class="symbol">F:</span><span class="number">75</span><span class="symbol">:</span><span class="number">04</span><span class="symbol">:</span><span class="number">1</span><span class="symbol">F:</span><span class="number">5</span><span class="symbol">C:</span>0<span class="symbol">A:</span><span class="symbol">AD:</span><span class="symbol">C3:</span><span class="number">67</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">05</span><span class="symbol">:C9</span><span class="symbol">:</span><span class="number">7</span><span class="symbol">F:</span><span class="number">4</span><span class="symbol">E:</span><span class="symbol">AB:</span>0<span class="symbol">E:</span><span class="number">62</span><span class="symbol">:F5</span><span class="symbol">:</span><span class="number">5</span><span class="symbol">D:</span><span class="number">2</span><span class="symbol">C:</span><span class="number">60</span><span class="symbol">:CB</span></span><br><span class="line">签名算法名称: SHA256withRSA</span><br><span class="line">主体公共密钥算法: <span class="number">2048</span> 位 RSA 密钥</span><br><span class="line">版本: <span class="number">3</span></span><br><span class="line"></span><br><span class="line">扩展<span class="symbol">:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1: ObjectId: 2.5.29.14 Criticality=false</span></span><br><span class="line">SubjectKeyIdentifier [</span><br><span class="line">KeyIdentifier [</span><br><span class="line"><span class="number">0000</span>: <span class="number">6</span>D B7 FA BA <span class="number">7</span>E <span class="number">94</span> B2 <span class="number">97</span>   BD B7 <span class="number">5</span>C <span class="number">12</span> E7 F4 <span class="number">20</span> <span class="number">3</span>F  m.........\... ?</span><br><span class="line"><span class="number">0010</span>: 0D <span class="number">1</span>B <span class="number">00</span> <span class="number">6</span>A                                        ...j</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">*******************************************</span><br><span class="line">*******************************************</span><br></pre></td></tr></table></figure><p>其中证书指纹信息（Certificate fingerprints）：</p><ul><li>MD5 证书的MD5指纹信息（安全码MD5）</li><li>SHA1 证书的SHA1指纹信息（安全码SHA1）</li><li>SHA256 证书的SHA256指纹信息（安全码SHA245）</li></ul><p>4.<font color="red">需要将我们生成的key添加到android应用程序中</font></p><p>找到<code>andorid/app/build.gradle</code>目录，在 <code>signingConfigs</code>节点下添加如下代码</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> release &#123;</span><br><span class="line">      storeFile file(<span class="string">'证书文件名'</span>)</span><br><span class="line">      storePassword <span class="string">'证书密钥口令'</span></span><br><span class="line">      keyAlias <span class="string">'证书别名'</span></span><br><span class="line">      keyPassword <span class="string">'证书密钥口令'</span>      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.在<code>android/app/src/main/AndroidManifest.xml</code>文件中添加你在高德开放平台申请的<code>app key</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span> <span class="attr">android:name</span>=<span class="string">".MainApplication"</span> <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span> <span class="attr">android:icon</span>=<span class="string">"@mipmap/ic_launcher"</span> <span class="attr">android:roundIcon</span>=<span class="string">"@mipmap/ic_launcher_round"</span> <span class="attr">android:allowBackup</span>=<span class="string">"false"</span> <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"com.amap.api.v2.apikey"</span>              <span class="attr">android:value</span>=<span class="string">"be67f615a7b996b3995925f56cdb25fe"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>6.<strong>通过gradle的方式将高德<code>sdk</code>集成进项目中</strong></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">  ....</span><br><span class="line">  dependencies &#123;</span><br><span class="line">    implementation fileTree(<span class="string">dir:</span> <span class="string">'libs'</span>, <span class="string">include:</span> [<span class="string">'*.jar'</span>])</span><br><span class="line">    compile <span class="string">'com.amap.api:3dmap:5.0.0'</span></span><br><span class="line">    compile <span class="string">'com.amap.api:location:3.3.0'</span></span><br><span class="line">    compile <span class="string">'com.amap.api:search:5.0.0'</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Text, View &#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"><span class="keyword">import</span> &#123; MapView &#125; <span class="keyword">from</span> <span class="string">"react-native-amap3d"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; PermissionsAndroid &#125; <span class="keyword">from</span> <span class="string">"react-native"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; init, Geolocation, addLocationListener, start, stop, setLocatingWithReGeocode &#125; <span class="keyword">from</span> <span class="string">"react-native-amap-geolocation"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MMap</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    state = &#123;</span><br><span class="line">        latitude: <span class="number">29.788517</span>,</span><br><span class="line">        longitude: <span class="number">119.696091</span>,</span><br><span class="line">        latitudeDelta: <span class="number">0.01</span>,</span><br><span class="line">        longitudeDelta: <span class="number">0.01</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.ref = React.createRef();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> getCurrentPosition() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'开始定位'</span>);</span><br><span class="line">            Geolocation.getCurrentPosition(<span class="function">(<span class="params">&#123; coords, location &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// console.log(location);</span></span><br><span class="line">                resolve(coords);</span><br><span class="line">            &#125;, reject);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> geolocationInit() &#123;</span><br><span class="line">        <span class="keyword">if</span> (Platform.OS === <span class="string">"android"</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> granted = <span class="keyword">await</span> PermissionsAndroid.request(PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION);</span><br><span class="line">            <span class="keyword">if</span> (granted === PermissionsAndroid.RESULTS.GRANTED) &#123;</span><br><span class="line">                <span class="comment">//设置高德key</span></span><br><span class="line">                <span class="keyword">await</span> init(&#123;</span><br><span class="line">                    <span class="comment">//   ios:'',</span></span><br><span class="line">                    android: <span class="string">"be67f615a7b996b3995925f56cdb25fe"</span>   <span class="comment">// 传入AMAP_KEY</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="keyword">const</span> &#123; latitude, longitude &#125; = <span class="keyword">await</span> <span class="keyword">this</span>.getCurrentPosition();</span><br><span class="line">                <span class="built_in">console</span>.log(latitude);</span><br><span class="line">                <span class="built_in">console</span>.log(longitude);</span><br><span class="line">                <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        latitude,</span><br><span class="line">                        longitude,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 手动开启ios逆地理编码</span></span><br><span class="line">            setLocatingWithReGeocode(<span class="literal">true</span>)</span><br><span class="line">            <span class="keyword">this</span>.getCurrentPosition()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.geolocationInit();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; latitude, longitude, latitudeDelta, longitudeDelta &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">         </span><br><span class="line">            &lt;MapView</span><br><span class="line">                style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125;</span><br><span class="line">                <span class="comment">// 显示边界</span></span><br><span class="line">                region=&#123;&#123;</span><br><span class="line">                    latitude,</span><br><span class="line">                    longitude,</span><br><span class="line">                    <span class="comment">// 系数比</span></span><br><span class="line">                    latitudeDelta,</span><br><span class="line">                    longitudeDelta,</span><br><span class="line">                &#125;&#125;</span><br><span class="line">                <span class="comment">// 搭配coordinate坐标</span></span><br><span class="line">                <span class="comment">// zoomLevel=&#123;18&#125;</span></span><br><span class="line">                <span class="comment">// tilt=&#123;45&#125;</span></span><br><span class="line">                showsIndoorMap</span><br><span class="line">            /&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体使用可以参考官方文档</p><h3 id="react-native-modal（模态框组件）"><a href="#react-native-modal（模态框组件）" class="headerlink" title="react-native-modal（模态框组件）"></a>react-native-modal（模态框组件）</h3><p>1.引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-modal -S</span><br></pre></td></tr></table></figure><p>2.使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">RosterScreen</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    state = &#123;</span><br><span class="line">        collects: [</span><br><span class="line">            &#123; <span class="attr">name</span>: <span class="string">'桐庐一部'</span>, <span class="attr">isCollect</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">name</span>: <span class="string">'杭州下沙一部'</span>, <span class="attr">isCollect</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">        ],</span><br><span class="line">        ModalIntroToggle: <span class="literal">false</span>,   <span class="comment">// 模态框  默认false不显示</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 模态框渲染</span></span><br><span class="line">    ModalIntroToggleFunWrap = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Modal isVisible=&#123;<span class="keyword">this</span>.state.ModalIntroToggle&#125; backdropOpacity=&#123;<span class="number">0.5</span>&#125;</span><br><span class="line">                style=&#123;&#123; <span class="attr">margin</span>: <span class="number">0</span>, <span class="attr">alignItems</span>: <span class="string">'flex-start'</span>, <span class="attr">position</span>:<span class="string">'relative'</span> &#125;&#125; onBackdropPress=&#123;() =&gt; <span class="keyword">this</span>.setState(&#123; <span class="attr">ModalIntroToggle</span>: <span class="literal">false</span> &#125;)&#125;&gt;</span><br><span class="line">                &lt;View style=&#123;&#123;<span class="attr">position</span>:<span class="string">'absolute'</span>,<span class="attr">bottom</span>:<span class="number">0</span>,<span class="attr">left</span>:<span class="number">0</span>,<span class="attr">width</span>:<span class="number">350</span>,<span class="attr">height</span>:<span class="number">400</span>,<span class="attr">backgroundColor</span>:<span class="string">'white'</span>,<span class="attr">borderRadius</span>:<span class="number">10</span>,<span class="attr">overflow</span>:<span class="string">'hidden'</span>,<span class="attr">padding</span>:<span class="number">10</span> &#125;&#125;&gt;</span><br><span class="line">                    &lt;TouchableOpacity style=&#123;&#123;<span class="attr">backgroundColor</span>:<span class="string">'white'</span>&#125;&#125; onPress=&#123;<span class="keyword">this</span>.toggleModel&#125;&gt;</span><br><span class="line">                        &lt;MText&gt;模态框关闭按钮&lt;<span class="regexp">/MText&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">                &lt;TextInput style=&#123;&#123;<span class="attr">width</span>:<span class="string">"100%"</span>,<span class="attr">backgroundColor</span>:<span class="string">'white'</span>,<span class="attr">marginTop</span>:<span class="number">20</span>,<span class="attr">backgroundColor</span>:<span class="string">'#ccc'</span>,<span class="attr">height</span>:<span class="number">50</span>&#125;&#125;/&gt;</span><br><span class="line">                &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>Modal&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    toggleModel=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    ModalIntroToggle: !<span class="keyword">this</span>.state.ModalIntroToggle</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; collects, ModalIntroToggle &#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125;&gt;</span><br><span class="line">                &lt;Header toggleModel=&#123;<span class="keyword">this</span>.toggleModel&#125;/&gt;</span><br><span class="line">                &lt;ScrollView style=&#123;styles.container&#125;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;View style=&#123;[styles.baseContainer]&#125;&gt;</span><br><span class="line">                        &lt;MText&gt;收藏网点&lt;<span class="regexp">/MText&gt;</span></span><br><span class="line"><span class="regexp">                        &#123;</span></span><br><span class="line"><span class="regexp">                            collects.map(item =&gt;</span></span><br><span class="line"><span class="regexp">                                &lt;CollectItem key=&#123;item.name&#125; item=&#123;item&#125; /</span>&gt;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;View style=&#123;styles.baseContainer&#125;&gt;</span></span><br><span class="line"><span class="regexp">                   </span></span><br><span class="line"><span class="regexp">                    &lt;/</span>View&gt;</span><br><span class="line">                    &#123;<span class="keyword">this</span>.ModalIntroToggleFunWrap()&#125;</span><br><span class="line">                    &lt;View style=&#123;styles.baseContainer&#125;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>ScrollView&gt;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>3.modal 的常用属性名props</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/08/27/hMbW7V.png" alt="hMbW7V.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">style=&#123;&#123;<span class="attr">margin</span>:<span class="number">0</span>&#125;&#125;</span><br><span class="line">animationIn</span><br><span class="line">animationOut</span><br><span class="line">animationInTiming</span><br><span class="line">animationOutTiming</span><br><span class="line">backdropColor</span><br><span class="line">backdropOpacity</span><br><span class="line">onBackButtonPress</span><br><span class="line">onBackdropPress</span><br><span class="line">onModalHide</span><br><span class="line">onModalShow</span><br></pre></td></tr></table></figure><p>事件的使用方式：固定写法<code>isVisible</code>是你自己声明的变量</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onBackdropPress=&#123;() =&gt; <span class="keyword">this</span>.setState(&#123; <span class="attr">isVisible</span>: <span class="literal">false</span> &#125;)&#125;</span><br></pre></td></tr></table></figure><h6 id="我无法一个接一个地显示多个模态"><a href="#我无法一个接一个地显示多个模态" class="headerlink" title="我无法一个接一个地显示多个模态"></a>我无法一个接一个地显示多个模态</h6><p>不幸的是，现在react-native不允许同时显示多个模态。这意味着react-native-modal，如果你想在关闭之后立即显示一个新模态，你必须首先通过使用<code>onModalHide</code>来确保你的结束完成其隐藏动画的模态。下面是用法<br> 我把<code>isVisible</code>改成了你自己声明的变量<code>ModalGroupShopIntroToggle</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Modal </span><br><span class="line">       onModalHide=&#123;() =&gt; <span class="keyword">this</span>.setState(&#123; <span class="attr">ModalGroupShopIntroToggle</span>: <span class="literal">true</span> &#125;)&#125;&gt;</span><br><span class="line">&lt;<span class="regexp">/Modal&gt;</span></span><br></pre></td></tr></table></figure><p>官网：<a href="https://github.com/react-native-modal/react-native-modal" target="_blank" rel="noopener">react-native-modal/react-native-modal: An enhanced, animated, customizable Modal for React Native. (github.com)</a></p><h2 id="Common-plugin"><a href="#Common-plugin" class="headerlink" title="Common plugin"></a>Common plugin</h2><h3 id="babel-plugin-module-resolver（路径别名配置）"><a href="#babel-plugin-module-resolver（路径别名配置）" class="headerlink" title="babel-plugin-module-resolver（路径别名配置）"></a>babel-plugin-module-resolver（路径别名配置）</h3><p><code>babel-plugin-module-resolver</code>主要用于设置项目的路径别名</p><p>1.安装：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-plugin-<span class="built_in">module</span>-resolver --dev</span><br></pre></td></tr></table></figure><p>2.使用：</p><p>在项目根目录的<code>babel.config.js</code>中配置别名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [<span class="string">'module:metro-react-native-babel-preset'</span>],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="built_in">require</span>.resolve(<span class="string">'babel-plugin-module-resolver'</span>),</span><br><span class="line">      &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">          <span class="string">'@icons'</span>: <span class="string">'./src/components/icons'</span>,</span><br><span class="line">          <span class="string">'@components'</span>: <span class="string">'./src/components/components'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>注意：</p><p>如果配置了 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fbenmosher%2Feslint-plugin-import" target="_blank" rel="noopener">eslint-plugin-import</a>  的<code>eslint</code>插件的规则，这个插件因为不识别<code>@icons</code>这样的路径别名而会报错，这时候你可以装一个 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Ftleunen%2Feslint-import-resolver-babel-module%23usage" target="_blank" rel="noopener">eslint-import-resolver-babel-module</a> 来避免别名路径被 <code>eslint-plugin-import</code> 报错;</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;本文主要针对，react-native日常开发中所遇到小坑、大坑、天坑，通过此文你可以避免走弯路（至少少走我走过的弯路），提高你的开发效率，本着分享开源的原则，给广大刚入门react-native的小白同志们送温暖。主要内容如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Common components（常用第三方组件集成）&lt;/li&gt;
&lt;li&gt;Common plug （常用插件集成）&lt;/li&gt;
&lt;li&gt;Common  Issues（常见开发问题）&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React-Native" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React-Native/"/>
    
    
      <category term="踩坑" scheme="https://liyi-up.top/tags/%E8%B8%A9%E5%9D%91/"/>
    
  </entry>
  
  <entry>
    <title>React-navgation</title>
    <link href="https://liyi-up.top/2021/07/27/React-navgation/"/>
    <id>https://liyi-up.top/2021/07/27/React-navgation/</id>
    <published>2021-07-27T05:27:56.000Z</published>
    <updated>2021-08-11T05:51:00.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>React Navigation是React Native是目前最主流的屏幕页面切换的导航方案。React Navigation 5.x版本是目前最新的稳定版本，相对于老版本的配置方式更接近React Router，更好理解。<br> reactNative0.60.0以上的版本会省去很多配置，建议使用0.6以上版本<br> <code>npx react-native init demo --version 0.60.0 //版本号自行定义</code></p><a id="more"></a><h2 id="依赖安装"><a href="#依赖安装" class="headerlink" title="依赖安装"></a>依赖安装</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装react-navigation</span></span><br><span class="line">yarn add <span class="meta">@react</span>-navigation/<span class="keyword">native</span></span><br><span class="line"><span class="comment">// 安装依赖库</span></span><br><span class="line">yarn add react-<span class="keyword">native</span>-gesture-handler react-<span class="keyword">native</span>-reanimated react-<span class="keyword">native</span>-screens react-<span class="keyword">native</span>-safe-area-context <span class="meta">@react</span>-<span class="keyword">native</span>-community/masked-view</span><br></pre></td></tr></table></figure><p><strong>注意：链接原生库(0.60版本以上的跳过此步骤)</strong><br> React Native 0.60及更高版本开始，会自动链接，如果你版本是0.60及以上，这一步就可以跳过；而React Native 0.59以及更低版本则需要手动链接，安装react-native link。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">react-<span class="keyword">native</span> link react-<span class="keyword">native</span>-reanimated</span><br><span class="line">react-<span class="keyword">native</span> link react-<span class="keyword">native</span>-gesture-handler</span><br><span class="line">react-<span class="keyword">native</span> link react-<span class="keyword">native</span>-screens</span><br><span class="line">react-<span class="keyword">native</span> link react-<span class="keyword">native</span>-safe-area-context</span><br></pre></td></tr></table></figure><p><strong>安装navigator库</strong><br> 有三种导航模式可以选，分别是StackNavigator栈导航、TabNavigator标签导航、DrawerNavigator抽屉导航，下面会分别说一下怎么使用。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//StackNavigator</span></span><br><span class="line">npm install <span class="meta">@react</span>-navigation/stack</span><br><span class="line"><span class="comment">//TabNavigator</span></span><br><span class="line">npm install <span class="meta">@react</span>-navigation/bottom-tabs</span><br><span class="line"><span class="comment">//DrawerNavigator</span></span><br><span class="line">npm install <span class="meta">@react</span>-navigation/drawer</span><br></pre></td></tr></table></figure><h2 id="StackNavigator导航"><a href="#StackNavigator导航" class="headerlink" title="StackNavigator导航"></a>StackNavigator导航</h2><p><code>StackNavigator</code>是<code>react-navigation</code>下的一个导航组件，采用<font color="red">栈结构（Stack     ）</font>储应用的所有页面，为你的应用提供一种切换屏幕的方式，新创建的屏幕放置在栈顶。</p><p><code>StackNavigator</code>被配置为在iOS和Android上有类似的外观和体验：iOS上新页面从右边划入，Android为从底部淡入。iOS上StackNavigator还可以配置为modal风格，新页面从底部划入。</p><h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><p>1.引入组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; NavigationContainer &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/native'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStackNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/stack'</span>;</span><br></pre></td></tr></table></figure><p>2.创建栈导航</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Stack = createStackNavigator();</span><br></pre></td></tr></table></figure><p>3.将需要进行屏幕切换的组件放入栈导航中</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyStack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Stack.Navigator initialRouteName=<span class="string">'Home'</span> screenOptions=&#123;screenOptions&#125; &gt;</span><br><span class="line">            &lt;Stack.Screen name=<span class="string">"Home"</span> component=&#123;Home&#125;</span><br><span class="line">                options=&#123;&#123; <span class="attr">title</span>: <span class="string">'首页'</span>, &#125;&#125;</span><br><span class="line"></span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Stack.Screen name=<span class="string">"Details"</span> component=&#123;Details&#125;</span><br><span class="line">                options=&#123;&#123; <span class="attr">title</span>: <span class="string">'详情页'</span> &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Stack.Navigator &gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>完整代码</strong></p><blockquote><p>index.js文件 构建stack导航</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; enableScreens &#125; <span class="keyword">from</span> <span class="string">'react-native-screens'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStackNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/stack'</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@pages/home'</span>;</span><br><span class="line"><span class="keyword">import</span> Details <span class="keyword">from</span> <span class="string">'@pages/details'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Stack = createStackNavigator();</span><br><span class="line"><span class="keyword">const</span> screenOptions = &#123;                <span class="comment">//用来定制头部信息、根据自己需要更改</span></span><br><span class="line">    headerStyle: &#123;</span><br><span class="line">        backgroundColor: <span class="string">'skyblue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    headerTintColor: <span class="string">'#fff'</span>,</span><br><span class="line">    headerTitleStyle: &#123;</span><br><span class="line">        fontWeight: <span class="string">'bold'</span>,</span><br><span class="line">        fontSize: <span class="number">14</span>,</span><br><span class="line">        height: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyStack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Stack.Navigator initialRouteName=<span class="string">'Home'</span> screenOptions=&#123;screenOptions&#125; &gt;</span><br><span class="line">            &lt;Stack.Screen name=<span class="string">"Home"</span> component=&#123;Home&#125;</span><br><span class="line">                options=&#123;&#123; <span class="attr">title</span>: <span class="string">'首页'</span>, &#125;&#125;</span><br><span class="line"></span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Stack.Screen name=<span class="string">"Details"</span> component=&#123;Details&#125;</span><br><span class="line">                options=&#123;&#123; <span class="attr">title</span>: <span class="string">'详情页'</span> &#125;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Stack.Navigator &gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default MyStack;</span></span><br></pre></td></tr></table></figure><blockquote><p>App.js 程序主入口</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  SafeAreaView,</span><br><span class="line">  ScrollView,</span><br><span class="line">  StatusBar,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  useColorScheme,</span><br><span class="line">  View,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Colors,</span><br><span class="line">  DebugInstructions,</span><br><span class="line">  Header,</span><br><span class="line">  LearnMoreLinks,</span><br><span class="line">  ReloadInstructions,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native/Libraries/NewAppScreen'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; NavigationContainer &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/native'</span>;</span><br><span class="line"><span class="keyword">import</span> MyStack <span class="keyword">from</span> <span class="string">'./src/router'</span>;</span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;NavigationContainer&gt;</span><br><span class="line">      &lt;MyStack /&gt;</span><br><span class="line">    &lt;<span class="regexp">/NavigationContainer&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure><blockquote><p>home.js home组件</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Text, View, TouchableOpacity, StyleSheet &#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    toHome = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'跳转首页'</span>);</span><br><span class="line">        <span class="keyword">this</span>.props.navigation.navigate(<span class="string">'Details'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;TouchableOpacity onPress=&#123;<span class="keyword">this</span>.toHome&#125; style=&#123;styles.button&#125;&gt;</span><br><span class="line">                    &lt;Text&gt;跳转 详情页&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="regexp">    button: &#123;</span></span><br><span class="line"><span class="regexp">        backgroundColor: 'pink',</span></span><br><span class="line"><span class="regexp">        width: 200,</span></span><br><span class="line"><span class="regexp">        height: 50,</span></span><br><span class="line"><span class="regexp">        borderRadius: 20,</span></span><br><span class="line"><span class="regexp">        justifyContent: 'center',</span></span><br><span class="line"><span class="regexp">        alignItems: 'center'</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure><h3 id="详细参数与配置说明"><a href="#详细参数与配置说明" class="headerlink" title="详细参数与配置说明"></a>详细参数与配置说明</h3><h4 id="Stack-Navigator-配置选项"><a href="#Stack-Navigator-配置选项" class="headerlink" title="Stack.Navigator 配置选项"></a>Stack.Navigator 配置选项</h4><p>1.<code>initialRouteName</code>:  导航首次加载时的名称</p><p>2.<code>screenOptions</code>:  屏幕的默认选项，如下</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Stack.Navigator</span><br><span class="line">initialRouteName=<span class="string">"Page1"</span>     <span class="comment">//作为初始化页面、不写的话默认第一个screen为初始化页面</span></span><br><span class="line">screenOptions=&#123;&#123;                 <span class="comment">//用来定制头部信息、根据自己需要更改</span></span><br><span class="line">  title: <span class="string">'测试标题'</span>,</span><br><span class="line">  headerStyle: &#123;</span><br><span class="line">    backgroundColor: <span class="string">'#ee7530'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  headerTintColor: <span class="string">'#fff'</span>,</span><br><span class="line">  headerTitleStyle: &#123;</span><br><span class="line">    fontWeight: <span class="string">'bold'</span>,</span><br><span class="line">    fontSize: <span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure><p>3.<code>keyboardHandlingEnabled</code>: 如果为false，则导航到新屏幕时，屏幕键盘不会自动关闭。默认为true</p><p>4.<code>mode</code>: 定义渲染和过渡的样式</p><ul><li><code>card</code>:  使用标准的iOS和Android屏幕过渡。这是默认值</li><li><code>modeal</code>: 这有两件事：设置headerMode到screen堆栈，除非指定使屏幕从iOS底部的底部滑入，这是一种常见的iOS模式.</li></ul><p>5.<code>headerMode</code>:  指定标题的呈现方式</p><ul><li><code>float</code>: 渲染停留在顶部的单个标题，并在更改屏幕时进行动画处理。iOS上的常见模式。</li><li><code>screen</code>: 每个屏幕都有一个附加的标题，标题随屏幕一起淡入和淡出。Android上的常见模式。</li><li><code>none</code>: 没有标题</li></ul><h4 id="Stack-Screen-的配置选项-options"><a href="#Stack-Screen-的配置选项-options" class="headerlink" title="Stack.Screen 的配置选项(options)"></a>Stack.Screen 的配置选项(options)</h4><p><code>options</code>:可用于配置导航器内的各个屏幕</p><ul><li><p><code>title:</code> 头部标题</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">StackScreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">//  静态值</span></span><br><span class="line">    &lt;Stack.Navigator&gt;</span><br><span class="line">      &lt;Stack.Screen</span><br><span class="line">        name=<span class="string">"Home"</span></span><br><span class="line">        component=&#123;HomeScreen&#125;</span><br><span class="line">        options=&#123;&#123; <span class="attr">title</span>: <span class="string">'My home'</span> &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      <span class="comment">// 动态获取</span></span><br><span class="line">      &lt;Stack.Screen</span><br><span class="line">        name=<span class="string">"Profile"</span></span><br><span class="line">        component=&#123;HomeScreen&#125;</span><br><span class="line">        options=&#123;(&#123; route &#125;) =&gt; (&#123; <span class="attr">title</span>: route.params.name &#125;)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Stack.Navigator&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span>* 在组件中修改使用setOptions *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    &lt;Button</span></span><br><span class="line"><span class="regexp">      title="Update the title"</span></span><br><span class="line"><span class="regexp">      onPress=&#123;() =&gt; navigation.setOptions(&#123; title: 'Updated!' &#125;)&#125;</span></span><br><span class="line"><span class="regexp">    /</span>&gt;</span><br></pre></td></tr></table></figure></li><li><p><code>header</code>: function类型 返回一个React Element，显示为标题。如下示例。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">header: <span class="function">(<span class="params">&#123; scene, previous, navigation &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; options &#125; = scene.descriptor;</span><br><span class="line">      <span class="keyword">const</span> title =</span><br><span class="line">        options.headerTitle !== <span class="literal">undefined</span></span><br><span class="line">          ? options.headerTitle</span><br><span class="line">          : options.title !== <span class="literal">undefined</span></span><br><span class="line">          ? options.title</span><br><span class="line">          : scene.route.name;</span><br><span class="line">    </span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;MyHeader</span><br><span class="line">          title=&#123;title&#125;</span><br><span class="line">          leftButton=&#123;</span><br><span class="line">            previous ? <span class="xml"><span class="tag">&lt;<span class="name">MyBackButton</span> <span class="attr">onPress</span>=<span class="string">&#123;navigation.goBack&#125;</span> /&gt;</span> : undefined</span></span><br><span class="line"><span class="xml">          &#125;</span></span><br><span class="line"><span class="xml">          style=&#123;options.headerStyle&#125;</span></span><br><span class="line"><span class="xml">        /&gt;</span></span><br><span class="line"><span class="xml">      );</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br></pre></td></tr></table></figure></li><li><p><code>headerShown</code>:  是显示还是隐藏屏幕标题。默认情况下显示标题，除非将headerMode其设置为none。设置为 false隐藏标题。<font color="red">在特定屏幕上隐藏标题时，您可能还需要将headerModeprop 设置为screen。</font><br> headerTitle<br> 字符串或返回标头要使用的React元素的函数。默认为 title 选项值.</p></li><li><p><code>headerTitleAlign</code>: 对齐标题。可选择left或center。默认为iOS-center和Android-left</p></li><li><p><code>headerTitleAllowFontScaling</code>: 标头标题字体是否应缩放以符合“文本大小”辅助功能设置。默认为false。</p></li><li><p><code>headerBackAllowFontScaling</code>: 后退按钮标题字体是否应缩放以符合“文本大小”辅助功能设置。默认为false。</p></li><li><p><code>headerBackImage</code>：<font color="red">该函数返回一个React Element以在标题的后退按钮中显示自定义图像</font>。使用函数时，它将tintColor在其参数对象中接收。默认为带有背面图像源的Image组件，它是平台的默认背面图标图像（iOS上为人字形，Android上为箭头）。</p></li><li><p><code>headerBackTitle</code>： iOS上的后退按钮使用的标题字符串。默认为上一个场景的headerTitle。</p></li><li><p><code>headerBackTitleVisible</code>: 为后退按钮标题是否可见提供了一个合理的默认值，但是如果您想覆盖它，则可以使用true或false在此选项中使用</p></li><li><p><code>headerTruncatedBackTitle</code>: 当headerBackTitle屏幕上不适合显示后退按钮时使用的标题字符串。”Back”默认情况下。headerRight<br>该函数返回一个React元素以显示在标题的右侧。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">StackScreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Stack.Navigator&gt;</span><br><span class="line">      &lt;Stack.Screen</span><br><span class="line">        name=<span class="string">"Home"</span></span><br><span class="line">        component=&#123;HomeScreen&#125;</span><br><span class="line">        options=&#123;&#123;</span><br><span class="line">          headerTitle: <span class="function"><span class="params">props</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">LogoTitle</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span>,</span></span><br><span class="line"><span class="xml">          headerRight: () =&gt; (</span></span><br><span class="line">            &lt;Button</span><br><span class="line">              onPress=&#123;() =&gt; alert('This is a button!')&#125;</span><br><span class="line">              title="Info"</span><br><span class="line">              color="#fff"</span><br><span class="line">            /&gt;</span><br><span class="line">          ),</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Stack.Navigator</span>&gt;</span></span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><code>headerLeft</code>: 返回React元素以显示在标题左侧的函数。使用函数时onPress，在呈现时它会接收许多参数（label，labelStyle和more-检查types.tsx以获取完整列表）。</p></li><li><p><code>headerStyle</code>: 标头的样式对象。例如，您可以在此处指定自定义背景色。</p></li><li><p><code>headerTitleStyle</code>: 标题组件的样式对象</p></li><li><p><code>headerBackTitleStyle</code>: 标题的样式对象</p></li><li><p><code>headerLeftContainerStyle</code>: 自定义headerLeft组件容器的样式，例如添加填充</p></li><li><p><code>headerRightContainerStyle</code>: headerRightContainerStyle</p></li><li><p><code>headerTitleContainerStyle</code>: 自定义headerTitle组件容器的样式，例如添加填充。默认情况下，headerTitleContainerStyle是具有绝对位置的风格和偏移量都left和right。这可能导致的空白或之间重叠headerLeft和headerTitle如果定制headerLeft被使用。可以通过在中和中进行调整left和right样式来解决。</p></li><li><p><code>headerTintColor</code>: 标头的色调颜色</p></li><li><p><code>headerPressColorAndroid</code>: 材料波纹的颜色（仅适用于Android&gt; = 5.0）</p></li><li><p><code>headerTransparent</code>: 默认为false。如果为true，则标题将没有背景，除非您明确为其提供背景headerBackground。标头也将浮动在屏幕上，使其与下面的内容重叠。</p></li><li><p><code>headerBackground</code>:  返回React元素以呈现为标题背景的函数。这对于使用背景（例如图像或渐变）很有用。<br>例如，可以将其headerTransparent用于渲染模糊视图以创建半透明标题。参考下述示例</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BlurView &#125; <span class="keyword">from</span> <span class="string">'expo-blur'</span>;</span><br><span class="line">&lt;Screen</span><br><span class="line">  name=<span class="string">"Home"</span></span><br><span class="line">  component=&#123;HomeScreen&#125;</span><br><span class="line">  options=&#123;&#123;</span><br><span class="line">    headerTransparent: <span class="literal">true</span>,</span><br><span class="line">    headerBackground: <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">      &lt;BlurView tint=<span class="string">"light"</span> intensity=&#123;<span class="number">100</span>&#125; style=&#123;StyleSheet.absoluteFill&#125; /&gt;</span><br><span class="line">    ),</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;;</span><br></pre></td></tr></table></figure></li><li><p><code>headerStatusBarHeight:</code> 在标题顶部添加额外的填充以说明半透明的状态栏。默认情况下，它使用设备安全区域插图中的最大值。传递0或自定义值以禁用默认行为，并自定义高度。</p></li><li><p><code>cardShadowEnabled</code>: 使用此道具在过渡期间具有可见的阴影。默认为true。</p></li><li><p><code>cardOverlayEnabled</code>: 使用此道具可以在过渡期间在卡下看到半透明的深色覆盖层。默认为trueAndroid和falseiOS。</p></li><li><p><code>cardStyle</code>: 堆栈中卡的样式对象。您可以在此处提供自定义背景色，以代替默认背景。您还可以指定{ backgroundColor: ‘transparent’ }使前一个屏幕在下面可见（对于透明模式）。这对于实现模态对话框之类的东西很有用。mode: ‘modal’使用透明背景时，还应该在堆栈视图配置中指定，这样以前的屏幕就不会分离并且在下面保持可见。</p></li><li><p><code>animationEnabled</code> :屏幕上是否应启用过渡动画。如果将其设置为false，则按下或弹出时屏幕不会动画。默认为true。</p></li><li><p><code>animationTypeForReplace</code>: 当此屏幕替换另一个屏幕时要使用的动画类型。它采用以下值：</p><ul><li><code>push</code>: 将使用推送新屏幕的动画</li><li><code>pop</code>: 将使用弹出屏幕的动画</li></ul><p>默认为push。当pop被使用时，pop动画被施加到被替换的画面。</p></li><li><p><code>gestureEnabled</code>: 是否可以使用手势关闭此屏幕。默认为trueiOS，falseAndroid。</p></li><li><p><code>gestureResponseDistance</code>: 从屏幕边缘开始覆盖触摸距离的对象，以识别手势。该对象可以包含以下属性：</p><ul><li><code>horizontal</code>: 数字型，水平方向的距离，默认值为25</li><li><code>vertical</code>:  数字型, 垂直方向的距离。默认值为135。</li></ul></li><li><p><code>gestureVelocityImpact</code>: 决定手势速度相关性的数字。默认值为0.3。</p></li><li><p><code>gestureDirection</code>: 手势的方向。与动画有关</p></li><li><p><code>transitionSpec</code>: 屏幕过渡的配置对象</p></li><li><p><code>cardStyleInterpolator</code>: 插卡各部分的插补样式。</p></li><li><p><code>headerStyleInterpolator</code>: 标头各部分的内插样式。</p></li><li><p><code>safeAreaInsets</code>: 屏幕的安全区域插图。这用于避免使用诸如缺口和状态栏之类的元素。默认情况下，将自动检测设备的安全区域插图。您可以使用此选项覆盖行为。接受包含以下可选属性的对象：</p><ul><li><code>top</code>: 数字型，顶部插图的值，例如包含状态栏和槽口区域</li><li><code>right</code>: 数字型，左插图的值</li><li><code>bottom</code>: 数字型，底部插图的值，例如底部的区域导航栏</li><li><code>left</code>: 数字型，右插图的值。</li></ul></li></ul><h2 id="TabNavigator导航"><a href="#TabNavigator导航" class="headerlink" title="TabNavigator导航"></a>TabNavigator导航</h2><p>底部导航栏，有的app开发的时候需要用到底部导航栏切换。使用方法跟StackNavigator类似</p><h3 id="使用步骤-1"><a href="#使用步骤-1" class="headerlink" title="使用步骤"></a>使用步骤</h3><p>1.安装：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @react-navigation/bottom-tabs</span><br></pre></td></tr></table></figure><p>2.代码实例</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'react-native-gesture-handler'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NavigationContainer &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/native'</span>;</span><br><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createBottomTabNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/bottom-tabs'</span>;</span><br><span class="line"><span class="comment">//引入页面模块</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@pages/home'</span>;</span><br><span class="line"><span class="keyword">import</span> Details <span class="keyword">from</span> <span class="string">'@pages/details'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Tab = createBottomTabNavigator();</span><br><span class="line"><span class="comment">// 创建TagNavigation 配置对象</span></span><br><span class="line"><span class="keyword">const</span> tabBarOptions = &#123;</span><br><span class="line">    activeTintColor: <span class="string">'red'</span>,</span><br><span class="line">    inactiveTintColor: <span class="string">'gray'</span>,</span><br><span class="line">    tabStyle: &#123;</span><br><span class="line">        backgroundColor: <span class="string">'#ddd'</span>,</span><br><span class="line">        paddingBottom: <span class="number">15</span>,</span><br><span class="line">        borderRightWidth: <span class="number">1</span>,</span><br><span class="line">        borderRightColor: <span class="string">'#fff'</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TabNaviagtor = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;Tab.Navigator tabBarOptions=&#123;tabBarOptions&#125;&gt;</span><br><span class="line">            &lt;Tab.Screen name=<span class="string">"Home"</span> component=&#123;Home&#125; options=&#123;&#123; <span class="attr">title</span>: <span class="string">'首页'</span> &#125;&#125; /&gt;</span><br><span class="line">            &lt;Tab.Screen name=<span class="string">"Details"</span> component=&#123;Details&#125; /&gt;</span><br><span class="line">            &lt;Tab.Screen name=<span class="string">"Home2"</span> component=&#123;Details&#125; /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Tab.Navigator&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="详细参数与配置说明-1"><a href="#详细参数与配置说明-1" class="headerlink" title="详细参数与配置说明"></a>详细参数与配置说明</h4><h4 id="Tab-Navigator的配置"><a href="#Tab-Navigator的配置" class="headerlink" title="Tab.Navigator的配置"></a>Tab.Navigator的配置</h4><p>1.<code>initialRouteName</code>:  导航首次加载时的名称</p><p>2.<code>screenOptions</code>:  屏幕的默认选项，如下</p><p>3.<code>backBehavior</code>: 后退按钮处理的行为。</p><ul><li><code>initalRoute</code>: 返回初始标签</li><li><code>order</code>: 返回上一个标签页（按照标签页中显示的顺序）</li><li><code>history</code>: 返回上次访问的标签页</li><li><code>none</code>: 不处理后退按钮</li></ul><p>4.<code>lazy</code>:默认为true。如果为false，则所有选项卡都将立即呈现。如果为true，则仅在首次使选项卡处于活动状态时才显示它们。注意：选项卡不会在后续访问时重新呈现。</p><p>5.<code>tabBar</code>: 返回 React 元素以显示为选项卡栏的函数</p><p>6.<code>tabBarOptions</code>: 包含选项卡栏组件的道具的对象。它可以包含以下属性：</p><ul><li><p><code>activeTintColor</code> : 活动标签的标签和图标颜色。</p></li><li><p><code>activeBackgroundColor</code>: 活动标签的背景颜色。</p></li><li><p><code>inactiveTintColor</code>: 非活动标签的标签和图标颜色。</p></li><li><p><code>inactiveBackgroundColor</code> : 非活动标签的背景颜色。</p></li><li><p><code>showLabel</code>- : 是否显示标签标签，默认为true。</p></li><li><p><code>showIcon</code>: 是否显示标签图标，默认为true。</p></li><li><p><code>style</code>: 标签栏的样式对象。</p></li><li><p><code>labelStyle</code>: 标签标签的样式对象。</p></li><li><p><code>labelPosition</code>: 在何处显示与标签图标相关的标签标签。可用值为beside-icon和below-icon。默认为beside-icon。</p></li><li><p><code>tabStyle</code>: 标签的样式对象。</p></li><li><p><code>allowFontScaling</code> :标签字体是否应缩放以符合“文本大小”辅助功能设置，默认为true。</p></li><li><p><code>adaptive</code>: 标签图标和标签对齐方式是否应根据屏幕尺寸而改变？true对于iOS 11 false，默认值为。如果，标签图标和标签始终垂直对齐。当时true，标签图标和标签在平板电脑上水平对齐。</p></li><li><p><code>safeAreaInset</code>: 覆盖forceInset道具。默认为{ bottom: ‘always’, top: ‘never’ }。可用的键top | bottom | left | right随值一起提供’always’ | ‘never’。</p></li><li><p><code>keyboardHidesTabBar</code>: 默认为false。如果true在键盘打开时隐藏标签栏。</p><h4 id="Tab-Navigator的配置-options"><a href="#Tab-Navigator的配置-options" class="headerlink" title="Tab.Navigator的配置 (options)"></a>Tab.Navigator的配置 (options)</h4></li></ul><p>1.<code>title</code>: 通用标题可以用作备用 headerTitle 和 tabBarLabel</p><p>2.<code>tabBarVisible</code>: true或false显示或隐藏标签栏（如果未设置），则默认为true。</p><p>3.<code>tabBarIcon</code>: 给定的函数{ focused: boolean, color: string, size: number }返回一个React.Node，以显示在选项卡栏中。</p><p>4.<code>tabBarLabel</code>: 显示在选项卡栏中的选项卡的标题字符串或给定的函数将{ focused: boolean, color: string }返回React.Node，以显示在选项卡栏中。未定义时，使用场景title。</p><p>5.<code>tabBarButton</code>: 该函数返回一个React元素以呈现为选项卡按钮。它包装图标和标签并实现onPress。TouchableWithoutFeedback默认情况下渲染。tabBarButton: props =&gt; <TouchableOpacity {…props}>会TouchableOpacity改为使用</TouchableOpacity></p><p> 6.<code>tabBarAccessibilityLabel</code>: 选项卡按钮的辅助功能标签。当用户点击选项卡时，屏幕阅读器会读取该内容。如果您没有标签的标签，建议您进行设置。</p><p>7.<code>tabBarTestID</code>: 在测试中找到此选项卡按钮的ID。</p><p>8.<code>unmountOnBlur</code>: 离开该屏幕时是否应卸载该屏幕。卸载屏幕将重置屏幕中的任何本地状态以及屏幕中嵌套导航器的状态。默认为false。</p><h2 id="DrawerNavigator导航"><a href="#DrawerNavigator导航" class="headerlink" title="DrawerNavigator导航"></a>DrawerNavigator导航</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @react-navigation/drawer</span><br></pre></td></tr></table></figure><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><blockquote><p>App.js</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'react-native-gesture-handler'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NavigationContainer &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/native'</span>;</span><br><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createDrawerNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/drawer'</span>;</span><br><span class="line"><span class="comment">//引入页面模块</span></span><br><span class="line"><span class="keyword">import</span> LoginScreen <span class="keyword">from</span> <span class="string">'./app/views/LoginScreen'</span>;</span><br><span class="line"><span class="keyword">import</span> HomeScreen <span class="keyword">from</span> <span class="string">'./app/views/HomeScreen'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Drawer = createDrawerNavigator();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;NavigationContainer</span><br><span class="line">      drawerStyle=&#123;&#123;</span><br><span class="line">        backgroundColor: <span class="string">'#c6cbef'</span>,</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Drawer.Navigator initialRouteName=<span class="string">'Home'</span>&gt;</span><br><span class="line">        &lt;Drawer.Screen name=<span class="string">'Home'</span> component=&#123;HomeScreen&#125; /&gt;</span><br><span class="line">        &lt;Drawer.Screen name=<span class="string">'Login'</span> component=&#123;LoginScreen&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/Drawer.Navigator&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>NavigationContainer&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><h2 id="页面跳转与传值"><a href="#页面跳转与传值" class="headerlink" title="页面跳转与传值"></a>页面跳转与传值</h2><p>有以下跳转方式：</p><ol><li><code>navigation.navigate(name)</code> 跳转到特定的路由，如果队列里有此路由，不会再队列里添加</li><li><code>navigation.push(name)</code>跳转到特定路由,不会判断现有队列里是否存在此路由,直接添加</li><li><code>navigation.pop()</code>出栈</li><li><code>navigation.goBack()</code>返回</li><li><code>navigation.popToTop()</code>跳转到队列里的第一个路由</li><li><code>navigation.setParams()</code> 在调用<code>SetParams</code>时，路由器将产生一个新的状态</li><li><code>navigation.replace()</code>用新的route替换当前的route</li><li><code>navigation.reset()</code> 重置，将重置整个导航状态并将其替换为新的导航。</li><li><code>navigation.dispatch()</code> 向路由发送 action</li></ol><p>在跳转时可以传递一些参数，供下个路由使用，下个屏幕以route.params的方式获取参数。请参考以下示例，HomeScreen跳转到DetailsScreen并传递了一些参数，DetailsScreen里通过route获取这些参数。在定义stack.screen时，也可以传递一些默认的参数，通过initialParams定义。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HomeScreen</span>(<span class="params">&#123; navigation &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">alignItems</span>: <span class="string">'center'</span>, <span class="attr">justifyContent</span>: <span class="string">'center'</span> &#125;&#125;&gt;</span><br><span class="line">      &lt;Text&gt;Home Screen&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Button</span></span><br><span class="line"><span class="regexp">        title="Go to Details"</span></span><br><span class="line"><span class="regexp">        onPress=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="regexp">          /</span>* <span class="number">1.</span> 跳转并传递参数 *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">          navigation.navigate('Details', &#123;</span></span><br><span class="line"><span class="regexp">            itemId: 86,</span></span><br><span class="line"><span class="regexp">            otherParam: 'anything you want here',</span></span><br><span class="line"><span class="regexp">          &#125;);</span></span><br><span class="line"><span class="regexp">        &#125;&#125;</span></span><br><span class="line"><span class="regexp">      /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function DetailsScreen(&#123; route, navigation &#125;) &#123;</span></span><br><span class="line"><span class="regexp">  /</span>* <span class="number">2.</span> 获取参数 *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">  const &#123; itemId &#125; = route.params;</span></span><br><span class="line"><span class="regexp">  const &#123; otherParam &#125; = route.params;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;View style=&#123;&#123; flex: 1, alignItems: 'center', justifyContent: 'center' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Text&gt;Details Screen&lt;/</span>Text&gt;</span><br><span class="line">      <span class="comment">/* 使用参数 */</span></span><br><span class="line">      &lt;Text&gt;itemId: &#123;<span class="built_in">JSON</span>.stringify(itemId)&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Text&gt;otherParam: &#123;JSON.stringify(otherParam)&#125;&lt;/</span>Text&gt;</span><br><span class="line">      &lt;Button</span><br><span class="line">        title=<span class="string">"Go to Details... again"</span></span><br><span class="line">        onPress=&#123;() =&gt;</span><br><span class="line">          navigation.push(<span class="string">'Details'</span>, &#123;</span><br><span class="line">            itemId: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100</span>),</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Button title=<span class="string">"Go to Home"</span> onPress=&#123;() =&gt; navigation.navigate(<span class="string">'Home'</span>)&#125; /&gt;</span><br><span class="line">      &lt;Button title=<span class="string">"Go back"</span> onPress=&#123;() =&gt; navigation.goBack()&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="组合使用"><a href="#组合使用" class="headerlink" title="组合使用"></a>组合使用</h2><p>  原生思维是TabNavigator中嵌套StackNavigator，但是这里建议StackNavigator中嵌套TabNavigator。因为可以避免控制TabNavigator的tabbar显示和隐藏问题。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 引入手势支持</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'react-native-gesture-handler'</span>;</span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Image &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="comment">//导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createBottomTabNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/bottom-tabs'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStackNavigator &#125; <span class="keyword">from</span> <span class="string">'@react-navigation/stack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入自定义icon</span></span><br><span class="line"><span class="comment">// import Icon from 'react-native-vector-icons/iconfont';</span></span><br><span class="line"><span class="comment">// 管区首页</span></span><br><span class="line"><span class="keyword">import</span> HomeScreen <span class="keyword">from</span> <span class="string">'@views/home'</span>;</span><br><span class="line"><span class="comment">// 管区通讯录</span></span><br><span class="line"><span class="keyword">import</span> ContactsScreen <span class="keyword">from</span> <span class="string">'@views/contacts'</span>;</span><br><span class="line"><span class="comment">// 网点花名册</span></span><br><span class="line"><span class="keyword">import</span> RosterScreen <span class="keyword">from</span> <span class="string">'@views/roster'</span>;</span><br><span class="line"><span class="comment">// 我的</span></span><br><span class="line"><span class="keyword">import</span> UserScreen <span class="keyword">from</span> <span class="string">'@views/user'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; setSpText, scaleSize &#125; <span class="keyword">from</span> <span class="string">"@adapter"</span>;</span><br><span class="line"><span class="comment">// home child Page</span></span><br><span class="line"><span class="comment">// 搜索页面</span></span><br><span class="line"><span class="keyword">import</span> SearchScreen <span class="keyword">from</span> <span class="string">'@views/search'</span>;</span><br><span class="line"><span class="comment">// 省区切换页面</span></span><br><span class="line"><span class="keyword">import</span> LocationScreen <span class="keyword">from</span> <span class="string">'@views/location'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Tab = createBottomTabNavigator();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建TagNavigation 配置对象</span></span><br><span class="line"><span class="keyword">const</span> tabBarOptions = &#123;</span><br><span class="line">    activeTintColor: <span class="string">'#D95AF0'</span>,</span><br><span class="line">    inactiveTintColor: <span class="string">'gray'</span>,</span><br><span class="line">    labelStyle: &#123;</span><br><span class="line">        fontSize: setSpText(<span class="number">13</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 键盘弹起隐藏tabBar</span></span><br><span class="line">    keyboardHidesTabBar: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// bottomsTab</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RootTabs</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Tab.Navigator tabBarOptions=&#123;tabBarOptions&#125; initialRouteName=<span class="string">"Home"</span>&gt;</span><br><span class="line">                &lt;Tab.Screen name=<span class="string">"Home"</span> component=&#123;HomeScreen&#125; options=&#123;&#123;</span><br><span class="line">                    tabBarLabel: <span class="string">'管区首页'</span>,</span><br><span class="line">                    tabBarIcon: <span class="function">(<span class="params">&#123; focused, color, size &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> focused ? &lt;Image source=&#123;&#123; uri: 'https://fscdn.zto.com/fs8/M01/F9/F4/wKhBEGDxGyKAdqqtAAAEw1IPYd0817.png' &#125;&#125; style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt; : &lt;Image</span><br><span class="line">                            source=&#123;&#123; uri: 'https://fscdn.zto.com/fs8/M02/F9/F4/wKhBEGDxGyKANTLhAAAGtoBs8CE635.png' &#125;&#125;</span><br><span class="line">                            style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    unmountOnBlur: true</span><br><span class="line"></span><br><span class="line">                &#125;&#125; /&gt;</span><br><span class="line">                &lt;Tab.Screen name="Contacts" component=&#123;ContactsScreen&#125;</span><br><span class="line">                    options=&#123;&#123;</span><br><span class="line">                        tabBarLabel: '网管通讯录',</span><br><span class="line">                        tabBarIcon: (&#123; focused, color, size &#125;) =&gt; &#123;</span><br><span class="line">                            return focused ? &lt;Image source=&#123;&#123; uri: 'https://fscdn.zto.com/fs1/M04/05/D8/wKhBFmDxGyKAHiK4AAAHmZXX6K4661.png' &#125;&#125; style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt; : &lt;Image</span><br><span class="line">                                source=&#123;&#123; uri: 'https://fscdn.zto.com/fs8/M03/F9/D6/wKhBD2DxGyKAWRHwAAAHFTzEhPo639.png' &#125;&#125;</span><br><span class="line">                                style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt;</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;&#125; /&gt;</span><br><span class="line">                &lt;Tab.Screen name="Roster" component=&#123;RosterScreen&#125;</span><br><span class="line">                    options=&#123;&#123;</span><br><span class="line">                        tabBarLabel: '网点花名册',</span><br><span class="line">                        tabBarIcon: (&#123; focused, color, size &#125;) =&gt; &#123;</span><br><span class="line">                            return focused ? &lt;Image source=&#123;&#123; uri: 'https://fscdn.zto.com/fs8/M02/F9/D6/wKhBD2DxGyKAEh9_AAAMFzj8bKM221.png' &#125;&#125; style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt; : &lt;Image</span><br><span class="line">                                source=&#123;&#123; uri: 'https://fscdn.zto.com/fs1/M03/05/D8/wKhBFmDxGyGAXNAjAAALb6LAcWQ260.png' &#125;&#125;</span><br><span class="line">                                style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt;</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">                &lt;Tab.Screen name="User" component=&#123;UserScreen&#125;</span><br><span class="line">                    options=&#123;&#123;</span><br><span class="line">                        tabBarLabel: '网点花名册',</span><br><span class="line">                        tabBarIcon: (&#123; focused, color, size &#125;) =&gt; &#123;</span><br><span class="line">                            return focused ? &lt;Image source=&#123;&#123; uri: 'https://fscdn.zto.com/fs1/M04/05/D7/wKhBFWDxGyKACY2ZAAAH199P9_M078.png' &#125;&#125; style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt; : &lt;Image</span><br><span class="line">                                source=&#123;&#123; uri: 'https://fscdn.zto.com/fs1/M00/05/D8/wKhBFmDxGyKAHOrzAAAGo39PDr8473.png' &#125;&#125;</span><br><span class="line">                                style=&#123;&#123; width: scaleSize(28), height: scaleSize(28), &#125;&#125; /&gt;</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;/Tab.Navigator&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Home Stack navgation</span><br><span class="line">const Stack = createStackNavigator();</span><br><span class="line">const screenOptions = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">const HomeStack = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;Stack.Navigator initialRouteName="Homes" screenOptions=&#123;screenOptions&#125; headerMode="none" mode="modal" &gt;</span><br><span class="line">            &lt;Stack.Screen name="Homes" component=&#123;RootTabs&#125; /&gt;</span><br><span class="line">            &lt;Stack.Screen name="Search" component=&#123;SearchScreen&#125; /&gt;</span><br><span class="line">            &lt;Stack.Screen name="Location" component=&#123;LocationScreen&#125; /&gt;</span><br><span class="line">        &lt;/Stack.Navigator&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default HomeStack;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;React Navigation是React Native是目前最主流的屏幕页面切换的导航方案。React Navigation 5.x版本是目前最新的稳定版本，相对于老版本的配置方式更接近React Router，更好理解。&lt;br&gt; reactNative0.60.0以上的版本会省去很多配置，建议使用0.6以上版本&lt;br&gt; &lt;code&gt;npx react-native init demo --version 0.60.0 //版本号自行定义&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/"/>
    
    
      <category term="react-native" scheme="https://liyi-up.top/tags/react-native/"/>
    
  </entry>
  
  <entry>
    <title>React-native组件化</title>
    <link href="https://liyi-up.top/2021/07/27/React-Native%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    <id>https://liyi-up.top/2021/07/27/React-Native%E7%BB%84%E4%BB%B6%E5%8C%96/</id>
    <published>2021-07-27T02:49:24.000Z</published>
    <updated>2021-08-06T03:20:23.867Z</updated>
    
    <content type="html"><![CDATA[<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><p>RN中自定义组件和react中自定义组件类似，但在使用RN基本组件的时候，需要先进行引入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;View, Text, StyleSheet&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br></pre></td></tr></table></figure><p>但是样式的书写和react不同，是通过react-native模块中的  StyleSheet.create()方法来书写，然后在组件中的style属性值中引用。</p><a id="more"></a><p>RN中视图中出现文字的地方一定要用\<Text>\</Text>组件包起来</p><p>书写步骤：</p><p>创建RN项目后，删除app.js，新建components文件夹，在components文件夹中新建App1.js：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入核心库</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, Text, StyleSheet&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并到处类(组件)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.box1&#125;&gt;</span><br><span class="line">                &lt;Text style=&#123;styles.text1&#125;&gt;hello,你好！&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建样式</span></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    box1:&#123;</span><br><span class="line">        backgroundColor: <span class="string">'pink'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    text1:&#123;</span><br><span class="line">        fontSize:<span class="number">20</span>,</span><br><span class="line">        fontFamily:<span class="string">"宋体"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在index.js中，修改引入组件的路径</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; AppRegistry &#125; <span class="keyword">from</span> <span class="string">'react-native'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./components/App1'</span>;</span><br><span class="line"></span><br><span class="line">AppRegistry.registerComponent(<span class="string">'rn_demo'</span>, () =&gt; App);</span><br></pre></td></tr></table></figure><h2 id="原生常用组件"><a href="#原生常用组件" class="headerlink" title="原生常用组件"></a>原生常用组件</h2><h3 id="View组件"><a href="#View组件" class="headerlink" title="View组件"></a>View组件</h3><p>React Nativr组件View，其作用等同于IOS中的UIView，Android中的android.View，或是HTML中<div>标签，它时所有页面组件的父组件。使用方式无差异，基于容器使用。 </div></p><p>View属性:<a href="https://www.reactnative.cn/docs/view" target="_blank" rel="noopener">https://www.reactnative.cn/docs/view</a></p><!--mroe--><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;View style=&#123;&#123;</span><br><span class="line">    width: <span class="number">200</span>,</span><br><span class="line">    height: <span class="number">150</span>,</span><br><span class="line">    backgroundColor: <span class="string">'cyan'</span></span><br><span class="line">&#125;&#125;&gt;</span><br><span class="line">    &#123;<span class="comment">/*我是一条注释*/</span>&#125;</span><br><span class="line">    &lt;Text&gt;Hello World&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>View&gt;</span><br></pre></td></tr></table></figure><h3 id="Text组件"><a href="#Text组件" class="headerlink" title="Text组件"></a>Text组件</h3><p>一个用于显示文本的ReactNative组件，和Android中的TextView组件或者OC中的UILabel组件类似，专门用来显示基本的文本信息:除了基本你的显示外部之外,可以进行嵌套显示，设置样式，以及可以做事件(例如:点击)处理。</p><p>Text属性:<a href="https://www.reactnative.cn/docs/text#numberoflines" target="_blank" rel="noopener">https://www.reactnative.cn/docs/text#numberoflines</a></p><p>5.3 Image组件</p><p>在开发中还有一个非常重要的组件Image，通过这个组件可以展示各种各样的图片、而且在React Native中该组件可以通过多种方式加载图片资源。包括网络图片、静态资源、临时的本地图片、以及本地磁盘上的图片(如相册等)</p><p>Image属性:<a href="https://www.reactnative.cn/docs/image" target="_blank" rel="noopener">https://www.reactnative.cn/docs/image</a></p><ul><li><p>常用使用，三种加载方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;View, Image, StyleSheet, ImageBackground, ScrollView, Text,Dimensions&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LYImage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        imageUrl1: <span class="string">'https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3593094404,627203995&amp;fm=26&amp;gp=0.jpg'</span>,</span><br><span class="line">        imageUrl2: <span class="string">'https://goss.veer.com/creative/vcg/veer/612/veer-167625828.jpg?x-oss-process=image/format,webp'</span>,</span><br><span class="line">        imageUrl3: <span class="string">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAEXRFWHRTb2Z0d2FyZQBwbmdjcnVzaEB1SfMAAABQSURBVGje7dSxCQBACARB+2/ab8BEeQNhFi6WSYzYLYudDQYGBgYGBgYGBgYGBgYGBgZmcvDqYGBgmhivGQYGBgYGBgYGBgYGBgYGBgbmQw+P/eMrC5UTVAAAAABJRU5ErkJggg=='</span></span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;imageUrl1, imageUrl2, imageUrl3&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">const</span> &#123; width, height, scale, fontScale &#125; = Dimensions.get(<span class="string">'window'</span>);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;ScrollView&gt;</span><br><span class="line">                    &#123;<span class="comment">/*本地加载*/</span>&#125;</span><br><span class="line">                    &lt;Image</span><br><span class="line">                        source=&#123;<span class="built_in">require</span>(<span class="string">'../assets/image/code.png'</span>)&#125;</span><br><span class="line">                        style=&#123;&#123;</span><br><span class="line">                            width: <span class="number">200</span>,</span><br><span class="line">                            height: <span class="number">200</span>,</span><br><span class="line">                        &#125;&#125;</span><br><span class="line">                        borderRadius=&#123;<span class="number">100</span>&#125;</span><br><span class="line">                        overflow=&#123;<span class="string">'hidden'</span>&#125;&gt;</span><br><span class="line">                    &lt;<span class="regexp">/Image&gt;</span></span><br><span class="line"><span class="regexp">                    &#123;/</span>*加载网络图片,通过uri来加载的图片都必须设置宽高否则无法显示图片*<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;Image</span></span><br><span class="line"><span class="regexp">                        style=&#123;style.logo&#125;</span></span><br><span class="line"><span class="regexp">                        source=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                            uri: imageUrl1</span></span><br><span class="line"><span class="regexp">                        &#125;&#125;</span></span><br><span class="line"><span class="regexp">                        resizeMode=&#123;'contain'&#125;&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Image&gt;</span><br><span class="line">                    &lt;Image</span><br><span class="line">                        style=&#123;style.logo&#125;</span><br><span class="line">                        source=&#123;&#123;</span><br><span class="line">                            uri: imageUrl2</span><br><span class="line">                        &#125;&#125;</span><br><span class="line">                        resizeMode=&#123;<span class="string">'contain'</span>&#125;&gt;</span><br><span class="line">                    &lt;<span class="regexp">/Image&gt;</span></span><br><span class="line"><span class="regexp">                    &#123;/</span>*Base64加载*<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">                    &lt;Image</span></span><br><span class="line"><span class="regexp">                        style=&#123;style.logo&#125;</span></span><br><span class="line"><span class="regexp">                        source=&#123;&#123;</span></span><br><span class="line"><span class="regexp">                            uri: imageUrl3</span></span><br><span class="line"><span class="regexp">                        &#125;&#125;</span></span><br><span class="line"><span class="regexp">                        resizeMode=&#123;'contain'&#125;&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>Image&gt;</span><br><span class="line">                    &#123;<span class="comment">/*图片作为背景*/</span>&#125;</span><br><span class="line">                    &lt;ImageBackground</span><br><span class="line">                        style=&#123;&#123;</span><br><span class="line">                            width,</span><br><span class="line">                            height:<span class="number">100</span>,</span><br><span class="line">                            marginBottom:<span class="number">20</span></span><br><span class="line">                        &#125;&#125;</span><br><span class="line">                        source=&#123;&#123;</span><br><span class="line">                            uri: imageUrl2</span><br><span class="line">                        &#125;&#125;</span><br><span class="line">                        resizeMode=&#123;<span class="string">'cover'</span>&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;</span><br><span class="line">                            这是ImageBackground实现的背景图</span><br><span class="line">                        &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>ImageBackground&gt;</span><br><span class="line">                &lt;<span class="regexp">/ScrollView&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> style = StyleSheet.create(&#123;</span><br><span class="line">    logo: &#123;</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> LYImage;</span><br></pre></td></tr></table></figure><h4 id="综合运用-九宫格"><a href="#综合运用-九宫格" class="headerlink" title="综合运用-九宫格"></a>综合运用-九宫格</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;View, Dimensions, StyleSheet, Text, Image&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LYImageDemo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;&#125;;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;style.container&#125;&gt;</span><br><span class="line">                &#123;<span class="keyword">this</span>._imageItem()&#125;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    _imageItem = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ 1.获取常量</span></span><br><span class="line"><span class="regexp">        let screenW = Dimensions.get('window').width;</span></span><br><span class="line"><span class="regexp">        let cols = 3, boxW = 100, boxH = 120;</span></span><br><span class="line"><span class="regexp">        let hMargin = (screenW - boxW * cols) /</span> (cols + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">let</span> vMargin = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">let</span> dataArr = <span class="built_in">require</span>(<span class="string">'../assets/data/flower'</span>);</span><br><span class="line">        <span class="comment">// 2. 组件数组</span></span><br><span class="line">        <span class="keyword">let</span> itemArr = [];</span><br><span class="line">        <span class="comment">// 遍历数组</span></span><br><span class="line">        dataArr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            itemArr.push(</span><br><span class="line">                &lt;View key=&#123;index&#125; style=&#123;&#123;</span><br><span class="line">                    backgroundColor: <span class="string">'red'</span>,</span><br><span class="line">                    width: boxW,</span><br><span class="line">                    height: boxH,</span><br><span class="line">                    marginLeft: hMargin,</span><br><span class="line">                    marginTop: vMargin,</span><br><span class="line">                    justifyContent: <span class="string">'center'</span>,</span><br><span class="line">                    alignItems: <span class="string">'center'</span></span><br><span class="line">                &#125;&#125;&gt;</span><br><span class="line">                    &#123;<span class="comment">/*RN种存放在Android的Drawable目录下的图片可不带后缀直接引用*/</span>&#125;</span><br><span class="line">                    &lt;Image source=&#123;&#123;<span class="attr">uri</span>: item.icon&#125;&#125; style=&#123;&#123;<span class="attr">width</span>: <span class="number">80</span>, <span class="attr">height</span>: <span class="number">80</span>&#125;&#125;/&gt;</span><br><span class="line">                    &lt;Text&gt;</span><br><span class="line">                        &#123;item.name&#125;</span><br><span class="line">                    &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>View&gt;</span><br><span class="line">            );</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> itemArr;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> style = StyleSheet.create(&#123;</span><br><span class="line">    container: &#123;</span><br><span class="line">        flex: <span class="number">1</span>,</span><br><span class="line">        flexDirection: <span class="string">'row'</span>,</span><br><span class="line">        flexWrap: <span class="string">'wrap'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> LYImageDemo;</span><br></pre></td></tr></table></figure></li></ul><p>效果图 ：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="D:/myblog/blog/source/_posts/jiugongge.png" alt="jiugongge"></p><h3 id="TextInput"><a href="#TextInput" class="headerlink" title="TextInput"></a>TextInput</h3><p>文本输入框，相当于OC中的UITextFiled，在用法和属性方面，两者都有很大的借鉴之处：通过键盘将文本输入到应用程序的一个基本的组件。</p><p>本组件的属性提供了多种特性的配置，譬如自动完成，自动大小写、占位符、以及多种不同的键盘类型(如纯数字键盘)等待</p><p>官方文档:<a href="https://www.reactnative.cn/docs/textinput" target="_blank" rel="noopener">https://www.reactnative.cn/docs/textinput</a></p><h3 id="ScrollView组件"><a href="#ScrollView组件" class="headerlink" title="ScrollView组件"></a>ScrollView组件</h3><p>从移动端开发的经验来看，scrollView无疑时开发中最重要的一个组件，比如后面会学到的FlatList就是继承它。那么，在开发中比如:焦点图、引导页等地方都有它的影子。</p><blockquote><p>一个包装了平台的ScrollView(滚动视图)的组件。同时还集成了触摸锁定的“响应者”系统。</p></blockquote><h5 id="两个重点"><a href="#两个重点" class="headerlink" title="两个重点"></a>两个重点</h5><ul><li><p>ScrollView必须有一个<strong>确定的高度</strong>才能正常工作</p><p>它实际上所做的的就是将一系列不确定高度的子组件装进一个确定高度的容器(通过滚动操作).</p><p>通常由两种做法:</p><ul><li>直接给该ScrollView进行设置高度(不建议)</li><li>ScrollView中不要加{flex:1}</li></ul></li><li><p>ScrollView内部的其他响应者尚无法阻止ScrollView本身成为响应者</p></li></ul><p>5.5.2 ScrollView常用属性</p><p><a href="https://www.reactnative.cn/docs/scrollview" target="_blank" rel="noopener">https://www.reactnative.cn/docs/scrollview</a></p><h3 id="RN获取屏幕宽高及屏幕像素比"><a href="#RN获取屏幕宽高及屏幕像素比" class="headerlink" title="RN获取屏幕宽高及屏幕像素比"></a>RN获取屏幕宽高及屏幕像素比</h3><p>文档：<a href="https://reactnative.cn/docs/height-and-width/" target="_blank" rel="noopener">https://reactnative.cn/docs/height-and-width/</a></p><p>RN中通过Dimensions组件来获取屏幕宽高</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;ScrollView, Text, StyleSheet, View, Dimensions&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;width, height&#125; = Dimensions.get(<span class="string">"window"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.box1&#125;&gt;</span><br><span class="line">                &lt;Text&gt;屏幕宽度是：&#123;width&#125;，屏幕高度是：&#123;height&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    box1:&#123;</span><br><span class="line">        backgroundColor: <span class="string">'pink'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>获取像素比:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// width宽度逻辑像素</span></span><br><span class="line"><span class="comment">// height高度逻辑像素  对于不同像素的屏幕，屏幕逻辑像素不一样</span></span><br><span class="line"><span class="comment">// scale缩放比</span></span><br><span class="line"><span class="keyword">const</span> &#123;width, height, scale&#125; = Dimensions.get(<span class="string">"window"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.box1&#125;&gt;</span><br><span class="line">                &lt;Text&gt;屏幕宽度是：&#123;width&#125;，屏幕高度是：&#123;height&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Text&gt;屏幕缩放比是：&#123;scale&#125;&lt;/</span>Text&gt;</span><br><span class="line">                &#123;<span class="comment">/*  对于不同像素的屏幕(即不同型号手机)，屏幕逻辑像素不一样，即宽度不一定都是360*/</span>&#125;</span><br><span class="line">                &#123;<span class="comment">/* 缩放比对不同的手机也可能不一样，不是固定值 */</span>&#125;</span><br><span class="line"></span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>面试题： 为什么获取屏幕分辨率，为什么获取的屏幕高度和真实高度不一致？<br>Dimensions.get(“window”)获取的是屏幕可用范围的宽高(不是绝对宽高)</p><font color="red">注意：</font><p>对于不同像素的屏幕(即不同型号手机)，屏幕逻辑像素不一样，即宽度不一定都是360</p><p>缩放比对不同的手机也可能不一样，不是固定值</p><h3 id="Button组件"><a href="#Button组件" class="headerlink" title="Button组件"></a>Button组件</h3><p>RN中，展示按钮使用的是 Bttton组件，<a href="https://reactnative.cn/docs/button/，" target="_blank" rel="noopener">https://reactnative.cn/docs/button/，</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button style=&#123;styles.btn&#125; title=<span class="string">"点我！"</span> color=<span class="string">"pink"</span> onPress=&#123;<span class="keyword">this</span>.handlePress&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>Button 组件的几个重要属性：   </p><p>title 按钮上的展示文字</p><p>color 按钮的背景颜色（安卓），或者文本颜色（IOS）</p><p>onPress  按压事件(即点击事件)</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, Text, Button, StyleSheet&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App7</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            num:<span class="number">89</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.handlePress = <span class="keyword">this</span>.handlePress.bind(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handlePress()&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            num:<span class="keyword">this</span>.state.num+<span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;Text&gt;&#123;<span class="keyword">this</span>.state.num&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Button style=&#123;styles.btn&#125; title="点我！" color="pink" onPress=&#123;this.handlePress&#125;&gt;&lt;/</span>Button&gt;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="regexp">    btn:&#123;</span></span><br><span class="line"><span class="regexp">        width:100</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure><h3 id="自定义按钮组件TouchableOpacity"><a href="#自定义按钮组件TouchableOpacity" class="headerlink" title="自定义按钮组件TouchableOpacity"></a>自定义按钮组件TouchableOpacity</h3><p>因为Button样式本身有局限性。TouchableOpacity组件可以自由定义组件样式。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, Text, Button, StyleSheet, TouchableOpacity&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App7</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            num:<span class="number">89</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.handlePress = <span class="keyword">this</span>.handlePress.bind(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handlePress()&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            num:<span class="keyword">this</span>.state.num+<span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;TouchableOpacity style=&#123;styles.myBtn&#125; onPress=&#123;<span class="keyword">this</span>.handlePress&#125;&gt;</span><br><span class="line">                    &lt;Text&gt;自定义按钮&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">                &lt;Text&gt;&#123;<span class="keyword">this</span>.state.num&#125;&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    myBtn:&#123;</span><br><span class="line">        width:<span class="number">100</span>,</span><br><span class="line">        height:<span class="number">100</span>,</span><br><span class="line">        backgroundColor:<span class="string">"pink"</span>,</span><br><span class="line">        borderRadius:<span class="number">50</span>,</span><br><span class="line">        justifyContent:<span class="string">"center"</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Image组件"><a href="#Image组件" class="headerlink" title="Image组件"></a>Image组件</h3><p><strong>引入方式一</strong>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ImgUrl <span class="keyword">from</span> <span class="string">'../res/banner1.png'</span></span><br><span class="line">&lt;Image source=&#123;ImgUrl&#125;/&gt;</span><br></pre></td></tr></table></figure><p><strong>引入方式二</strong>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">'../res/logo.png'</span>)&#125;/&gt;</span><br></pre></td></tr></table></figure><p><strong>引入方式三</strong>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Image source=&#123;&#123; <span class="attr">uri</span>:<span class="string">"https://www.baidu.com/img/baidu_resultlogo@2.png"</span> &#125;&#125;  style=&#123;styles.st2&#125;/&gt; </span><br><span class="line">注意：这种引入方式需要给图片添加宽高样式，才能看得见图片</span><br></pre></td></tr></table></figure><h3 id="WebView组件"><a href="#WebView组件" class="headerlink" title="WebView组件"></a>WebView组件</h3><p>WebView组件相当于在app内部内嵌一个浏览器，可以通过它的source属性中的uri，写入对应网页地址，从而展示一个页面。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;WebView&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App10</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;WebView source=&#123;&#123; <span class="attr">uri</span>: <span class="string">"https://m.jd.com/"</span>&#125;&#125; &gt;<span class="xml"><span class="tag">&lt;/<span class="name">WebView</span>&gt;</span></span>    </span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过上面的代码可以在应用中直接打开看到京东H5页面</p><h2 id="网络通讯"><a href="#网络通讯" class="headerlink" title="网络通讯"></a>网络通讯</h2><p>很多移动应用都需要从远程地址中获取数据或资源.你可能需要给某个REST API发起POST请求以提交用户数据,又或者可能仅仅需要从某个服务器上获取一些静态内容—-以上就是你会用到东西,新手可以对照这个简短的视频教程加深理解.</p><p>发起请求:</p><p>要从任意地址获取内容的话,只需要地将网址作为参数传递给fetch方法即可(fetch这个词本身也就是获取的意思);</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://mywebsite.com/mydata.json'</span>)</span><br></pre></td></tr></table></figure><p>Fetch 还有可选的第二个参数，可以用来定制 HTTP 请求一些参数。你可以指定 header 参数，或是指定使用 POST 方法，又或是提交数据等等：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://mywebsite.com/endpoint/'</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    Accept: <span class="string">'application/json'</span>,</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    firstParam: <span class="string">'yourValue'</span>,</span><br><span class="line">    secondParam: <span class="string">'yourOtherValue'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>提交数据的格式关键取决于 headers 中的<code>Content-Type</code>。<code>Content-Type</code>有很多种，对应 body 的格式也有区别。到底应该采用什么样的<code>Content-Type</code>取决于服务器端，所以请和服务器端的开发人员沟通确定清楚。常用的’Content-Type’除了上面的’application/json’，还有传统的网页表单形式，示例如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://mywebsite.com/endpoint/'</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  body: <span class="string">'key1=value1&amp;key2=value2'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>可以参考<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener">Fetch 请求文档</a>来查看所有可用的参数。</p><h3 id="图片的另一种引入方式"><a href="#图片的另一种引入方式" class="headerlink" title="图片的另一种引入方式"></a>图片的另一种引入方式</h3><p>在\android\app\src\main\res\ 目录下新建drawable文件夹，存放资源图片。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Image source=&#123;&#123; <span class="attr">uri</span>:<span class="string">"图片名"</span> &#125; &#125;  style=&#123;styles.st1&#125; /&gt;</span><br></pre></td></tr></table></figure><p>引入的是app内部资源图片</p><p>注意:</p><p>1    uri后面直接书写图片名称，不需要后缀名，同样需要设置宽高样式</p><p>2    重新编译应用(重新执行react-native run android)</p><p>​    重新编译引用可能会报错: java.io.IOException 的问题, 此时只要把 android目录下的缓存清理掉即可，清理缓存的命令如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd android</span><br><span class="line"></span><br><span class="line">gradlew clean    (执行之前建议先在模拟器中关掉项目，否则有可能报错)</span><br><span class="line"></span><br><span class="line">再退回项目根目录</span><br><span class="line"></span><br><span class="line">重新执行react-native run-android</span><br></pre></td></tr></table></figure><h3 id="FlatList组件的使用"><a href="#FlatList组件的使用" class="headerlink" title="FlatList组件的使用"></a>FlatList组件的使用</h3><p>FlatList的使用：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;View &gt;</span><br><span class="line">    &lt;FlatList</span><br><span class="line">        numColumns=&#123;<span class="number">1</span>&#125;<span class="comment">//每行显示个数</span></span><br><span class="line">        data=&#123; <span class="keyword">this</span>.state.arr_data &#125;<span class="comment">//数据源</span></span><br><span class="line">        renderItem=&#123; <span class="keyword">this</span>.renderData &#125;<span class="comment">//渲染函数</span></span><br><span class="line">        /&gt;    </span><br><span class="line">&lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">... ...</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">renderData(&#123;item&#125;)&#123;  /</span><span class="regexp">/ item 就是数组数据中的每一项对象</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;View &gt;</span></span><br><span class="line"><span class="regexp">            &lt;Text&gt;&#123;item.id&#125;、&#123;item.data&#125;&lt;/</span>Text&gt;    </span><br><span class="line">        &lt;<span class="regexp">/View&gt; </span></span><br><span class="line"><span class="regexp">    ) </span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>完整代码</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, Text, FlatList&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr_data=[</span><br><span class="line">    &#123;</span><br><span class="line">        id:<span class="number">1</span>,</span><br><span class="line">        data:<span class="number">10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id:<span class="number">2</span>,</span><br><span class="line">        data:<span class="number">20</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id:<span class="number">3</span>,</span><br><span class="line">        data:<span class="number">30</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id:<span class="number">4</span>,</span><br><span class="line">        data:<span class="number">40</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            arr_data</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    renderData(&#123;item&#125;)&#123;  <span class="comment">// item 就是数组数据中的每一项对象</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View &gt;</span><br><span class="line">                &lt;Text&gt;&#123;item.id&#125;、&#123;item.data&#125;&lt;<span class="regexp">/Text&gt;    </span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt; </span><br><span class="line">        ) </span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View &gt;</span><br><span class="line">                &lt;FlatList</span><br><span class="line">                    numColumns=&#123;<span class="number">1</span>&#125;<span class="comment">//每行显示个数</span></span><br><span class="line">                    data=&#123; <span class="keyword">this</span>.state.arr_data &#125;<span class="comment">//数据源</span></span><br><span class="line">                    renderItem=&#123; <span class="keyword">this</span>.renderData &#125;<span class="comment">//渲染函数</span></span><br><span class="line">                /&gt;    </span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="TextInput-组件"><a href="#TextInput-组件" class="headerlink" title="TextInput 组件"></a>TextInput 组件</h3><p>TextInput文本输入组件的使用：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet, TextInput&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App3</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;TextInput </span><br><span class="line">                    style=&#123;styles.txt&#125;</span><br><span class="line">                    placeholder=<span class="string">"请输入..."</span>     <span class="comment">// 占位符设置(提示文本)</span></span><br><span class="line">                    placeholderTextColor=<span class="string">"#ccc"</span>    <span class="comment">//   占位符颜色设置</span></span><br><span class="line">                    <span class="comment">// maxLength = &#123;6&#125;         //  可以输入的最大长度</span></span><br><span class="line">                    <span class="comment">// underlineColorAndroid='transparent'   // 底线设置透明</span></span><br><span class="line">                    <span class="comment">// secureTextEntry = &#123;true&#125;    //安卓下的密码设置</span></span><br><span class="line">                /&gt;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="regexp">    txt:&#123;</span></span><br><span class="line"><span class="regexp">        borderWidth:1,</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ height:40,</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br></pre></td></tr></table></figure><h3 id="ScrollView的使用"><a href="#ScrollView的使用" class="headerlink" title="ScrollView的使用"></a>ScrollView的使用</h3><p>使用ScrollView组件实现横向多屏：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ScrollView style=&#123;styles.box&#125;</span><br><span class="line">horizontal=&#123;<span class="literal">true</span>&#125;<span class="comment">//水平排列</span></span><br><span class="line">pagingEnabled=&#123;<span class="literal">true</span>&#125;<span class="comment">//滚动条倍数滚动</span></span><br><span class="line">showsHorizontalScrollIndicator=&#123;<span class="literal">false</span>&#125; <span class="comment">//不显示横向滚动条（用小圆点代替）</span></span><br><span class="line">&gt;</span><br><span class="line">&#123;<span class="comment">/* 多屏展示 */</span>&#125;</span><br><span class="line">&lt;View&gt;<span class="xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>第1屏<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">&lt;View&gt;<span class="xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>第2屏<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/ScrollView&gt;</span></span><br></pre></td></tr></table></figure><p>完整代码如下：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet, Text,ScrollView&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App5</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View &gt;</span><br><span class="line">                &lt;ScrollView horizontal=&#123;<span class="literal">true</span>&#125; pagingEnabled=&#123;<span class="literal">true</span>&#125; showsHorizontalScrollIndicator=&#123;<span class="literal">false</span>&#125;&gt;</span><br><span class="line">                    &lt;View style=&#123;[styles.itemBox,styles.itemBox1]&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;第<span class="number">1</span>屏&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>View&gt;</span><br><span class="line">                    &lt;View style=&#123;[styles.itemBox,styles.itemBox2]&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;第<span class="number">2</span>屏&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>View&gt;</span><br><span class="line">                    &lt;View style=&#123;[styles.itemBox,styles.itemBox3]&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;第<span class="number">3</span>屏&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>View&gt;</span><br><span class="line">                &lt;<span class="regexp">/ScrollView&gt;</span></span><br><span class="line"><span class="regexp">                </span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    itemBox:&#123;</span><br><span class="line">        width:<span class="number">360</span>,</span><br><span class="line">        height:<span class="number">100</span></span><br><span class="line">    &#125;,</span><br><span class="line">    itemBox1:&#123;</span><br><span class="line">        backgroundColor:<span class="string">"#fcf"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    itemBox2:&#123;</span><br><span class="line">        backgroundColor:<span class="string">"#ccc"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    itemBox3:&#123;</span><br><span class="line">        backgroundColor:<span class="string">"#ffc"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="图片展示的练习"><a href="#图片展示的练习" class="headerlink" title="图片展示的练习"></a>图片展示的练习</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/07/27/W4lo9O.png" alt="图片展示"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet, Image, Text, FlatList&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> img_data=[</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p01"</span>,</span><br><span class="line">        des:<span class="string">"Puma Defy 赛琳娜限定"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p02"</span>,</span><br><span class="line">        des:<span class="string">"圣罗兰 口红礼盒"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p03"</span>,</span><br><span class="line">        des:<span class="string">"大豆家  方头奶奶鞋"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p04"</span>,</span><br><span class="line">        des:<span class="string">"小狗图案不锈钢皂"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p05"</span>,</span><br><span class="line">        des:<span class="string">"YSL限量眼影银盘"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">"p06"</span>,</span><br><span class="line">        des:<span class="string">"可折叠加厚双面使用榻榻米床垫"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App1</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            img_data</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    renderData(&#123;item&#125;)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.itemBox&#125;&gt;</span><br><span class="line">                </span><br><span class="line">                &lt;Image source=&#123;&#123;<span class="attr">uri</span>:item.name&#125;&#125;  style=&#123;&#123;<span class="attr">width</span>:<span class="number">100</span>,<span class="attr">height</span>:<span class="number">100</span>&#125;&#125;/&gt;</span><br><span class="line"></span><br><span class="line">                &lt;Text style=&#123;styles.tit&#125;&gt;&#123;item.des&#125;&lt;<span class="regexp">/Text&gt;    </span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt; </span><br><span class="line">        ) </span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;View style=&#123;styles.boxs&#125;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;Image source=&#123;&#123;<span class="attr">uri</span>:<span class="string">"tit_50x16"</span>&#125;&#125; style=&#123;&#123;<span class="attr">width</span>:<span class="number">50</span>,<span class="attr">height</span>:<span class="number">16</span>, <span class="attr">marginTop</span>:<span class="number">10</span>,<span class="attr">marginBottom</span>:<span class="number">10</span>&#125;&#125;/&gt;</span><br><span class="line">                    </span><br><span class="line">                    </span><br><span class="line">                    &lt;FlatList</span><br><span class="line">                        numColumns=&#123;<span class="number">3</span>&#125;<span class="comment">//每行显示个数</span></span><br><span class="line">                        data=&#123; <span class="keyword">this</span>.state.img_data &#125;<span class="comment">//数据源</span></span><br><span class="line">                        renderItem=&#123; <span class="keyword">this</span>.renderData &#125;<span class="comment">//渲染函数</span></span><br><span class="line">                    /&gt;    </span><br><span class="line">                    </span><br><span class="line">                    </span><br><span class="line">                   </span><br><span class="line">                &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    container:&#123;</span><br><span class="line">        flex:<span class="number">1</span>,</span><br><span class="line">        backgroundColor:<span class="string">"#ddd"</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    boxs:&#123;</span><br><span class="line">        width:<span class="number">340</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    imgs:&#123;</span><br><span class="line">        flexDirection:<span class="string">"row"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    tit:&#123;</span><br><span class="line">        fontSize:<span class="number">12</span>,</span><br><span class="line">        height: <span class="number">16</span>,</span><br><span class="line">        lineHeight:<span class="number">16</span></span><br><span class="line">    &#125;,</span><br><span class="line">    itemBox:&#123;</span><br><span class="line">        width:<span class="number">100</span>,</span><br><span class="line">        marginRight:<span class="number">20</span>,</span><br><span class="line">        marginBottom:<span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="登录界面的实现"><a href="#登录界面的实现" class="headerlink" title="登录界面的实现"></a>登录界面的实现</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/07/27/W4lLDA.jpg" alt="登录界面的实现"></p><p>完整代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet,Dimensions, Image, Text, TextInput, TouchableOpacity&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"><span class="keyword">const</span> &#123;height,scale&#125; = Dimensions.get(<span class="string">"window"</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App3</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">                &lt;View  style=&#123;styles.wrap&#125;&gt;</span><br><span class="line">                    &#123;<span class="comment">/* 头像 */</span>&#125;</span><br><span class="line">                    &lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">'../res/avatar.jpg'</span>)&#125;  style=&#123;styles.avatar&#125;/&gt;</span><br><span class="line">                    &#123;<span class="comment">/* 两个输入框 */</span>&#125;</span><br><span class="line">                </span><br><span class="line">                    &lt;TextInput </span><br><span class="line">                        <span class="comment">// style=&#123;Object.assign(&#123;&#125;,styles.txt)&#125;</span></span><br><span class="line">                        style=&#123;[styles.username,styles.txt]&#125;</span><br><span class="line">                        placeholder=<span class="string">"请输入用户名"</span>     <span class="comment">// 占位符设置(提示文本)</span></span><br><span class="line">                        placeholderTextColor=<span class="string">"#ccc"</span>    <span class="comment">//   占位符颜色设置</span></span><br><span class="line">                        underlineColorAndroid=<span class="string">'transparent'</span>   <span class="comment">// 底线设置透明</span></span><br><span class="line">                    /&gt;</span><br><span class="line">                    &lt;TextInput </span><br><span class="line">                        style=&#123;styles.txt&#125;</span><br><span class="line">                        placeholder=<span class="string">"请输入密码"</span>     <span class="comment">// 占位符设置(提示文本)</span></span><br><span class="line">                        placeholderTextColor=<span class="string">"#ccc"</span>    <span class="comment">//   占位符颜色设置</span></span><br><span class="line">                        underlineColorAndroid=<span class="string">'transparent'</span>   <span class="comment">// 底线设置透明</span></span><br><span class="line">                        secureTextEntry = &#123;<span class="literal">true</span>&#125;    <span class="comment">//安卓下的密码设置</span></span><br><span class="line">                    /&gt;</span><br><span class="line">                    &#123;<span class="comment">/* 登录按钮 */</span>&#125;</span><br><span class="line">                    &lt;TouchableOpacity style=&#123;styles.loginBtn&#125; activeOpacity=&#123;<span class="number">0.7</span>&#125;&gt;</span><br><span class="line">                        &lt;Text style=&#123;styles.loginText&#125;&gt;</span><br><span class="line">                            登 录</span><br><span class="line">                        &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">                    &#123;<span class="comment">/* 忘记密码和注册账号 */</span>&#125;</span><br><span class="line">                    &lt;View style=&#123;styles.newUser&#125;&gt;</span><br><span class="line">                        &lt;TouchableOpacity activeOpacity=&#123;<span class="number">0.8</span>&#125;&gt;</span><br><span class="line">                            &lt;Text style=&#123;&#123;<span class="attr">fontSize</span>:<span class="number">10</span>&#125;&#125;&gt;</span><br><span class="line">                                忘记密码</span><br><span class="line">                            &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">                        &lt;TouchableOpacity activeOpacity=&#123;<span class="number">0.8</span>&#125;&gt;</span><br><span class="line">                            &lt;Text style=&#123;&#123;<span class="attr">fontSize</span>:<span class="number">10</span>&#125;&#125;&gt;</span><br><span class="line">                                注册新用户</span><br><span class="line">                            &lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;/</span>TouchableOpacity&gt;</span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                    &#123;/</span>* 其他方式登录 *<span class="regexp">/&#125;    </span></span><br><span class="line"><span class="regexp">                    &lt;View style=&#123;styles.others&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;View style=&#123;styles.line&#125;&gt;&lt;/</span>View&gt;</span><br><span class="line">                        &lt;View style=&#123;styles.othersTitle&#125;&gt;<span class="xml"><span class="tag">&lt;<span class="name">Text</span>  <span class="attr">style</span>=<span class="string">&#123;&#123;fontSize:12&#125;&#125;</span>&gt;</span>其他方式登录<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">                        &lt;View style=&#123;styles.icons&#125;&gt;</span><br><span class="line">                            &lt;TouchableOpacity activeOpacity=&#123;<span class="number">0.8</span>&#125;&gt;</span><br><span class="line">                                &lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">"../res/icon1.png"</span>)&#125; style=&#123;styles.icon&#125;/&gt;</span><br><span class="line">                            &lt;<span class="regexp">/TouchableOpacity&gt;</span></span><br><span class="line"><span class="regexp">                            &lt;TouchableOpacity activeOpacity=&#123;0.8&#125;&gt;</span></span><br><span class="line"><span class="regexp">                                &lt;Image source=&#123;require("../</span>res/icon2.png<span class="string">")&#125; style=&#123;[styles.icon,styles.iconSnd]&#125;/&gt;</span></span><br><span class="line"><span class="string">                            &lt;/TouchableOpacity&gt;</span></span><br><span class="line"><span class="string">                            &lt;TouchableOpacity activeOpacity=&#123;0.8&#125;&gt;</span></span><br><span class="line"><span class="string">                                &lt;Image source=&#123;require("</span>../res/icon3.png<span class="string">")&#125; style=&#123;styles.icon&#125;/&gt;</span></span><br><span class="line"><span class="string">                            &lt;/TouchableOpacity&gt;</span></span><br><span class="line"><span class="string">                            </span></span><br><span class="line"><span class="string">                        &lt;/View&gt;</span></span><br><span class="line"><span class="string">                    &lt;/View&gt;</span></span><br><span class="line"><span class="string">                &lt;/View&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">            &lt;/View&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="string">    container:&#123;</span></span><br><span class="line"><span class="string">        flex:1,</span></span><br><span class="line">        backgroundColor:"#eee",</span><br><span class="line">        alignItems:<span class="string">"center"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    wrap:&#123;</span><br><span class="line">        width:<span class="number">320</span>,</span><br><span class="line">        height,</span><br><span class="line">        alignItems:<span class="string">"center"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    avatar:&#123;</span><br><span class="line">        width:<span class="number">60</span>,</span><br><span class="line">        height:<span class="number">60</span>,</span><br><span class="line">        borderRadius:<span class="number">30</span>,</span><br><span class="line">        borderWidth:<span class="number">1</span>,</span><br><span class="line">        borderColor:<span class="string">"#fff"</span>,</span><br><span class="line">        marginBottom:<span class="number">30</span>,</span><br><span class="line">        marginTop:<span class="number">50</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    txt:&#123;</span><br><span class="line">        width:<span class="string">"100%"</span>,</span><br><span class="line">        height:<span class="number">40</span>,</span><br><span class="line">        backgroundColor:<span class="string">"#fff"</span>,</span><br><span class="line">        paddingLeft:<span class="number">10</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    username:&#123;</span><br><span class="line">        marginBottom:<span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    loginBtn:&#123;</span><br><span class="line">        width:<span class="string">"100%"</span>,</span><br><span class="line">        height:<span class="number">30</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span>,</span><br><span class="line">        backgroundColor:<span class="string">"skyblue"</span>,</span><br><span class="line">        borderRadius:<span class="number">4</span>,</span><br><span class="line">        marginTop:<span class="number">20</span></span><br><span class="line">    &#125;,</span><br><span class="line">    loginText:&#123;</span><br><span class="line">        lineHeight:<span class="number">30</span>,</span><br><span class="line">        color:<span class="string">"#fff"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    newUser:&#123;</span><br><span class="line">        flexDirection:<span class="string">"row"</span>,</span><br><span class="line">        justifyContent:<span class="string">"space-between"</span>,</span><br><span class="line">        width:<span class="string">"100%"</span>,</span><br><span class="line">        marginTop:<span class="number">10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    others:&#123;</span><br><span class="line">        width:<span class="string">"100%"</span>,</span><br><span class="line">        position:<span class="string">"absolute"</span>,</span><br><span class="line">        bottom:<span class="number">50</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    line:&#123;</span><br><span class="line">        width:<span class="string">"100%"</span>,</span><br><span class="line">        height:<span class="number">1</span>/scale,</span><br><span class="line">        backgroundColor:<span class="string">"#999"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    othersTitle:&#123;</span><br><span class="line">        marginTop:<span class="number">-8</span>,</span><br><span class="line">        backgroundColor:<span class="string">"#eee"</span>,</span><br><span class="line">        paddingLeft:<span class="number">10</span>,</span><br><span class="line">        paddingRight:<span class="number">10</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    icons:&#123;</span><br><span class="line">        flexDirection:<span class="string">"row"</span>,</span><br><span class="line">        marginTop:<span class="number">10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    icon:&#123;</span><br><span class="line">        width:<span class="number">30</span>,</span><br><span class="line">        height:<span class="number">30</span>,</span><br><span class="line">        borderRadius:<span class="number">15</span></span><br><span class="line">    &#125;,</span><br><span class="line">    iconSnd:&#123;</span><br><span class="line">        marginLeft:<span class="number">15</span>,</span><br><span class="line">        marginRight:<span class="number">15</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="图片和文字的展示案例"><a href="#图片和文字的展示案例" class="headerlink" title="图片和文字的展示案例"></a>图片和文字的展示案例</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="D:/qq/React Native移动跨平台开发从零基础入门到项目实战-6天-资料/day03/assets/2020-02-07_032753.jpg" alt="2020-02-07_032753"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet, Image, Text, ScrollView&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App5</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;View &gt;</span><br><span class="line">                &lt;ScrollView horizontal=&#123;<span class="literal">true</span>&#125; pagingEnabled=&#123;<span class="literal">true</span>&#125; showsHorizontalScrollIndicator=&#123;<span class="literal">false</span>&#125;&gt;</span><br><span class="line">                    &lt;View style=&#123;styles.itemBox&#125;&gt;</span><br><span class="line">                        &lt;Image source=&#123;<span class="built_in">require</span>(<span class="string">'../res/banner1.png'</span>)&#125; style=&#123;&#123;<span class="attr">width</span>:<span class="number">360</span>,<span class="attr">height</span>:<span class="number">201</span>&#125;&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Image</span>&gt;</span></span></span><br><span class="line">                        &lt;View style=&#123;styles.titleBox&#125;&gt;</span><br><span class="line">                            &lt;Text  style=&#123;styles.titleTxt&#125;&gt;前端让IT互联有魅力&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;/</span>View&gt;</span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;View style=&#123;styles.itemBox&#125;&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;Image source=&#123;require('../</span>res/banner2.png<span class="string">')&#125; style=&#123;&#123;width:360,height:201&#125;&#125;&gt;&lt;/Image&gt;</span></span><br><span class="line"><span class="string">                        &lt;View style=&#123;styles.titleBox&#125;&gt;</span></span><br><span class="line"><span class="string">                            &lt;Text style=&#123;styles.titleTxt&#125;&gt;Java薪未来&lt;/Text&gt;</span></span><br><span class="line"><span class="string">                        &lt;/View&gt;</span></span><br><span class="line"><span class="string">                    &lt;/View&gt;</span></span><br><span class="line"><span class="string">                    &lt;View style=&#123;styles.itemBox&#125;&gt;</span></span><br><span class="line"><span class="string">                        &lt;Image source=&#123;require('</span>../res/banner3.png<span class="string">')&#125; style=&#123;&#123;width:360,height:201&#125;&#125;&gt;&lt;/Image&gt;</span></span><br><span class="line"><span class="string">                        &lt;View style=&#123;styles.titleBox&#125;&gt;</span></span><br><span class="line"><span class="string">                            &lt;Text style=&#123;styles.titleTxt&#125;&gt;全栈UI设计&lt;/Text&gt;</span></span><br><span class="line"><span class="string">                        &lt;/View&gt;</span></span><br><span class="line"><span class="string">                    &lt;/View&gt;</span></span><br><span class="line"><span class="string">                &lt;/ScrollView&gt;</span></span><br><span class="line"><span class="string">            &lt;/View&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">const styles = StyleSheet.create(&#123;</span></span><br><span class="line"><span class="string">    itemBox:&#123;</span></span><br><span class="line"><span class="string">        width:360</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    titleBox:&#123;</span></span><br><span class="line"><span class="string">        position:"absolute",</span></span><br><span class="line"><span class="string">        bottom:0,</span></span><br><span class="line"><span class="string">        backgroundColor:"rgba(0, 0, 0, 0.3)",</span></span><br><span class="line"><span class="string">        height:30,</span></span><br><span class="line"><span class="string">        width:360</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    titleTxt:&#123;</span></span><br><span class="line"><span class="string">        color:"#fff",</span></span><br><span class="line"><span class="string">        lineHeight:30,</span></span><br><span class="line"><span class="string">        marginLeft:10</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="适配其他分辨率的做法"><a href="#适配其他分辨率的做法" class="headerlink" title="适配其他分辨率的做法"></a>适配其他分辨率的做法</h3><p>在上一天的学习中，我们了解到，每种机型的Dimensions 宽度、高度、像素比是有可能不一样的，即在我们现在使用的360宽度，在其他机型上就不一定完全适配。</p><p>如果出现不适配的情况，可以使用以下解决方案：</p><p>比如，我们要在1080(360 x 3)像素的机型上书写340宽度的盒子，则其他机型(width x scale)要书写多少宽度？</p><p>推导过程如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const &#123;width,scale&#125; &#x3D; Dimensions.get(&#39;window&#39;)</span><br><span class="line"></span><br><span class="line">340&#x2F;360*3 &#x3D; ？&#x2F;width*scale</span><br><span class="line"></span><br><span class="line">所以 ？&#x3D; width*scale*340&#x2F;1080</span><br><span class="line"></span><br><span class="line">所以 ？&#x3D; (width*scale&#x2F;1080)*340</span><br><span class="line"></span><br><span class="line">即在书写的时候，我们可以先抽取这个物理比率</span><br><span class="line">const wuli &#x3D; width * scale&#x2F;1080   </span><br><span class="line"></span><br><span class="line">然后让这个物理比率乘以 我们本来要书写的宽度340</span><br><span class="line"></span><br><span class="line">所以，适配所有机型的宽度可以这么写：  width: wuli*340</span><br></pre></td></tr></table></figure><p>完整写法：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;View, StyleSheet,Dimensions, Image, Text, FlatList&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;width,scale&#125; = Dimensions.get(<span class="string">'window'</span>)</span><br><span class="line"><span class="keyword">const</span> wuli = width * scale/<span class="number">1080</span>   </span><br><span class="line"></span><br><span class="line">... ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = StyleSheet.create(&#123;</span><br><span class="line">    box:&#123;</span><br><span class="line">        width: wuli*<span class="number">340</span>,</span><br><span class="line">        height: wuli*<span class="number">200</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="关闭所有黄色警告的代码"><a href="#关闭所有黄色警告的代码" class="headerlink" title="关闭所有黄色警告的代码"></a>关闭所有黄色警告的代码</h3><p>把下面代码添加在index.js中的AppRegistry.registerComponent()前面：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.ignoredYellowBox &#x3D; [&#39;Warning: BackAndroid is deprecated. Please use BackHandler instead.&#39;,&#39;source.uri should not be an empty string&#39;,&#39;Invalid props.style key&#39;];</span><br><span class="line"> </span><br><span class="line">console.disableYellowBox &#x3D; true &#x2F;&#x2F; 关闭全部黄色警告</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;自定义组件&quot;&gt;&lt;a href=&quot;#自定义组件&quot; class=&quot;headerlink&quot; title=&quot;自定义组件&quot;&gt;&lt;/a&gt;自定义组件&lt;/h2&gt;&lt;p&gt;RN中自定义组件和react中自定义组件类似，但在使用RN基本组件的时候，需要先进行引入：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123;View, Text, StyleSheet&amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;react-native&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但是样式的书写和react不同，是通过react-native模块中的  StyleSheet.create()方法来书写，然后在组件中的style属性值中引用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React-Native" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React-Native/"/>
    
    
      <category term="组件化" scheme="https://liyi-up.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>网络通讯-axios</title>
    <link href="https://liyi-up.top/2021/07/24/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF-axios/"/>
    <id>https://liyi-up.top/2021/07/24/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF-axios/</id>
    <published>2021-07-24T08:42:40.000Z</published>
    <updated>2021-07-26T05:48:21.398Z</updated>
    
    <content type="html"><![CDATA[<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><font color="red">HTTP协议</font>是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。. HTTP是一个<font color="red">基于TCP/IP通信协议来传递数据</font>（HTML 文件, 图片文件, 查询结果等）。MDN 文档：[HTTP概述 - HTTP | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview)### HTTP请求交互的基本过程![HTTP协议](https://z3.ax1x.com/2021/07/24/WcCOnP.png)<a id="more"></a>1.前后应用从浏览器端向服务器发送HTTP请求（请求报文）2.后台服务器接收到请求后，调度服务器应用处理请求，向浏览器端返回HTTP响应（响应报文）3.浏览器端接收到响应后，解析显示响应体/调用监视回调### HTTP请求报文**请求行：**<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">method url</span><br><span class="line">GET    &#x2F;product_detail?id&#x3D;2</span><br><span class="line">POST   &#x2F;login</span><br></pre></td></tr></table></figure>**多个请求头:**<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host: www.baidu.com</span><br><span class="line">Cookie: BAIDUID&#x3D;AD3B0FA706E; BIDUPSID&#x3D;AD3B0FA706;</span><br><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded 或者 application&#x2F;</span><br></pre></td></tr></table></figure>**请求体:**<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username&#x3D;tom&amp;pwd&#x3D;123</span><br><span class="line">&#123;&quot;username&quot;: &quot;tom&quot;, &quot;pwd&quot;: 123</span><br></pre></td></tr></table></figure>### HTTP 响应报文**响应状态行:**<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">status statusTest</span><br></pre></td></tr></table></figure>**多个响应头:**<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text&#x2F;html;charset&#x3D;utf-8 </span><br><span class="line">Set-Cookie: BD_CK_SAM&#x3D;1;path&#x3D;&#x2F;</span><br></pre></td></tr></table></figure>**响应体:**html 文本/json 文本/js/css/图片### post 请求体参数格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: application&#x2F;x-www-form-urlencoded;charset&#x3D;utf-8</span><br></pre></td></tr></table></figure>用于键值对参数，参数的键值用=连接, 参数之间用&连接 例如:` name=%E5%B0%8F%E6%98%8E&age=12`<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: application&#x2F;json;charset&#x3D;utf-8</span><br></pre></td></tr></table></figure>用于 json 字符串参数 例如: `{"name": "%E5%B0%8F%E6%98%8E", "age": 12}`<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: multipart&#x2F;form-data</span><br></pre></td></tr></table></figure>用于文件上传请求### 常见的响应状态码| 状态 | 参数                  | 解释                               || ---- | --------------------- | ---------------------------------- || 200  | OK                    | 请求成功。一般用于 GET 与 POST 请  || 201  | Created               | 已创建。成功请求并创建了新的资源   || 401  | Unauthorized          | 未授权/请求要求用户的身份认证      || 404  | Not Found             | 服务器无法根据客户端的请求找到资源 || 500  | Internal Server Error | 服务器内部错误，无法完成请求       |### 不同类型的请求及其作1.`GET`: 从服务器端读取数据2.`POST`: 向服务器端添加新数据3.`PUT`: 更新服务器端已经数据4.`DELETE`: 删除服务器端数据### API 的分类#### REST API(restfu)1.发送请求进行 CRUD 哪个操作由请求方式来2.同一个请求路径可以进行多个操作3.请求方式会用到 GET/POST/PUT/DELET#### 非 REST API (restle)1.请求方式不决定请求的 CRUD 操作2.一个请求路径只对应一个操作3.一般只有 GET/POS### 使用 json-server 搭建 REST API#### json-server 是什么用来快速搭建 REST API 的工具包####  使用 json-serve1.在线文档: https://github.com/typicode/json-server2.下载: `npm install  json-server -g`3.目标根目录下创建数据库 json 文件: db.json4.启动服务器执行命令: json-server --watch db.js#### 使用浏览器访问测试<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:3000&#x2F;posts</span><br><span class="line">http:&#x2F;&#x2F;localhost:3000&#x2F;posts&#x2F;1</span><br></pre></td></tr></table></figure>#### 使用 axios 访问测## XHR 的理解和使用`XMLHttpRequest`（XHR）对象用于与服务器交互。通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许网页在不影响用户操作的情况下，更新页面的局部内容。`XMLHttpRequest` 在 [AJAX](https://developer.mozilla.org/zh-CN/docs/Glossary/AJAX) 编程中被大量使用。![XHR的理解与使用](https://z3.ax1x.com/2021/07/24/WcEbcQ.png)[XMLHttpRequest - Web API 接口参考 | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest)### 理解1.使用`XMLHttpRequest(XHR)`对象可以与服务器交互,也就是发送ajax请求2.前端可以获取数据,而无需让整个的页面刷新3.这使得Web页面可以只更新页面的局部,而不影响用户的操作### 区别一般http请求与ajax请求1.ajax请求是一种特别的http请求2.对服务器端来说,没有任何区别,区别在于浏览器3.浏览器端发送请求:只有XHR或fetch发出的才是ajax请求,其他所有的都是非ajax请求4.浏览器端接收到响应- 一般请求: 浏览器一般会直接显示响应体数据, 也就是我们常说的刷新/ 跳转页面- ajax 请求: 浏览器不会对界面进行任何更新操作, 只是调用监视的回调 函数并传入响应相关数据### API1. `XMLHttpRequest():`创建 XHR 对象的构造函数2. `status: `响应状态码值, 比如 200, 4043. `statusText: `响应状态文本4. `readyState: `标识请求状态的只读属性   | 标识码 | 描述       |   | ------ | ---------- |   | 0      | 初始       |   | 1      | open()之后 |   | 2      | send()之后 |   | 3      | 请求中     |   | 4      | 请求完成   |5. `onreadystatechange:` 绑定 readyState 改变的监6. `responseType:` 指定响应数据类型, 如果是'json', 得到响应后自动解析响应体数据7. `response: `响应体数据, 类型取决于 responseType 的指8. `timeout: `指定请求超时时间, 默认为 0 代表没有限9. `ontimeout:` 绑定超时的监听10. `onerror: `绑定请求网络错误的监听11. `open(): `初始化一个请求, 参数为: `(method, url[, async])`12. `send(data): `发送请求13. `abort(): `中断请求14. `getResponseHeader(name):` 获取指定名称的响应头值15. `getAllResponseHeaders():` 获取所有响应头组成的字符串16. `setRequestHeader(name, value): `设置请求头###  XHR 的 ajax 封装(简单版axios)#### 特点1.函数返回值是<font color="red">promise</font>,成功的结果为response,异常为error2.能处理多种类型的请求:GET/POST/PUT/DELETE3.函数的参数为一个配置对象<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">url: <span class="string">''</span>, <span class="comment">// 请求地址</span></span><br><span class="line">method: <span class="string">''</span>, <span class="comment">// 请求方式 GET/POST/PUT/DELETE</span></span><br><span class="line">params: &#123;&#125;, <span class="comment">// GET/DELETE 请求的 query 参数</span></span><br><span class="line">data: &#123;&#125;, <span class="comment">// POST 或 DELETE 请求的请求体参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>4.<font color="red">响应 json数据自动解析为 js</font><h4 id="编码实现"><a href="#编码实现" class="headerlink" title="编码实现"></a>编码实现</h4><h2 id="axios-的理解和使用"><a href="#axios-的理解和使用" class="headerlink" title="axios 的理解和使用"></a>axios 的理解和使用</h2><h3 id="axios是什么"><a href="#axios是什么" class="headerlink" title="axios是什么?"></a>axios是什么?</h3><p>1.前端流行的ajax请求库</p><p>2.react/vue 官方都推荐使用axios 发送 ajax请求</p><p>3.文档: <a href="https://github.com/axios/axios" target="_blank" rel="noopener">https://github.com/axios/axios</a></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>1.基本promise的异步 ajax请求库</p><p>2.浏览器端/node端都可以使用</p><p>3.支持请求/响应拦截器</p><p>4.支持请求取消</p><p>5.请求/响应数据转换</p><p>6.批量发送多个请求</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">axios(config): 通用/最本质的发任意类型请求的方式</span><br><span class="line">axios(url[, config]): 可以只指定 url 发 <span class="keyword">get</span> 请求</span><br><span class="line">axios.request(config): 等同于 axios(config)</span><br><span class="line">axios.<span class="keyword">get</span>(url[, config]): 发 <span class="keyword">get</span> 请求</span><br><span class="line">axios.delete(url[, config]): 发 delete 请求</span><br><span class="line">axios.post(url[, data, config]): 发 post 请求</span><br><span class="line">axios.put(url[, data, config]): 发 put 请求</span><br><span class="line">axios.defaults.xxx: 请求的默认全局配置</span><br><span class="line">axios.interceptors.request.use(): 添加请求拦截器</span><br><span class="line">axios.interceptors.response.use(): 添加响应拦截器</span><br><span class="line">axios.create([config]): 创建一个新的 axios(它没有下面的功能)</span><br><span class="line">axios.Cancel(): 用于创建取消请求的错误对象</span><br><span class="line">axios.CancelToken(): 用于创建取消请求的 token 对象</span><br><span class="line">axios.isCancel(): 是否是一个取消请求的错误</span><br><span class="line">axios.all(promises): 用于批量执行多个异步请求</span><br><span class="line">axios.spread(): 用来指定接收所有成功数据的回调函数的方</span><br></pre></td></tr></table></figure><h3 id="难点语法的理解和使用"><a href="#难点语法的理解和使用" class="headerlink" title="难点语法的理解和使用"></a>难点语法的理解和使用</h3><h4 id="axios-create-config"><a href="#axios-create-config" class="headerlink" title="axios.create(config)"></a>axios.create(config)</h4><p>1.根据指定配置创建一个新的 axios, 也就就每个新 axios 都有自己的配置 </p><p>2.新 axios 只是没有取消请求和批量发请求的方法, 其它所有语法都是一致的</p><p>3.为什么要设计这个语法?</p><ul><li>需求: 项目中有部分接口需要的配置与另一部分接口需要的配置不太一 样, 如何处理</li><li><font color="red">解决: 创建 2 个新 axios, 每个都有自己特有的配置, 分别应用到不同要 求的接口请求中</font></li></ul><h4 id="拦截器函数-ajax-请求-请求的回调函数的调用顺序"><a href="#拦截器函数-ajax-请求-请求的回调函数的调用顺序" class="headerlink" title="拦截器函数/ajax 请求/请求的回调函数的调用顺序"></a>拦截器函数/ajax 请求/请求的回调函数的调用顺序</h4><p>1.说明: 调用 axios()并不是立即发送 ajax 请求, 而是需要经历一个较长的流</p><p>2.流程: </p><blockquote><p>请求拦截器2 =&gt; 请求拦截器 1 =&gt; 发ajax请求 =&gt; 响应拦截器1 =&gt; 响 应拦截器 2 =&gt; 请求的回调</p></blockquote><p>3.注意: </p><blockquote><p>此流程是通过 promise 串连起来的, 请求拦截器传递的是 config, 响应 拦截器传递的是 response</p></blockquote><h4 id="取消请求"><a href="#取消请求" class="headerlink" title="取消请求"></a>取消请求</h4><p>1.基本流程:</p><p>配置 cancelToken 对象<br>缓存用于取消请求的 cancel 函数<br>在后面特定时机调用 cancel 函数取消请求<br>在错误回调中判断如果 error 是 cancel, 做相应处理</p><p>2.实现功能</p><p>点击按钮, 取消某个正在请求中的请求 在请求一个接口前, 取消前面一个未完成的请求</p><h2 id="axios-源码分析"><a href="#axios-源码分析" class="headerlink" title="axios 源码分析"></a>axios 源码分析</h2><h3 id="源码目录结构"><a href="#源码目录结构" class="headerlink" title="源码目录结构"></a>源码目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">├── &#x2F;dist&#x2F; # 项目输出目录</span><br><span class="line">├── &#x2F;lib&#x2F; # 项目源码目录</span><br><span class="line">│ ├── &#x2F;adapters&#x2F; # 定义请求的适配器 xhr、http</span><br><span class="line">│ │ ├── http.js # 实现 http 适配器(包装 http 包)</span><br><span class="line">│ │ └── xhr.js # 实现 xhr 适配器(包装 xhr 对象)</span><br><span class="line">│ ├── &#x2F;cancel&#x2F; # 定义取消功能</span><br><span class="line">│ ├── &#x2F;core&#x2F; # 一些核心功能</span><br><span class="line">│ │ ├── Axios.js # axios 的核心主类</span><br><span class="line">│ │ ├── dispatchRequest.js # 用来调用 http 请求适配器方法发送请求的函数</span><br><span class="line">│ │ ├── InterceptorManager.js # 拦截器的管理器</span><br><span class="line">│ │ └── settle.js # 根据 http 响应状态，改变 Promise 的状态</span><br><span class="line">│ ├── &#x2F;helpers&#x2F; # 一些辅助方法</span><br><span class="line">│ ├── axios.js # 对外暴露接口</span><br><span class="line">│ ├── defaults.js # axios 的默认配置</span><br><span class="line">│ └── utils.js # 公用工具</span><br><span class="line">├── package.json # 项目信息</span><br><span class="line">├── index.d.ts # 配置 TypeScript 的声明文件</span><br><span class="line">└── index.js # 入口文件</span><br></pre></td></tr></table></figure><h3 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h3><h4 id="axios与Axios的关系"><a href="#axios与Axios的关系" class="headerlink" title="axios与Axios的关系"></a>axios与Axios的关系</h4><p>1.从语法上来说: axios 不是 Axios 的实例</p><p>2.从功能上来说: axios 是 Axios 的实例</p><p>3.axios是<code>Axios.prototype.request</code>函数<code>bind()</code>返回的函数</p><p>4.axios作为对象有<code>Axios</code>原型对象上的所有方法,有Axios对象上所有属性</p><h4 id="instance与axios的区别"><a href="#instance与axios的区别" class="headerlink" title="instance与axios的区别"></a>instance与axios的区别</h4><p><strong>相同:</strong></p><p>1.都是一个能发送任意请求的函数:<code>request(config)</code></p><p>2.都有发特定请求的各种方法:<code>get()/post()/put()/delete()</code></p><p>3.都有默认配置和拦截器的属性: <code>defaults/interceptors</code></p><p><strong>不同:</strong></p><font color="red">1.默认匹配的值很可能不一样</font><font color="red">2.instance 没有 axios 后面添加的一些方法:` create()/CancelToken()/all()`</font><h3 id="源码难点与流程分析"><a href="#源码难点与流程分析" class="headerlink" title="源码难点与流程分析"></a>源码难点与流程分析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1. axios与Axios的关系</span><br><span class="line">    axios函数对应的是Axios.prototype.request方法通过bind(Axiox的实例)产生的函数</span><br><span class="line">    axios有Axios原型上的所有发特定类型请求的方法: get()&#x2F;post()&#x2F;put()&#x2F;delete()</span><br><span class="line">    axios有Axios的实例上的所有属性: defaults&#x2F;interceptors</span><br><span class="line">    后面又添加了create()&#x2F;CancelToken()&#x2F;all()</span><br><span class="line"></span><br><span class="line">2. axios.create()返回的对象与axios的区别</span><br><span class="line">    1). 相同: </span><br><span class="line">        都是一个能发任意请求的函数: request(config)</span><br><span class="line">        都有发特定请求的各种方法: get()&#x2F;post()&#x2F;put()&#x2F;delete()</span><br><span class="line">        都有默认配置和拦截器的属性: defaults&#x2F;interceptors</span><br><span class="line">    2). 不同:</span><br><span class="line">        默认匹配的值不一样</span><br><span class="line">        instance没有axios后面添加的一引起方法: create()&#x2F;CancelToken()&#x2F;all()</span><br><span class="line"></span><br><span class="line">3. axios发请求的流程</span><br><span class="line">    1). 整体流程: request(config)  &#x3D;&#x3D;&#x3D;&gt; dispatchRequest(config) &#x3D;&#x3D;&#x3D;&gt; xhrAdapter(config)</span><br><span class="line">    2). request(config): 将请求拦截器 &#x2F; dispatchRequest() &#x2F; 响应拦截器 通过promise链串连起来, 返回promise</span><br><span class="line">    3). dispatchRequest(config): 转换请求数据 &#x3D;&#x3D;&#x3D;&gt; 调用xhrAdapter()发请求 &#x3D;&#x3D;&#x3D;&gt; 请求返回后转换响应数据. 返回promise</span><br><span class="line">    4). xhrAdapter(config): 创建XHR对象, 根据config进行相应设置, 发送特定请求, 并接收响应数据, 返回promise</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="http://vipkshttp1.wiz.cn/ks/share/resources/49c30824-dcdf-4bd0-af2a-708f490b44a1/584701e2-1d9b-4523-b9b2-0f33e838dd7f/index_files/e5692e36861bd1d2fa1735c5ab801af7.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4. axios的请求&#x2F;响应拦截器是什么?</span><br><span class="line">    1). 请求拦截器: 在真正发请求前, 可以对请求进行检查或配置进行特定处理的函数, </span><br><span class="line">               包括成功&#x2F;失败的函数, 传递的必须是config</span><br><span class="line">    2). 响应拦截器: 在请求返回后, 可以对响应数据进行特定处理的函数,</span><br><span class="line">               包括成功&#x2F;失败的函数, 传递的默认是response</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="http://vipkshttp1.wiz.cn/ks/share/resources/49c30824-dcdf-4bd0-af2a-708f490b44a1/584701e2-1d9b-4523-b9b2-0f33e838dd7f/index_files/b0f95169782409e7576bc9704b93b693.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">5. axios的请求&#x2F;响应数据转换器是什么?</span><br><span class="line">    1). 请求转换器: 对请求头和请求体数据进行特定处理的函数</span><br><span class="line">        setContentTypeIfUnset(headers, &#39;application&#x2F;json;charset&#x3D;utf-8&#39;);</span><br><span class="line">        return JSON.stringify(data)</span><br><span class="line">    2). 响应转换器: 将响应体json字符串解析为js对象或数组的函数</span><br><span class="line">        response.data &#x3D; JSON.parse(response.data)</span><br><span class="line">6. response的整体结构</span><br><span class="line">    &#123;</span><br><span class="line">        data,</span><br><span class="line">        status,</span><br><span class="line">        statusText,</span><br><span class="line">        headers,</span><br><span class="line">        config,</span><br><span class="line">        request</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">7. error的整体结构</span><br><span class="line">    &#123;</span><br><span class="line">        message,</span><br><span class="line">        request,</span><br><span class="line">        response</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">8. 如何取消未完成的请求</span><br><span class="line">    1).当配置了cancelToken对象时, 保存cancel函数</span><br><span class="line">        创建一个用于将来中断请求的cancelPromise</span><br><span class="line">        并定义了一个用于取消请求的cancel函数</span><br><span class="line">        将cancel函数传递出来</span><br><span class="line">    2.调用cancel()取消请求</span><br><span class="line">        执行cacel函数, 传入错误信息message</span><br><span class="line">        内部会让cancelPromise变为成功, 且成功的值为一个Cancel对象</span><br><span class="line">        在cancelPromise的成功回调中中断请求, 并让发请求的proimse失败, 失败的reason为Cacel对象</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;HTTP&quot;&gt;&lt;a href=&quot;#HTTP&quot; class=&quot;headerlink&quot; title=&quot;HTTP&quot;&gt;&lt;/a&gt;HTTP&lt;/h2&gt;&lt;font color=&quot;red&quot;&gt;HTTP协议&lt;/font&gt;是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。. HTTP是一个&lt;font color=&quot;red&quot;&gt;基于TCP/IP通信协议来传递数据&lt;/font&gt;（HTML 文件, 图片文件, 查询结果等）。

MDN 文档：[HTTP概述 - HTTP | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview)

### HTTP请求交互的基本过程

![HTTP协议](https://z3.ax1x.com/2021/07/24/WcCOnP.png)
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="网络通讯" scheme="https://liyi-up.top/categories/Web/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/"/>
    
    
      <category term="axios" scheme="https://liyi-up.top/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>React-react-redux</title>
    <link href="https://liyi-up.top/2021/07/23/React-react-redux/"/>
    <id>https://liyi-up.top/2021/07/23/React-react-redux/</id>
    <published>2021-07-23T01:40:29.000Z</published>
    <updated>2021-08-03T02:48:12.519Z</updated>
    
    <content type="html"><![CDATA[<h2 id="React-redux-概述"><a href="#React-redux-概述" class="headerlink" title="React-redux 概述"></a>React-redux 概述</h2><h3 id="Redux-与-React的关系"><a href="#Redux-与-React的关系" class="headerlink" title="Redux 与 React的关系"></a>Redux 与 React的关系</h3><p><font color="red">Redux</font>与<font color="red">React</font>之间没有关系的，Redux支持React、Angular、JQuery甚至是JavaScript</p><p><font color="red">Redux</font>与<font color="red">React</font>这类库搭配起来更好用</p><a id="more"></a><h3 id="React-redux"><a href="#React-redux" class="headerlink" title="React-redux"></a>React-redux</h3><p><font color="red">react-redux</font>就是Redux官方出的 用于配合React的绑定库</p><p><font color="red">react-redux</font>能够使你的<font color="red">React</font>组件从<font color="red">Redux store</font>中更方便读取数据，并且向store中<font color="red">分发actions</font>以此来更新数据</p><h3 id="React-Redux中两个总要的成员"><a href="#React-Redux中两个总要的成员" class="headerlink" title="React-Redux中两个总要的成员"></a>React-Redux中两个总要的成员</h3><p>React UI 的框架是以 <font color="red">组件来进行驱动的</font>，所以react-redux中有<font color="red">两个重要的部分</font>。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://z3.ax1x.com/2021/07/23/WrAV8s.png" alt="Provider-connect"></p><h3 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h3><ul><li>Provider <font color="red">包裹根组件最外层</font>，使得所有子组件都能共享State</li><li>Provider 接收 <font color="red">store 作为 props</font>，然后通过context往下传递，这样 react中任何组件都可以通过 context获取store</li></ul><h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><ul><li>Provider 内部组件如果想要使用到state中的数据，就必须要 connect 进行一层包裹封装，换一句话来说就是必须要被connect进行加强</li><li>connect 就是方便我们组件能够获取到store中的state</li></ul><h2 id="React-redux-基础使用"><a href="#React-redux-基础使用" class="headerlink" title="React-redux 基础使用"></a>React-redux 基础使用</h2><h3 id="安装-react-redux"><a href="#安装-react-redux" class="headerlink" title="安装 react-redux"></a>安装 react-redux</h3><p>react-redux 不是官方所提供，所以在构建react项目之后，需要自行安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-redux</span><br><span class="line">npm install react-redux --save</span><br></pre></td></tr></table></figure><h3 id="安装-redux"><a href="#安装-redux" class="headerlink" title="安装 redux"></a>安装 redux</h3><p>react-redux 还需要依赖于 Redux 中的store，所以我们还需要安装 redux</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add react</span><br><span class="line">npm insatll redux --save</span><br></pre></td></tr></table></figure><h3 id="利用redux来构建-store"><a href="#利用redux来构建-store" class="headerlink" title="利用redux来构建 store"></a>利用redux来构建 store</h3><ul><li>创建reducer/index.js 文件，构建reducer 来响应 actions</li><li>创建store/index.js 文件，通过 createStore方法，把我们的reducer传入进来</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;reducer&#125; <span class="keyword">from</span> <span class="string">'../reducer'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(reducer);</span><br></pre></td></tr></table></figure><ul><li>app.js 中引入 store</li></ul><h3 id="构建页面结构"><a href="#构建页面结构" class="headerlink" title="构建页面结构"></a>构建页面结构</h3><ul><li>创建一个组件，名字叫ComA，里面存放一个button按钮</li><li>创建另一个组件，名字叫ComB，里面存放一个div，用来修饰数字</li><li>在app.js中引入两个组件</li></ul><h3 id="引入-Provider-组件"><a href="#引入-Provider-组件" class="headerlink" title="引入 Provider 组件"></a>引入 Provider 组件</h3><ul><li><p>在app.js中导入 Provider 组件</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br></pre></td></tr></table></figure></li><li><p>利用 Provider 组件将我们整个结构包裹起来，并传递给store</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="keyword">return</span> &#123;&lt;Provider store=&#123;store&#125;&gt;...&lt;<span class="regexp">/Provider&gt;&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="connect-使用"><a href="#connect-使用" class="headerlink" title="connect-使用"></a>connect-使用</h3><ul><li><p>导入 connect 方法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br></pre></td></tr></table></figure></li><li><p>调用 connect 方法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(...)(Component)</span><br></pre></td></tr></table></figure></li><li><p>coonect 方法会有一个返回值，而这个返回值就是加强后的组件</p></li></ul><h3 id="connect-参数说明"><a href="#connect-参数说明" class="headerlink" title="connect-参数说明"></a>connect-参数说明</h3><div class="table-container"><table><thead><tr><th>参数名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><strong>mapStateToPtops(state,ownProps)</strong></td><td>Function</td><td>此函数允许我们将store中的数据作为props绑定到组件上。<br><code>state</code>:redux中的 store<br><code>ownProps</code>:自己的props</td></tr><tr><td><strong>mapDispatchToProps(dispatch,ownProps)</strong></td><td>Function</td><td>将action作为props绑定到我们自己的函数中<br><code>dispathc</code>:就是store.dispatch<br><code>ownProps</code>:自己的props</td></tr><tr><td>mergeProps(stateProps,dispatchProps,ownProps)</td><td>Function</td><td>不管是<code>stateProps</code>还是<code>dispatchProps</code>,都需要和<code>ownProps</code>merge之后才会被赋值给我们组件，通常情况下，你可以不传这个参数，<code>connect</code>就会使用<code>Object.assign</code>替代方法</td></tr><tr><td>options</td><td>Object</td><td>可以定制 connector的行为</td></tr></tbody></table></div><h3 id="利用-connect-方法让我们组件与-store-关联"><a href="#利用-connect-方法让我们组件与-store-关联" class="headerlink" title="利用 connect 方法让我们组件与 store 关联"></a>利用 connect 方法让我们组件与 store 关联</h3><ul><li><p>在组件ComA和ComB，分别导入 connect 方法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br></pre></td></tr></table></figure></li><li><p>利用 connect 方法来对我们组件进行加强，并且导出</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect (mapStateTopProps,mapDispatchToProps)(Home)</span><br></pre></td></tr></table></figure><ul><li><p>组件ComA属于的是发送方，所以要实现第二个参数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="comment">// 导入 connect</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sendAction &#125; <span class="keyword">from</span> <span class="string">'../store/actions'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComA</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    sendClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.props);</span><br><span class="line">        <span class="comment">// 发送 aciton</span></span><br><span class="line">        <span class="keyword">this</span>.props.sendAction();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;button onClick=&#123;<span class="keyword">this</span>.sendClick&#125; &gt;+<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span>**</span><br><span class="line"> * 需要返回值</span><br><span class="line"> *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">const mapDispatchToProps = (dispatch) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">        sendAction: () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ 利用 dispatch发送一个action</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ 传递一个action对象需要定义type属性</span></span><br><span class="line"><span class="regexp">            dispatch(sendAction('111'))</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 组件A为发送方 所以要实现 第二个参数</span></span><br><span class="line"><span class="regexp">export default connect(null, mapDispatchToProps)(ComA);</span></span><br></pre></td></tr></table></figure></li><li><p>组件ComB属于的是接收方，所以要实现第一个参数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComB</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;&#123;<span class="keyword">this</span>.props.count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span>**</span><br><span class="line"> * 接收两个参数</span><br><span class="line"> * @param &#123;*&#125; state </span><br><span class="line"> * @returns </span><br><span class="line"> *<span class="regexp">/</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const mapStateToPtops = (state) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    console.log('ComB', state);</span></span><br><span class="line"><span class="regexp">    return state;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ B组件属于接收方，要实现connect第一个参数m第二个参数没有实现默认会维护一个dispatch方法</span></span><br><span class="line"><span class="regexp">export default connect(mapStateToPtops)(ComB)</span></span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;React-redux-概述&quot;&gt;&lt;a href=&quot;#React-redux-概述&quot; class=&quot;headerlink&quot; title=&quot;React-redux 概述&quot;&gt;&lt;/a&gt;React-redux 概述&lt;/h2&gt;&lt;h3 id=&quot;Redux-与-React的关系&quot;&gt;&lt;a href=&quot;#Redux-与-React的关系&quot; class=&quot;headerlink&quot; title=&quot;Redux 与 React的关系&quot;&gt;&lt;/a&gt;Redux 与 React的关系&lt;/h3&gt;&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Redux&lt;/font&gt;与&lt;font color=&quot;red&quot;&gt;React&lt;/font&gt;之间没有关系的，Redux支持React、Angular、JQuery甚至是JavaScript&lt;/p&gt;
&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Redux&lt;/font&gt;与&lt;font color=&quot;red&quot;&gt;React&lt;/font&gt;这类库搭配起来更好用&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://liyi-up.top/categories/Web/"/>
    
      <category term="前端开发" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
      <category term="React" scheme="https://liyi-up.top/categories/Web/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/"/>
    
    
      <category term="react-redux" scheme="https://liyi-up.top/tags/react-redux/"/>
    
  </entry>
  
</feed>
